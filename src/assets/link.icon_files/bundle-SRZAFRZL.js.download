(function(){(function(){"use strict";String.prototype.hashCode=function(){var a,l=0,h,C=this.length;for(h=0;h<C;h+=1)a=this.charCodeAt(h),l=l*31+a,l|=0;return l<0&&(l=-l+1),l},String.fromCodePoint=String.fromCodePoint||function(){for(var a=arguments.length,l=[],h;a--;){if(h=arguments[a],h<0||h>1114111)throw new RangeError;h<65536?l.unshift(h):(h-=65536,l.unshift(55296|h>>10,56320|h&1023))}return String.fromCharCode.apply(String,l)},String.prototype.codePointAt=String.prototype.codePointAt||function(a){var l=this.toString(),h=l.length,C=l.charCodeAt(a),x=l.charCodeAt(a+1);return a<0||a>=h?NaN:C<55296||C>56319||a+1===h||x<56320||C>57343?C:65536+1024*(C-55296)+x-56320},String.prototype.charLength=String.prototype.charLength||function(){var a,l,h=0,C,x=this;for(l=0;l<x.length;l+=1)a=x.charCodeAt(l),C=x.charCodeAt(l+1),a>=55296&&a<=57343&&!isNaN(C)&&C>=56320&&(l+=1),h+=1;return h},ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(a,l){var h,C,x,d=new Uint8Array(this);for(typeof l=="undefined"&&(l=d.length),x=new Uint8Array(l-a),C=x.length,h=0;h<C;h+=1)x[h]=d[h+a];return x.buffer}),ArrayBuffer.prototype.toString=function(a){if(a){var l=new Uint8Array(this),h,C=this.byteLength,x="";for(h=0;h<C;h+=1)x+=String.fromCharCode(l[h]);return btoa(x)}else return"[object ArrayBuffer]"};var t;try{t=window.indexedDB}catch(a){}function n(a,l){var h=a.deleteDatabase(l);h.onsuccess=function(){window.supportsIndexedDB=!0},h.onerror=function(){window.supportsIndexedDB=!1}}requestAnimationFrame(function(){if(t){var a,l;try{a="idbtest-icomoon.io/app",l=t.open(a),l.onerror=function(){l.error&&l.error.name==="InvalidStateError"?window.supportsIndexedDB=!1:(window.supportsIndexedDB=!0,n(t,a))},l.onsuccess=function(){window.supportsIndexedDB=!0,n(t,a)}}catch(h){window.supportsIndexedDB=!1}}else window.supportsIndexedDB=!1});function y(){var a=window.navigator.userAgent,l=a.indexOf("MSIE ");if(l>0)return parseInt(a.substring(l+5,a.indexOf(".",l)),10);var h=a.indexOf("Trident/");if(h>0){var C=a.indexOf("rv:");return parseInt(a.substring(C+3,a.indexOf(".",C)),10)}var x=a.indexOf("Edge/");return x>0?parseInt(a.substring(x+5,a.indexOf(".",x)),10):!1}y()&&(document.body.className+=" msie")})();angular.module("scriptLoader",[]).factory("scriptLoader",["$q",function(t){var n=[],y=function(a,l){var h=t.defer(),C,x;function d(){h.resolve(),l&&l()}return n.indexOf(a)<0?(n.push(a),C=document.getElementsByTagName("script")[0],x=document.createElement("script"),x.src=a,x.addEventListener?x.addEventListener("load",function(){d()},!1):x.onreadystatechange=function(){x.readyState in{loaded:1,complete:1}&&(x.onreadystatechange=null,d())},C.parentNode.insertBefore(x,C)):d(),h.promise};return{load:y}}]);function Ve(t){this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase();var n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var y in n)t==y&&(t=n[y]);for(var a=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],l=0;l<a.length;l++){var h=a[l].re,C=a[l].process,x=h.exec(t);x&&(channels=C(x),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),m=this.g.toString(16),f=this.b.toString(16);return d.length==1&&(d="0"+d),m.length==1&&(m="0"+m),f.length==1&&(f="0"+f),"#"+d+m+f},this.getHelpXML=function(){for(var d=new Array,m=0;m<a.length;m++)for(var f=a[m].example,c=0;c<f.length;c++)d[d.length]=f[c];for(var v in n)d[d.length]=v;var g=document.createElement("ul");g.setAttribute("id","rgbcolor-examples");for(var m=0;m<d.length;m++)try{var k=document.createElement("li"),E=new Ve(d[m]),A=document.createElement("div");A.style.cssText="margin: 3px; border: 1px solid black; background:"+E.toHex()+"; color:"+E.toHex(),A.appendChild(document.createTextNode("test"));var M=document.createTextNode(" "+d[m]+" -> "+E.toRGB()+" -> "+E.toHex());k.appendChild(A),k.appendChild(M),g.appendChild(k)}catch(N){}return g}}(function(){this.canvg=function(n,y,a){if(n==null&&y==null&&a==null){for(var l=document.getElementsByTagName("svg"),h=0;h<l.length;h++){var C=l[h],x=document.createElement("canvas");x.width=C.clientWidth,x.height=C.clientHeight,C.parentNode.insertBefore(x,C),C.parentNode.removeChild(C);var d=document.createElement("div");d.appendChild(C),canvg(x,d.innerHTML)}return}a=a||{},typeof n=="string"&&(n=document.getElementById(n)),n.svg!=null&&n.svg.stop();var m=t();n.childNodes.length==1&&n.childNodes[0].nodeName=="OBJECT"||(n.svg=m),m.opts=a;var f=n.getContext("2d");typeof y.documentElement!="undefined"?m.loadXmlDoc(f,y):y.substr(0,1)=="<"?m.loadXml(f,y):m.load(f,y)};function t(){var n={};return n.FRAMERATE=30,n.MAX_VIRTUAL_PIXELS=3e4,n.init=function(y){var a=0;n.UniqueId=function(){return a++,"canvg"+a},n.Definitions={},n.Styles={},n.Animations=[],n.Images=[],n.ctx=y,n.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(l,h){this.viewPorts.push({width:l,height:h})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(l){return l!=null&&typeof l=="number"?l:l=="x"?this.width():l=="y"?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},n.init(),n.ImagesLoaded=function(){for(var y=0;y<n.Images.length;y++)if(!n.Images[y].loaded)return!1;return!0},n.trim=function(y){return y.replace(/^\s+|\s+$/g,"")},n.compressSpaces=function(y){return y.replace(/[\s\r\t\n]+/gm," ")},n.ajax=function(y){var a;return window.XMLHttpRequest?a=new XMLHttpRequest:a=new ActiveXObject("Microsoft.XMLHTTP"),a?(a.open("GET",y,!1),a.send(null),a.responseText):null},n.parseXml=function(y){if(window.DOMParser){var a=new DOMParser;return a.parseFromString(y,"text/xml")}else{y=y.replace(/<!DOCTYPE svg[^>]*>/,"");var l=new ActiveXObject("Microsoft.XMLDOM");return l.async="false",l.loadXML(y),l}},n.Property=function(y,a){this.name=y,this.value=a},n.Property.prototype.getValue=function(){return this.value},n.Property.prototype.hasValue=function(){return this.value!=null&&this.value!==""},n.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var y=parseFloat(this.value);return(this.value+"").match(/%$/)&&(y=y/100),y},n.Property.prototype.valueOrDefault=function(y){return this.hasValue()?this.value:y},n.Property.prototype.numValueOrDefault=function(y){return this.hasValue()?this.numValue():y},n.Property.prototype.addOpacity=function(y){var a=this.value;if(y!=null&&y!=""&&typeof this.value=="string"){var l=new Ve(this.value);l.ok&&(a="rgba("+l.r+", "+l.g+", "+l.b+", "+y+")")}return new n.Property(this.name,a)},n.Property.prototype.getDefinition=function(){var y=this.value.match(/#([^\)'"]+)/);return y&&(y=y[1]),y||(y=this.value),n.Definitions[y]},n.Property.prototype.isUrlDefinition=function(){return this.value.indexOf("url(")==0},n.Property.prototype.getFillStyleDefinition=function(y,a){var l=this.getDefinition();if(l!=null&&l.createGradient)return l.createGradient(n.ctx,y,a);if(l!=null&&l.createPattern){if(l.getHrefAttribute().hasValue()){var h=l.attribute("patternTransform");l=l.getHrefAttribute().getDefinition(),h.hasValue()&&(l.attribute("patternTransform",!0).value=h.value)}return l.createPattern(n.ctx,y)}return null},n.Property.prototype.getDPI=function(y){return 96},n.Property.prototype.getEM=function(y){var a=12,l=new n.Property("fontSize",n.Font.Parse(n.ctx.font).fontSize);return l.hasValue()&&(a=l.toPixels(y)),a},n.Property.prototype.getUnits=function(){var y=this.value+"";return y.replace(/[0-9\.\-]/g,"")},n.Property.prototype.toPixels=function(y,a){if(!this.hasValue())return 0;var l=this.value+"";if(l.match(/em$/))return this.numValue()*this.getEM(y);if(l.match(/ex$/))return this.numValue()*this.getEM(y)/2;if(l.match(/px$/))return this.numValue();if(l.match(/pt$/))return this.numValue()*this.getDPI(y)*(1/72);if(l.match(/pc$/))return this.numValue()*15;if(l.match(/cm$/))return this.numValue()*this.getDPI(y)/2.54;if(l.match(/mm$/))return this.numValue()*this.getDPI(y)/25.4;if(l.match(/in$/))return this.numValue()*this.getDPI(y);if(l.match(/%$/))return this.numValue()*n.ViewPort.ComputeSize(y);var h=this.numValue();return a&&h<1?h*n.ViewPort.ComputeSize(y):h},n.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var y=this.value+"";return y.match(/s$/)?this.numValue()*1e3:y.match(/ms$/)?this.numValue():this.numValue()},n.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var y=this.value+"";return y.match(/deg$/)?this.numValue()*(Math.PI/180):y.match(/grad$/)?this.numValue()*(Math.PI/200):y.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)},n.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(a,l,h,C,x,d){var m=d!=null?this.Parse(d):this.CreateFont("","","","","",n.ctx.font);return{fontFamily:x||m.fontFamily,fontSize:C||m.fontSize,fontStyle:a||m.fontStyle,fontWeight:h||m.fontWeight,fontVariant:l||m.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var y=this;this.Parse=function(a){for(var l={},h=n.trim(n.compressSpaces(a||"")).split(" "),C={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},x="",d=0;d<h.length;d++)!C.fontStyle&&y.Styles.indexOf(h[d])!=-1?(h[d]!="inherit"&&(l.fontStyle=h[d]),C.fontStyle=!0):!C.fontVariant&&y.Variants.indexOf(h[d])!=-1?(h[d]!="inherit"&&(l.fontVariant=h[d]),C.fontStyle=C.fontVariant=!0):!C.fontWeight&&y.Weights.indexOf(h[d])!=-1?(h[d]!="inherit"&&(l.fontWeight=h[d]),C.fontStyle=C.fontVariant=C.fontWeight=!0):C.fontSize?h[d]!="inherit"&&(x+=h[d]):(h[d]!="inherit"&&(l.fontSize=h[d].split("/")[0]),C.fontStyle=C.fontVariant=C.fontWeight=C.fontSize=!0);return x!=""&&(l.fontFamily=x),l}},n.ToNumberArray=function(y){for(var a=n.trim(n.compressSpaces((y||"").replace(/,/g," "))).split(" "),l=0;l<a.length;l++)a[l]=parseFloat(a[l]);return a},n.Point=function(y,a){this.x=y,this.y=a},n.Point.prototype.angleTo=function(y){return Math.atan2(y.y-this.y,y.x-this.x)},n.Point.prototype.applyTransform=function(y){var a=this.x*y[0]+this.y*y[2]+y[4],l=this.x*y[1]+this.y*y[3]+y[5];this.x=a,this.y=l},n.CreatePoint=function(y){var a=n.ToNumberArray(y);return new n.Point(a[0],a[1])},n.CreatePath=function(y){for(var a=n.ToNumberArray(y),l=[],h=0;h<a.length;h+=2)l.push(new n.Point(a[h],a[h+1]));return l},n.BoundingBox=function(y,a,l,h){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(C,x){C!=null&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=C,this.x2=C),C<this.x1&&(this.x1=C),C>this.x2&&(this.x2=C)),x!=null&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=x,this.y2=x),x<this.y1&&(this.y1=x),x>this.y2&&(this.y2=x))},this.addX=function(C){this.addPoint(C,null)},this.addY=function(C){this.addPoint(null,C)},this.addBoundingBox=function(C){this.addPoint(C.x1,C.y1),this.addPoint(C.x2,C.y2)},this.addQuadraticCurve=function(C,x,d,m,f,c){var v=C+.6666666666666666*(d-C),g=x+2/3*(m-x),k=v+1/3*(f-C),E=g+1/3*(c-x);this.addBezierCurve(C,x,v,k,g,E,f,c)},this.addBezierCurve=function(C,x,d,m,f,c,v,g){var k=[C,x],E=[d,m],A=[f,c],M=[v,g];for(this.addPoint(k[0],k[1]),this.addPoint(M[0],M[1]),i=0;i<=1;i++){var S=function(G){return Math.pow(1-G,3)*k[i]+3*Math.pow(1-G,2)*G*E[i]+3*(1-G)*Math.pow(G,2)*A[i]+Math.pow(G,3)*M[i]},N=6*k[i]-12*E[i]+6*A[i],w=-3*k[i]+9*E[i]-9*A[i]+3*M[i],F=3*E[i]-3*k[i];if(w==0){if(N==0)continue;var U=-F/N;0<U&&U<1&&(i==0&&this.addX(S(U)),i==1&&this.addY(S(U)));continue}var L=Math.pow(N,2)-4*F*w;if(!(L<0)){var J=(-N+Math.sqrt(L))/(2*w);0<J&&J<1&&(i==0&&this.addX(S(J)),i==1&&this.addY(S(J)));var z=(-N-Math.sqrt(L))/(2*w);0<z&&z<1&&(i==0&&this.addX(S(z)),i==1&&this.addY(S(z)))}}},this.isPointInBox=function(C,x){return this.x1<=C&&C<=this.x2&&this.y1<=x&&x<=this.y2},this.addPoint(y,a),this.addPoint(l,h)},n.Transform=function(y){var a=this;this.Type={},this.Type.translate=function(m){this.p=n.CreatePoint(m),this.apply=function(f){f.translate(this.p.x||0,this.p.y||0)},this.unapply=function(f){f.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(f){f.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(m){var f=n.ToNumberArray(m);this.angle=new n.Property("angle",f[0]),this.cx=f[1]||0,this.cy=f[2]||0,this.apply=function(c){c.translate(this.cx,this.cy),c.rotate(this.angle.toRadians()),c.translate(-this.cx,-this.cy)},this.unapply=function(c){c.translate(this.cx,this.cy),c.rotate(-1*this.angle.toRadians()),c.translate(-this.cx,-this.cy)},this.applyToPoint=function(c){var v=this.angle.toRadians();c.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),c.applyTransform([Math.cos(v),Math.sin(v),-Math.sin(v),Math.cos(v),0,0]),c.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(m){this.p=n.CreatePoint(m),this.apply=function(f){f.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(f){f.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(f){f.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(m){this.m=n.ToNumberArray(m),this.apply=function(f){f.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.applyToPoint=function(f){f.applyTransform(this.m)}},this.Type.SkewBase=function(m){this.base=a.Type.matrix,this.base(m),this.angle=new n.Property("angle",m)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(m){this.base=a.Type.SkewBase,this.base(m),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(m){this.base=a.Type.SkewBase,this.base(m),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(m){for(var f=0;f<this.transforms.length;f++)this.transforms[f].apply(m)},this.unapply=function(m){for(var f=this.transforms.length-1;f>=0;f--)this.transforms[f].unapply(m)},this.applyToPoint=function(m){for(var f=0;f<this.transforms.length;f++)this.transforms[f].applyToPoint(m)};for(var l=n.trim(n.compressSpaces(y)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),h=0;h<l.length;h++){var C=n.trim(l[h].split("(")[0]),x=l[h].split("(")[1].replace(")",""),d=new this.Type[C](x);d.type=C,this.transforms.push(d)}},n.AspectRatio=function(y,a,l,h,C,x,d,m,f,c){a=n.compressSpaces(a),a=a.replace(/^defer\s/,"");var v=a.split(" ")[0]||"xMidYMid",g=a.split(" ")[1]||"meet",k=l/h,E=C/x,A=Math.min(k,E),M=Math.max(k,E);g=="meet"&&(h*=A,x*=A),g=="slice"&&(h*=M,x*=M),f=new n.Property("refX",f),c=new n.Property("refY",c),f.hasValue()&&c.hasValue()?y.translate(-A*f.toPixels("x"),-A*c.toPixels("y")):(v.match(/^xMid/)&&(g=="meet"&&A==E||g=="slice"&&M==E)&&y.translate(l/2-h/2,0),v.match(/YMid$/)&&(g=="meet"&&A==k||g=="slice"&&M==k)&&y.translate(0,C/2-x/2),v.match(/^xMax/)&&(g=="meet"&&A==E||g=="slice"&&M==E)&&y.translate(l-h,0),v.match(/YMax$/)&&(g=="meet"&&A==k||g=="slice"&&M==k)&&y.translate(0,C-x)),v=="none"?y.scale(k,E):g=="meet"?y.scale(A,A):g=="slice"&&y.scale(M,M),y.translate(d==null?0:-d,m==null?0:-m)},n.Element={},n.EmptyProperty=new n.Property("EMPTY",""),n.Element.ElementBase=function(y){if(this.attributes={},this.styles={},this.children=[],this.attribute=function(g,k){var E=this.attributes[g];return E!=null?E:(k==!0&&(E=new n.Property(g,""),this.attributes[g]=E),E||n.EmptyProperty)},this.getHrefAttribute=function(){for(var g in this.attributes)if(g.match(/:href$/))return this.attributes[g];return n.EmptyProperty},this.style=function(g,k){var E=this.styles[g];if(E!=null)return E;var A=this.attribute(g);if(A!=null&&A.hasValue())return this.styles[g]=A,A;var M=this.parent;if(M!=null){var S=M.style(g);if(S!=null&&S.hasValue())return S}return k==!0&&(E=new n.Property(g,""),this.styles[g]=E),E||n.EmptyProperty},this.render=function(g){if(this.style("display").value!="none"&&this.attribute("visibility").value!="hidden"){if(g.save(),this.attribute("mask").hasValue()){var k=this.attribute("mask").getDefinition();k!=null&&k.apply(g,this)}else if(this.style("filter").hasValue()){var E=this.style("filter").getDefinition();E!=null&&E.apply(g,this)}else this.setContext(g),this.renderChildren(g),this.clearContext(g);g.restore()}},this.setContext=function(g){},this.clearContext=function(g){},this.renderChildren=function(g){for(var k=0;k<this.children.length;k++)this.children[k].render(g)},this.addChild=function(g,k){var E=g;k&&(E=n.CreateElement(g)),E.parent=this,this.children.push(E)},y!=null&&y.nodeType==1){for(var a=0;a<y.childNodes.length;a++){var l=y.childNodes[a];if(l.nodeType==1&&this.addChild(l,!0),this.captureTextNodes&&l.nodeType==3){var h=l.nodeValue||l.text||"";n.trim(n.compressSpaces(h))!=""&&this.addChild(new n.Element.tspan(l),!1)}}for(var a=0;a<y.attributes.length;a++){var C=y.attributes[a];this.attributes[C.nodeName]=new n.Property(C.nodeName,C.nodeValue)}var x=n.Styles[y.nodeName];if(x!=null)for(var d in x)this.styles[d]=x[d];if(this.attribute("class").hasValue())for(var m=n.compressSpaces(this.attribute("class").value).split(" "),f=0;f<m.length;f++){if(x=n.Styles["."+m[f]],x!=null)for(var d in x)this.styles[d]=x[d];if(x=n.Styles[y.nodeName+"."+m[f]],x!=null)for(var d in x)this.styles[d]=x[d]}if(this.attribute("id").hasValue()){var x=n.Styles["#"+this.attribute("id").value];if(x!=null)for(var d in x)this.styles[d]=x[d]}if(this.attribute("style").hasValue()){for(var x=this.attribute("style").value.split(";"),a=0;a<x.length;a++)if(n.trim(x[a])!=""){var c=x[a].split(":"),d=n.trim(c[0]),v=n.trim(c[1]);this.styles[d]=new n.Property(d,v)}}this.attribute("id").hasValue()&&n.Definitions[this.attribute("id").value]==null&&(n.Definitions[this.attribute("id").value]=this)}},n.Element.RenderedElementBase=function(y){this.base=n.Element.ElementBase,this.base(y),this.setContext=function(a){if(this.style("fill").isUrlDefinition()){var l=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));l!=null&&(a.fillStyle=l)}else if(this.style("fill").hasValue()){var h=this.style("fill");h.value=="currentColor"&&(h.value=this.style("color").value),a.fillStyle=h.value=="none"?"rgba(0,0,0,0)":h.value}if(this.style("fill-opacity").hasValue()){var h=new n.Property("fill",a.fillStyle);h=h.addOpacity(this.style("fill-opacity").value),a.fillStyle=h.value}if(this.style("stroke").isUrlDefinition()){var l=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));l!=null&&(a.strokeStyle=l)}else if(this.style("stroke").hasValue()){var C=this.style("stroke");C.value=="currentColor"&&(C.value=this.style("color").value),a.strokeStyle=C.value=="none"?"rgba(0,0,0,0)":C.value}if(this.style("stroke-opacity").hasValue()){var C=new n.Property("stroke",a.strokeStyle);C=C.addOpacity(this.style("stroke-opacity").value),a.strokeStyle=C.value}if(this.style("stroke-width").hasValue()){var x=this.style("stroke-width").toPixels();a.lineWidth=x==0?.001:x}if(this.style("stroke-linecap").hasValue()&&(a.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(a.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(a.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()){var d=n.ToNumberArray(this.style("stroke-dasharray").value);typeof a.setLineDash!="undefined"?a.setLineDash(d):typeof a.webkitLineDash!="undefined"?a.webkitLineDash=d:typeof a.mozDash!="undefined"&&(a.mozDash=d);var m=this.style("stroke-dashoffset").numValueOrDefault(1);typeof a.lineDashOffset!="undefined"?a.lineDashOffset=m:typeof a.webkitLineDashOffset!="undefined"?a.webkitLineDashOffset=m:typeof a.mozDashOffset!="undefined"&&(a.mozDashOffset=m)}if(typeof a.font!="undefined"&&(a.font=n.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.attribute("transform").hasValue()){var f=new n.Transform(this.attribute("transform").value);f.apply(a)}if(this.style("clip-path").hasValue()){var c=this.style("clip-path").getDefinition();c!=null&&c.apply(a)}this.style("opacity").hasValue()&&(a.globalAlpha=this.style("opacity").numValue())}},n.Element.RenderedElementBase.prototype=new n.Element.ElementBase,n.Element.PathElementBase=function(y){this.base=n.Element.RenderedElementBase,this.base(y),this.path=function(a){return a!=null&&a.beginPath(),new n.BoundingBox},this.renderChildren=function(a){this.path(a),n.Mouse.checkPath(this,a),a.fillStyle!=""&&(this.attribute("fill-rule").hasValue()?a.fill(this.attribute("fill-rule").value):a.fill()),a.strokeStyle!=""&&a.stroke();var l=this.getMarkers();if(l!=null){if(this.style("marker-start").isUrlDefinition()){var h=this.style("marker-start").getDefinition();h.render(a,l[0][0],l[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var h=this.style("marker-mid").getDefinition(),C=1;C<l.length-1;C++)h.render(a,l[C][0],l[C][1]);if(this.style("marker-end").isUrlDefinition()){var h=this.style("marker-end").getDefinition();h.render(a,l[l.length-1][0],l[l.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},n.Element.PathElementBase.prototype=new n.Element.RenderedElementBase,n.Element.svg=function(y){this.base=n.Element.RenderedElementBase,this.base(y),this.baseClearContext=this.clearContext,this.clearContext=function(a){this.baseClearContext(a),n.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(a){a.strokeStyle="rgba(0,0,0,0)",a.lineCap="butt",a.lineJoin="miter",a.miterLimit=4,this.baseSetContext(a),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),a.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var l=n.ViewPort.width(),h=n.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),typeof this.root=="undefined"){l=this.attribute("width").toPixels("x"),h=this.attribute("height").toPixels("y");var C=0,x=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(C=-this.attribute("refX").toPixels("x"),x=-this.attribute("refY").toPixels("y")),a.beginPath(),a.moveTo(C,x),a.lineTo(l,x),a.lineTo(l,h),a.lineTo(C,h),a.closePath(),a.clip()}if(n.ViewPort.SetCurrent(l,h),this.attribute("viewBox").hasValue()){var d=n.ToNumberArray(this.attribute("viewBox").value),m=d[0],f=d[1];l=d[2],h=d[3],n.AspectRatio(a,this.attribute("preserveAspectRatio").value,n.ViewPort.width(),l,n.ViewPort.height(),h,m,f,this.attribute("refX").value,this.attribute("refY").value),n.ViewPort.RemoveCurrent(),n.ViewPort.SetCurrent(d[2],d[3])}}},n.Element.svg.prototype=new n.Element.RenderedElementBase,n.Element.rect=function(y){this.base=n.Element.PathElementBase,this.base(y),this.path=function(a){var l=this.attribute("x").toPixels("x"),h=this.attribute("y").toPixels("y"),C=this.attribute("width").toPixels("x"),x=this.attribute("height").toPixels("y"),d=this.attribute("rx").toPixels("x"),m=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(m=d),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(d=m),d=Math.min(d,C/2),m=Math.min(m,x/2),a!=null&&(a.beginPath(),a.moveTo(l+d,h),a.lineTo(l+C-d,h),a.quadraticCurveTo(l+C,h,l+C,h+m),a.lineTo(l+C,h+x-m),a.quadraticCurveTo(l+C,h+x,l+C-d,h+x),a.lineTo(l+d,h+x),a.quadraticCurveTo(l,h+x,l,h+x-m),a.lineTo(l,h+m),a.quadraticCurveTo(l,h,l+d,h),a.closePath()),new n.BoundingBox(l,h,l+C,h+x)}},n.Element.rect.prototype=new n.Element.PathElementBase,n.Element.circle=function(y){this.base=n.Element.PathElementBase,this.base(y),this.path=function(a){var l=this.attribute("cx").toPixels("x"),h=this.attribute("cy").toPixels("y"),C=this.attribute("r").toPixels();return a!=null&&(a.beginPath(),a.arc(l,h,C,0,Math.PI*2,!0),a.closePath()),new n.BoundingBox(l-C,h-C,l+C,h+C)}},n.Element.circle.prototype=new n.Element.PathElementBase,n.Element.ellipse=function(y){this.base=n.Element.PathElementBase,this.base(y),this.path=function(a){var l=4*((Math.sqrt(2)-1)/3),h=this.attribute("rx").toPixels("x"),C=this.attribute("ry").toPixels("y"),x=this.attribute("cx").toPixels("x"),d=this.attribute("cy").toPixels("y");return a!=null&&(a.beginPath(),a.moveTo(x,d-C),a.bezierCurveTo(x+l*h,d-C,x+h,d-l*C,x+h,d),a.bezierCurveTo(x+h,d+l*C,x+l*h,d+C,x,d+C),a.bezierCurveTo(x-l*h,d+C,x-h,d+l*C,x-h,d),a.bezierCurveTo(x-h,d-l*C,x-l*h,d-C,x,d-C),a.closePath()),new n.BoundingBox(x-h,d-C,x+h,d+C)}},n.Element.ellipse.prototype=new n.Element.PathElementBase,n.Element.line=function(y){this.base=n.Element.PathElementBase,this.base(y),this.getPoints=function(){return[new n.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new n.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(a){var l=this.getPoints();return a!=null&&(a.beginPath(),a.moveTo(l[0].x,l[0].y),a.lineTo(l[1].x,l[1].y)),new n.BoundingBox(l[0].x,l[0].y,l[1].x,l[1].y)},this.getMarkers=function(){var a=this.getPoints(),l=a[0].angleTo(a[1]);return[[a[0],l],[a[1],l]]}},n.Element.line.prototype=new n.Element.PathElementBase,n.Element.polyline=function(y){this.base=n.Element.PathElementBase,this.base(y),this.points=n.CreatePath(this.attribute("points").value),this.path=function(a){var l=new n.BoundingBox(this.points[0].x,this.points[0].y);a!=null&&(a.beginPath(),a.moveTo(this.points[0].x,this.points[0].y));for(var h=1;h<this.points.length;h++)l.addPoint(this.points[h].x,this.points[h].y),a!=null&&a.lineTo(this.points[h].x,this.points[h].y);return l},this.getMarkers=function(){for(var a=[],l=0;l<this.points.length-1;l++)a.push([this.points[l],this.points[l].angleTo(this.points[l+1])]);return a.push([this.points[this.points.length-1],a[a.length-1][1]]),a}},n.Element.polyline.prototype=new n.Element.PathElementBase,n.Element.polygon=function(y){this.base=n.Element.polyline,this.base(y),this.basePath=this.path,this.path=function(a){var l=this.basePath(a);return a!=null&&(a.lineTo(this.points[0].x,this.points[0].y),a.closePath()),l}},n.Element.polygon.prototype=new n.Element.polyline,n.Element.path=function(y){this.base=n.Element.PathElementBase,this.base(y);var a=this.attribute("d").value;a=a.replace(/,/gm," "),a=a.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),a=a.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),a=a.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),a=a.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),a=a.replace(/([0-9])([+\-])/gm,"$1 $2"),a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),a=n.compressSpaces(a),a=n.trim(a),this.PathParser=new function(l){this.tokens=l.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new n.Point(0,0),this.control=new n.Point(0,0),this.current=new n.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return this.isEnd()?!0:this.tokens[this.i+1].match(/^[A-Za-z]$/)!=null},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var h=new n.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(h)},this.getAsControlPoint=function(){var h=this.getPoint();return this.control=h,h},this.getAsCurrentPoint=function(){var h=this.getPoint();return this.current=h,h},this.getReflectedControlPoint=function(){if(this.previousCommand.toLowerCase()!="c"&&this.previousCommand.toLowerCase()!="s"&&this.previousCommand.toLowerCase()!="q"&&this.previousCommand.toLowerCase()!="t")return this.current;var h=new n.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return h},this.makeAbsolute=function(h){return this.isRelativeCommand()&&(h.x+=this.current.x,h.y+=this.current.y),h},this.addMarker=function(h,C,x){x!=null&&this.angles.length>0&&this.angles[this.angles.length-1]==null&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(x)),this.addMarkerAngle(h,C==null?null:C.angleTo(h))},this.addMarkerAngle=function(h,C){this.points.push(h),this.angles.push(C)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var h=0;h<this.angles.length;h++)if(this.angles[h]==null){for(var C=h+1;C<this.angles.length;C++)if(this.angles[C]!=null){this.angles[h]=this.angles[C];break}}return this.angles}}(a),this.path=function(l){var h=this.PathParser;h.reset();var C=new n.BoundingBox;for(l!=null&&l.beginPath();!h.isEnd();)switch(h.nextCommand(),h.command){case"M":case"m":var x=h.getAsCurrentPoint();for(h.addMarker(x),C.addPoint(x.x,x.y),l!=null&&l.moveTo(x.x,x.y),h.start=h.current;!h.isCommandOrEnd();){var x=h.getAsCurrentPoint();h.addMarker(x,h.start),C.addPoint(x.x,x.y),l!=null&&l.lineTo(x.x,x.y)}break;case"L":case"l":for(;!h.isCommandOrEnd();){var d=h.current,x=h.getAsCurrentPoint();h.addMarker(x,d),C.addPoint(x.x,x.y),l!=null&&l.lineTo(x.x,x.y)}break;case"H":case"h":for(;!h.isCommandOrEnd();){var m=new n.Point((h.isRelativeCommand()?h.current.x:0)+h.getScalar(),h.current.y);h.addMarker(m,h.current),h.current=m,C.addPoint(h.current.x,h.current.y),l!=null&&l.lineTo(h.current.x,h.current.y)}break;case"V":case"v":for(;!h.isCommandOrEnd();){var m=new n.Point(h.current.x,(h.isRelativeCommand()?h.current.y:0)+h.getScalar());h.addMarker(m,h.current),h.current=m,C.addPoint(h.current.x,h.current.y),l!=null&&l.lineTo(h.current.x,h.current.y)}break;case"C":case"c":for(;!h.isCommandOrEnd();){var f=h.current,c=h.getPoint(),v=h.getAsControlPoint(),g=h.getAsCurrentPoint();h.addMarker(g,v,c),C.addBezierCurve(f.x,f.y,c.x,c.y,v.x,v.y,g.x,g.y),l!=null&&l.bezierCurveTo(c.x,c.y,v.x,v.y,g.x,g.y)}break;case"S":case"s":for(;!h.isCommandOrEnd();){var f=h.current,c=h.getReflectedControlPoint(),v=h.getAsControlPoint(),g=h.getAsCurrentPoint();h.addMarker(g,v,c),C.addBezierCurve(f.x,f.y,c.x,c.y,v.x,v.y,g.x,g.y),l!=null&&l.bezierCurveTo(c.x,c.y,v.x,v.y,g.x,g.y)}break;case"Q":case"q":for(;!h.isCommandOrEnd();){var f=h.current,v=h.getAsControlPoint(),g=h.getAsCurrentPoint();h.addMarker(g,v,v),C.addQuadraticCurve(f.x,f.y,v.x,v.y,g.x,g.y),l!=null&&l.quadraticCurveTo(v.x,v.y,g.x,g.y)}break;case"T":case"t":for(;!h.isCommandOrEnd();){var f=h.current,v=h.getReflectedControlPoint();h.control=v;var g=h.getAsCurrentPoint();h.addMarker(g,v,v),C.addQuadraticCurve(f.x,f.y,v.x,v.y,g.x,g.y),l!=null&&l.quadraticCurveTo(v.x,v.y,g.x,g.y)}break;case"A":case"a":for(;!h.isCommandOrEnd();){var f=h.current,k=h.getScalar(),E=h.getScalar(),A=h.getScalar()*(Math.PI/180),M=h.getScalar(),S=h.getScalar(),g=h.getAsCurrentPoint(),N=new n.Point(Math.cos(A)*(f.x-g.x)/2+Math.sin(A)*(f.y-g.y)/2,-Math.sin(A)*(f.x-g.x)/2+Math.cos(A)*(f.y-g.y)/2),w=Math.pow(N.x,2)/Math.pow(k,2)+Math.pow(N.y,2)/Math.pow(E,2);w>1&&(k*=Math.sqrt(w),E*=Math.sqrt(w));var F=(M==S?-1:1)*Math.sqrt((Math.pow(k,2)*Math.pow(E,2)-Math.pow(k,2)*Math.pow(N.y,2)-Math.pow(E,2)*Math.pow(N.x,2))/(Math.pow(k,2)*Math.pow(N.y,2)+Math.pow(E,2)*Math.pow(N.x,2)));isNaN(F)&&(F=0);var U=new n.Point(F*k*N.y/E,F*-E*N.x/k),L=new n.Point((f.x+g.x)/2+Math.cos(A)*U.x-Math.sin(A)*U.y,(f.y+g.y)/2+Math.sin(A)*U.x+Math.cos(A)*U.y),J=function(xe){return Math.sqrt(Math.pow(xe[0],2)+Math.pow(xe[1],2))},z=function(xe,ue){return(xe[0]*ue[0]+xe[1]*ue[1])/(J(xe)*J(ue))},G=function(xe,ue){return(xe[0]*ue[1]<xe[1]*ue[0]?-1:1)*Math.acos(z(xe,ue))},ie=G([1,0],[(N.x-U.x)/k,(N.y-U.y)/E]),fe=[(N.x-U.x)/k,(N.y-U.y)/E],de=[(-N.x-U.x)/k,(-N.y-U.y)/E],le=G(fe,de);z(fe,de)<=-1&&(le=Math.PI),z(fe,de)>=1&&(le=0);var he=1-S?1:-1,Pe=ie+he*(le/2),$=new n.Point(L.x+k*Math.cos(Pe),L.y+E*Math.sin(Pe));if(h.addMarkerAngle($,Pe-he*Math.PI/2),h.addMarkerAngle(g,Pe-he*Math.PI),C.addPoint(g.x,g.y),l!=null){var z=k>E?k:E,oe=k>E?1:k/E,ee=k>E?E/k:1;l.translate(L.x,L.y),l.rotate(A),l.scale(oe,ee),l.arc(0,0,z,ie,ie+le,1-S),l.scale(1/oe,1/ee),l.rotate(-A),l.translate(-L.x,-L.y)}}break;case"Z":case"z":l!=null&&l.closePath(),h.current=h.start}return C},this.getMarkers=function(){for(var l=this.PathParser.getMarkerPoints(),h=this.PathParser.getMarkerAngles(),C=[],x=0;x<l.length;x++)C.push([l[x],h[x]]);return C}},n.Element.path.prototype=new n.Element.PathElementBase,n.Element.pattern=function(y){this.base=n.Element.ElementBase,this.base(y),this.createPattern=function(a,l){var h=this.attribute("width").toPixels("x",!0),C=this.attribute("height").toPixels("y",!0),x=new n.Element.svg;x.attributes.viewBox=new n.Property("viewBox",this.attribute("viewBox").value),x.attributes.width=new n.Property("width",h+"px"),x.attributes.height=new n.Property("height",C+"px"),x.attributes.transform=new n.Property("transform",this.attribute("patternTransform").value),x.children=this.children;var d=document.createElement("canvas");d.width=h,d.height=C;var m=d.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&m.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var f=-1;f<=1;f++)for(var c=-1;c<=1;c++)m.save(),m.translate(f*d.width,c*d.height),x.render(m),m.restore();var v=a.createPattern(d,"repeat");return v}},n.Element.pattern.prototype=new n.Element.ElementBase,n.Element.marker=function(y){this.base=n.Element.ElementBase,this.base(y),this.baseRender=this.render,this.render=function(a,l,h){a.translate(l.x,l.y),this.attribute("orient").valueOrDefault("auto")=="auto"&&a.rotate(h),this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth"&&a.scale(a.lineWidth,a.lineWidth),a.save();var C=new n.Element.svg;C.attributes.viewBox=new n.Property("viewBox",this.attribute("viewBox").value),C.attributes.refX=new n.Property("refX",this.attribute("refX").value),C.attributes.refY=new n.Property("refY",this.attribute("refY").value),C.attributes.width=new n.Property("width",this.attribute("markerWidth").value),C.attributes.height=new n.Property("height",this.attribute("markerHeight").value),C.attributes.fill=new n.Property("fill",this.attribute("fill").valueOrDefault("black")),C.attributes.stroke=new n.Property("stroke",this.attribute("stroke").valueOrDefault("none")),C.children=this.children,C.render(a),a.restore(),this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth"&&a.scale(1/a.lineWidth,1/a.lineWidth),this.attribute("orient").valueOrDefault("auto")=="auto"&&a.rotate(-h),a.translate(-l.x,-l.y)}},n.Element.marker.prototype=new n.Element.ElementBase,n.Element.defs=function(y){this.base=n.Element.ElementBase,this.base(y),this.render=function(a){}},n.Element.defs.prototype=new n.Element.ElementBase,n.Element.GradientBase=function(y){this.base=n.Element.ElementBase,this.base(y),this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox"),this.stops=[];for(var a=0;a<this.children.length;a++){var l=this.children[a];l.type=="stop"&&this.stops.push(l)}this.getGradient=function(){},this.createGradient=function(h,C,x){var d=this;this.getHrefAttribute().hasValue()&&(d=this.getHrefAttribute().getDefinition());var m=function(S){if(x.hasValue()){var N=new n.Property("color",S);return N.addOpacity(x.value).value}return S},f=this.getGradient(h,C);if(f==null)return m(d.stops[d.stops.length-1].color);for(var c=0;c<d.stops.length;c++)f.addColorStop(d.stops[c].offset,m(d.stops[c].color));if(this.attribute("gradientTransform").hasValue()){var v=n.ViewPort.viewPorts[0],g=new n.Element.rect;g.attributes.x=new n.Property("x",-n.MAX_VIRTUAL_PIXELS/3),g.attributes.y=new n.Property("y",-n.MAX_VIRTUAL_PIXELS/3),g.attributes.width=new n.Property("width",n.MAX_VIRTUAL_PIXELS),g.attributes.height=new n.Property("height",n.MAX_VIRTUAL_PIXELS);var k=new n.Element.g;k.attributes.transform=new n.Property("transform",this.attribute("gradientTransform").value),k.children=[g];var E=new n.Element.svg;E.attributes.x=new n.Property("x",0),E.attributes.y=new n.Property("y",0),E.attributes.width=new n.Property("width",v.width),E.attributes.height=new n.Property("height",v.height),E.children=[k];var A=document.createElement("canvas");A.width=v.width,A.height=v.height;var M=A.getContext("2d");return M.fillStyle=f,E.render(M),M.createPattern(A,"no-repeat")}return f}},n.Element.GradientBase.prototype=new n.Element.ElementBase,n.Element.linearGradient=function(y){this.base=n.Element.GradientBase,this.base(y),this.getGradient=function(a,l){var h=l.getBoundingBox();!this.attribute("x1").hasValue()&&!this.attribute("y1").hasValue()&&!this.attribute("x2").hasValue()&&!this.attribute("y2").hasValue()&&(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var C=this.gradientUnits=="objectBoundingBox"?h.x()+h.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),x=this.gradientUnits=="objectBoundingBox"?h.y()+h.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),d=this.gradientUnits=="objectBoundingBox"?h.x()+h.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),m=this.gradientUnits=="objectBoundingBox"?h.y()+h.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return C==d&&x==m?null:a.createLinearGradient(C,x,d,m)}},n.Element.linearGradient.prototype=new n.Element.GradientBase,n.Element.radialGradient=function(y){this.base=n.Element.GradientBase,this.base(y),this.getGradient=function(a,l){var h=l.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var C=this.gradientUnits=="objectBoundingBox"?h.x()+h.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),x=this.gradientUnits=="objectBoundingBox"?h.y()+h.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),d=C,m=x;this.attribute("fx").hasValue()&&(d=this.gradientUnits=="objectBoundingBox"?h.x()+h.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(m=this.gradientUnits=="objectBoundingBox"?h.y()+h.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var f=this.gradientUnits=="objectBoundingBox"?(h.width()+h.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return a.createRadialGradient(d,m,0,C,x,f)}},n.Element.radialGradient.prototype=new n.Element.GradientBase,n.Element.stop=function(y){this.base=n.Element.ElementBase,this.base(y),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var a=this.style("stop-color");this.style("stop-opacity").hasValue()&&(a=a.addOpacity(this.style("stop-opacity").value)),this.color=a.value},n.Element.stop.prototype=new n.Element.ElementBase,n.Element.AnimateBase=function(y){this.base=n.Element.ElementBase,this.base(y),n.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var a=this.attribute("attributeType").value,l=this.attribute("attributeName").value;return a=="CSS"?this.parent.style(l,!0):this.parent.attribute(l,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(a){if(this.initialValue==null&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration)if(this.attribute("repeatCount").value=="indefinite"||this.attribute("repeatDur").value=="indefinite")this.duration=0;else return this.attribute("fill").valueOrDefault("remove")=="remove"&&!this.removed?(this.removed=!0,this.getProperty().value=this.initialValue,!0):!1;this.duration=this.duration+a;var l=!1;if(this.begin<this.duration){var h=this.calcValue();if(this.attribute("type").hasValue()){var C=this.attribute("type").value;h=C+"("+h+")"}this.getProperty().value=h,l=!0}return l},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var a={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var l=a.progress*(this.values.value.length-1),h=Math.floor(l),C=Math.ceil(l);a.from=new n.Property("from",parseFloat(this.values.value[h])),a.to=new n.Property("to",parseFloat(this.values.value[C])),a.progress=(l-h)/(C-h)}else a.from=this.from,a.to=this.to;return a}},n.Element.AnimateBase.prototype=new n.Element.ElementBase,n.Element.animate=function(y){this.base=n.Element.AnimateBase,this.base(y),this.calcValue=function(){var a=this.progress(),l=a.from.numValue()+(a.to.numValue()-a.from.numValue())*a.progress;return l+this.initialUnits}},n.Element.animate.prototype=new n.Element.AnimateBase,n.Element.animateColor=function(y){this.base=n.Element.AnimateBase,this.base(y),this.calcValue=function(){var a=this.progress(),l=new Ve(a.from.value),h=new Ve(a.to.value);if(l.ok&&h.ok){var C=l.r+(h.r-l.r)*a.progress,x=l.g+(h.g-l.g)*a.progress,d=l.b+(h.b-l.b)*a.progress;return"rgb("+parseInt(C,10)+","+parseInt(x,10)+","+parseInt(d,10)+")"}return this.attribute("from").value}},n.Element.animateColor.prototype=new n.Element.AnimateBase,n.Element.animateTransform=function(y){this.base=n.Element.AnimateBase,this.base(y),this.calcValue=function(){for(var a=this.progress(),l=n.ToNumberArray(a.from.value),h=n.ToNumberArray(a.to.value),C="",x=0;x<l.length;x++)C+=l[x]+(h[x]-l[x])*a.progress+" ";return C}},n.Element.animateTransform.prototype=new n.Element.animate,n.Element.font=function(y){this.base=n.Element.ElementBase,this.base(y),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var a=0;a<this.children.length;a++){var l=this.children[a];l.type=="font-face"?(this.fontFace=l,l.style("font-family").hasValue()&&(n.Definitions[l.style("font-family").value]=this)):l.type=="missing-glyph"?this.missingGlyph=l:l.type=="glyph"&&(l.arabicForm!=""?(this.isRTL=!0,this.isArabic=!0,typeof this.glyphs[l.unicode]=="undefined"&&(this.glyphs[l.unicode]=[]),this.glyphs[l.unicode][l.arabicForm]=l):this.glyphs[l.unicode]=l)}},n.Element.font.prototype=new n.Element.ElementBase,n.Element.fontface=function(y){this.base=n.Element.ElementBase,this.base(y),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},n.Element.fontface.prototype=new n.Element.ElementBase,n.Element.missingglyph=function(y){this.base=n.Element.path,this.base(y),this.horizAdvX=0},n.Element.missingglyph.prototype=new n.Element.path,n.Element.glyph=function(y){this.base=n.Element.path,this.base(y),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},n.Element.glyph.prototype=new n.Element.path,n.Element.text=function(y){this.captureTextNodes=!0,this.base=n.Element.RenderedElementBase,this.base(y),this.baseSetContext=this.setContext,this.setContext=function(a){this.baseSetContext(a),this.style("dominant-baseline").hasValue()&&(a.textBaseline=this.style("dominant-baseline").value),this.style("alignment-baseline").hasValue()&&(a.textBaseline=this.style("alignment-baseline").value)},this.getBoundingBox=function(){return new n.BoundingBox(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"),0,0)},this.renderChildren=function(a){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.x+=this.getAnchorDelta(a,this,0);for(var l=0;l<this.children.length;l++)this.renderChild(a,this,l)},this.getAnchorDelta=function(a,l,h){var C=this.style("text-anchor").valueOrDefault("start");if(C!="start"){for(var x=0,d=h;d<l.children.length;d++){var m=l.children[d];if(d>h&&m.attribute("x").hasValue())break;x+=m.measureTextRecursive(a)}return-1*(C=="end"?x:x/2)}return 0},this.renderChild=function(a,l,h){var C=l.children[h];C.attribute("x").hasValue()?C.x=C.attribute("x").toPixels("x")+this.getAnchorDelta(a,l,h):(this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),C.attribute("dx").hasValue()&&(this.x+=C.attribute("dx").toPixels("x")),C.x=this.x),this.x=C.x+C.measureText(a),C.attribute("y").hasValue()?C.y=C.attribute("y").toPixels("y"):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),C.attribute("dy").hasValue()&&(this.y+=C.attribute("dy").toPixels("y")),C.y=this.y),this.y=C.y,C.render(a);for(var h=0;h<C.children.length;h++)this.renderChild(a,C,h)}},n.Element.text.prototype=new n.Element.RenderedElementBase,n.Element.TextElementBase=function(y){this.base=n.Element.RenderedElementBase,this.base(y),this.getGlyph=function(a,l,h){var C=l[h],x=null;if(a.isArabic){var d="isolated";(h==0||l[h-1]==" ")&&h<l.length-2&&l[h+1]!=" "&&(d="terminal"),h>0&&l[h-1]!=" "&&h<l.length-2&&l[h+1]!=" "&&(d="medial"),h>0&&l[h-1]!=" "&&(h==l.length-1||l[h+1]==" ")&&(d="initial"),typeof a.glyphs[C]!="undefined"&&(x=a.glyphs[C][d],x==null&&a.glyphs[C].type=="glyph"&&(x=a.glyphs[C]))}else x=a.glyphs[C];return x==null&&(x=a.missingGlyph),x},this.renderChildren=function(a){var l=this.parent.style("font-family").getDefinition();if(l!=null){var h=this.parent.style("font-size").numValueOrDefault(n.Font.Parse(n.ctx.font).fontSize),C=this.parent.style("font-style").valueOrDefault(n.Font.Parse(n.ctx.font).fontStyle),x=this.getText();l.isRTL&&(x=x.split("").reverse().join(""));for(var d=n.ToNumberArray(this.parent.attribute("dx").value),m=0;m<x.length;m++){var f=this.getGlyph(l,x,m),c=h/l.fontFace.unitsPerEm;a.translate(this.x,this.y),a.scale(c,-c);var v=a.lineWidth;a.lineWidth=a.lineWidth*l.fontFace.unitsPerEm/h,C=="italic"&&a.transform(1,0,.4,1,0,0),f.render(a),C=="italic"&&a.transform(1,0,-.4,1,0,0),a.lineWidth=v,a.scale(1/c,-1/c),a.translate(-this.x,-this.y),this.x+=h*(f.horizAdvX||l.horizAdvX)/l.fontFace.unitsPerEm,typeof d[m]!="undefined"&&!isNaN(d[m])&&(this.x+=d[m])}return}a.fillStyle!=""&&a.fillText(n.compressSpaces(this.getText()),this.x,this.y),a.strokeStyle!=""&&a.strokeText(n.compressSpaces(this.getText()),this.x,this.y)},this.getText=function(){},this.measureTextRecursive=function(a){for(var l=this.measureText(a),h=0;h<this.children.length;h++)l+=this.children[h].measureTextRecursive(a);return l},this.measureText=function(a){var l=this.parent.style("font-family").getDefinition();if(l!=null){var h=this.parent.style("font-size").numValueOrDefault(n.Font.Parse(n.ctx.font).fontSize),C=0,x=this.getText();l.isRTL&&(x=x.split("").reverse().join(""));for(var d=n.ToNumberArray(this.parent.attribute("dx").value),m=0;m<x.length;m++){var f=this.getGlyph(l,x,m);C+=(f.horizAdvX||l.horizAdvX)*h/l.fontFace.unitsPerEm,typeof d[m]!="undefined"&&!isNaN(d[m])&&(C+=d[m])}return C}var c=n.compressSpaces(this.getText());if(!a.measureText)return c.length*10;a.save(),this.setContext(a);var v=a.measureText(c).width;return a.restore(),v}},n.Element.TextElementBase.prototype=new n.Element.RenderedElementBase,n.Element.tspan=function(y){this.captureTextNodes=!0,this.base=n.Element.TextElementBase,this.base(y),this.text=y.nodeValue||y.text||"",this.getText=function(){return this.text}},n.Element.tspan.prototype=new n.Element.TextElementBase,n.Element.tref=function(y){this.base=n.Element.TextElementBase,this.base(y),this.getText=function(){var a=this.getHrefAttribute().getDefinition();if(a!=null)return a.children[0].getText()}},n.Element.tref.prototype=new n.Element.TextElementBase,n.Element.a=function(y){this.base=n.Element.TextElementBase,this.base(y),this.hasText=!0;for(var a=0;a<y.childNodes.length;a++)y.childNodes[a].nodeType!=3&&(this.hasText=!1);this.text=this.hasText?y.childNodes[0].nodeValue:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(l){if(this.hasText){this.baseRenderChildren(l);var h=new n.Property("fontSize",n.Font.Parse(n.ctx.font).fontSize);n.Mouse.checkBoundingBox(this,new n.BoundingBox(this.x,this.y-h.toPixels("y"),this.x+this.measureText(l),this.y))}else{var C=new n.Element.g;C.children=this.children,C.parent=this,C.render(l)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){n.ctx.canvas.style.cursor="pointer"}},n.Element.a.prototype=new n.Element.TextElementBase,n.Element.image=function(y){this.base=n.Element.RenderedElementBase,this.base(y);var a=this.getHrefAttribute().value,l=a.match(/\.svg$/);if(n.Images.push(this),this.loaded=!1,l)this.img=n.ajax(a),this.loaded=!0;else{this.img=document.createElement("img");var h=this;this.img.onload=function(){h.loaded=!0},this.img.onerror=function(){typeof console!="undefined"&&(console.log('ERROR: image "'+a+'" not found'),h.loaded=!0)},this.img.src=a}this.renderChildren=function(C){var x=this.attribute("x").toPixels("x"),d=this.attribute("y").toPixels("y"),m=this.attribute("width").toPixels("x"),f=this.attribute("height").toPixels("y");m==0||f==0||(C.save(),l?C.drawSvg(this.img,x,d,m,f):(C.translate(x,d),n.AspectRatio(C,this.attribute("preserveAspectRatio").value,m,this.img.width,f,this.img.height,0,0),C.drawImage(this.img,0,0)),C.restore())},this.getBoundingBox=function(){var C=this.attribute("x").toPixels("x"),x=this.attribute("y").toPixels("y"),d=this.attribute("width").toPixels("x"),m=this.attribute("height").toPixels("y");return new n.BoundingBox(C,x,C+d,x+m)}},n.Element.image.prototype=new n.Element.RenderedElementBase,n.Element.g=function(y){this.base=n.Element.RenderedElementBase,this.base(y),this.getBoundingBox=function(){for(var a=new n.BoundingBox,l=0;l<this.children.length;l++)a.addBoundingBox(this.children[l].getBoundingBox());return a}},n.Element.g.prototype=new n.Element.RenderedElementBase,n.Element.symbol=function(y){this.base=n.Element.RenderedElementBase,this.base(y),this.baseSetContext=this.setContext,this.setContext=function(a){if(this.baseSetContext(a),this.attribute("viewBox").hasValue()){var l=n.ToNumberArray(this.attribute("viewBox").value),h=l[0],C=l[1];width=l[2],height=l[3],n.AspectRatio(a,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,h,C),n.ViewPort.SetCurrent(l[2],l[3])}}},n.Element.symbol.prototype=new n.Element.RenderedElementBase,n.Element.style=function(y){this.base=n.Element.ElementBase,this.base(y);for(var a="",l=0;l<y.childNodes.length;l++)a+=y.childNodes[l].nodeValue;a=a.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),a=n.compressSpaces(a);for(var h=a.split("}"),l=0;l<h.length;l++)if(n.trim(h[l])!="")for(var C=h[l].split("{"),x=C[0].split(","),d=C[1].split(";"),m=0;m<x.length;m++){var f=n.trim(x[m]);if(f!=""){for(var c={},v=0;v<d.length;v++){var g=d[v].indexOf(":"),k=d[v].substr(0,g),E=d[v].substr(g+1,d[v].length-g);k!=null&&E!=null&&(c[n.trim(k)]=new n.Property(n.trim(k),n.trim(E)))}if(n.Styles[f]=c,f=="@font-face"){for(var A=c["font-family"].value.replace(/"/g,""),M=c.src.value.split(","),S=0;S<M.length;S++)if(M[S].indexOf('format("svg")')>0)for(var N=M[S].indexOf("url"),w=M[S].indexOf(")",N),F=M[S].substr(N+5,w-N-6),U=n.parseXml(n.ajax(F)),L=U.getElementsByTagName("font"),J=0;J<L.length;J++){var z=n.CreateElement(L[J]);n.Definitions[A]=z}}}}},n.Element.style.prototype=new n.Element.ElementBase,n.Element.use=function(y){this.base=n.Element.RenderedElementBase,this.base(y),this.baseSetContext=this.setContext,this.setContext=function(a){this.baseSetContext(a),this.attribute("x").hasValue()&&a.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&a.translate(0,this.attribute("y").toPixels("y"))},this.getDefinition=function(){var a=this.getHrefAttribute().getDefinition();return this.attribute("width").hasValue()&&(a.attribute("width",!0).value=this.attribute("width").value),this.attribute("height").hasValue()&&(a.attribute("height",!0).value=this.attribute("height").value),a},this.path=function(a){var l=this.getDefinition();l!=null&&l.path(a)},this.getBoundingBox=function(){var a=this.getDefinition();if(a!=null)return a.getBoundingBox()},this.renderChildren=function(a){var l=this.getDefinition();if(l!=null){var h=l.parent;l.parent=null,l.render(a),l.parent=h}}},n.Element.use.prototype=new n.Element.RenderedElementBase,n.Element.mask=function(y){this.base=n.Element.ElementBase,this.base(y),this.apply=function(a,l){var h=this.attribute("x").toPixels("x"),C=this.attribute("y").toPixels("y"),x=this.attribute("width").toPixels("x"),d=this.attribute("height").toPixels("y");if(x==0&&d==0){for(var m=new n.BoundingBox,f=0;f<this.children.length;f++)m.addBoundingBox(this.children[f].getBoundingBox());var h=Math.floor(m.x1),C=Math.floor(m.y1),x=Math.floor(m.width()),d=Math.floor(m.height())}var c=l.attribute("mask").value;l.attribute("mask").value="";var v=document.createElement("canvas");v.width=h+x,v.height=C+d;var g=v.getContext("2d");this.renderChildren(g);var k=document.createElement("canvas");k.width=h+x,k.height=C+d;var E=k.getContext("2d");l.render(E),E.globalCompositeOperation="destination-in",E.fillStyle=g.createPattern(v,"no-repeat"),E.fillRect(0,0,h+x,C+d),a.fillStyle=E.createPattern(k,"no-repeat"),a.fillRect(0,0,h+x,C+d),l.attribute("mask").value=c},this.render=function(a){}},n.Element.mask.prototype=new n.Element.ElementBase,n.Element.clipPath=function(y){this.base=n.Element.ElementBase,this.base(y),this.apply=function(a){for(var l=0;l<this.children.length;l++){var h=this.children[l];if(typeof h.path!="undefined"){var C=null;h.attribute("transform").hasValue()&&(C=new n.Transform(h.attribute("transform").value),C.apply(a)),h.path(a),a.clip(),C&&C.unapply(a)}}},this.render=function(a){}},n.Element.clipPath.prototype=new n.Element.ElementBase,n.Element.filter=function(y){this.base=n.Element.ElementBase,this.base(y),this.apply=function(a,l){var h=l.getBoundingBox(),C=Math.floor(h.x1),x=Math.floor(h.y1),d=Math.floor(h.width()),m=Math.floor(h.height()),f=l.style("filter").value;l.style("filter").value="";for(var c=0,v=0,g=0;g<this.children.length;g++){var k=this.children[g].extraFilterDistance||0;c=Math.max(c,k),v=Math.max(v,k)}var E=document.createElement("canvas");E.width=d+2*c,E.height=m+2*v;var A=E.getContext("2d");A.translate(-C+c,-x+v),l.render(A);for(var g=0;g<this.children.length;g++)this.children[g].apply(A,0,0,d+2*c,m+2*v);a.drawImage(E,0,0,d+2*c,m+2*v,C-c,x-v,d+2*c,m+2*v),l.style("filter",!0).value=f},this.render=function(a){}},n.Element.filter.prototype=new n.Element.ElementBase,n.Element.feMorphology=function(y){this.base=n.Element.ElementBase,this.base(y),this.apply=function(a,l,h,C,x){}},n.Element.feMorphology.prototype=new n.Element.ElementBase,n.Element.feColorMatrix=function(y){this.base=n.Element.ElementBase,this.base(y);function a(h,C,x,d,m,f){return h[x*d*4+C*4+f]}function l(h,C,x,d,m,f,c){h[x*d*4+C*4+f]=c}this.apply=function(h,C,x,d,m){for(var f=h.getImageData(0,0,d,m),x=0;x<m;x++)for(var C=0;C<d;C++){var c=a(f.data,C,x,d,m,0),v=a(f.data,C,x,d,m,1),g=a(f.data,C,x,d,m,2),k=(c+v+g)/3;l(f.data,C,x,d,m,0,k),l(f.data,C,x,d,m,1,k),l(f.data,C,x,d,m,2,k)}h.clearRect(0,0,d,m),h.putImageData(f,0,0)}},n.Element.feColorMatrix.prototype=new n.Element.ElementBase,n.Element.feGaussianBlur=function(y){this.base=n.Element.ElementBase,this.base(y),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(a,l,h,C,x){if(typeof stackBlurCanvasRGBA=="undefined"){typeof console!="undefined"&&console.log("ERROR: StackBlur.js must be included for blur to work");return}a.canvas.id=n.UniqueId(),a.canvas.style.display="none",document.body.appendChild(a.canvas),stackBlurCanvasRGBA(a.canvas.id,l,h,C,x,this.blurRadius),document.body.removeChild(a.canvas)}},n.Element.feGaussianBlur.prototype=new n.Element.ElementBase,n.Element.title=function(y){},n.Element.title.prototype=new n.Element.ElementBase,n.Element.desc=function(y){},n.Element.desc.prototype=new n.Element.ElementBase,n.Element.MISSING=function(y){typeof console!="undefined"&&console.log("ERROR: Element '"+y.nodeName+"' not yet implemented.")},n.Element.MISSING.prototype=new n.Element.ElementBase,n.CreateElement=function(y){var a=y.nodeName.replace(/^[^:]+:/,"");a=a.replace(/\-/g,"");var l=null;return typeof n.Element[a]!="undefined"?l=new n.Element[a](y):l=new n.Element.MISSING(y),l.type=y.nodeName,l},n.load=function(y,a){n.loadXml(y,n.ajax(a))},n.loadXml=function(y,a){n.loadXmlDoc(y,n.parseXml(a))},n.loadXmlDoc=function(y,a){n.init(y);var l=function(m){for(var f=y.canvas;f;)m.x-=f.offsetLeft,m.y-=f.offsetTop,f=f.offsetParent;return window.scrollX&&(m.x+=window.scrollX),window.scrollY&&(m.y+=window.scrollY),m};n.opts.ignoreMouse!=!0&&(y.canvas.onclick=function(m){var f=l(new n.Point(m!=null?m.clientX:event.clientX,m!=null?m.clientY:event.clientY));n.Mouse.onclick(f.x,f.y)},y.canvas.onmousemove=function(m){var f=l(new n.Point(m!=null?m.clientX:event.clientX,m!=null?m.clientY:event.clientY));n.Mouse.onmousemove(f.x,f.y)});var h=n.CreateElement(a.documentElement);h.root=!0;var C=!0,x=function(){n.ViewPort.Clear(),y.canvas.parentNode&&n.ViewPort.SetCurrent(y.canvas.parentNode.clientWidth,y.canvas.parentNode.clientHeight),n.opts.ignoreDimensions!=!0&&(h.style("width").hasValue()&&(y.canvas.width=h.style("width").toPixels("x"),y.canvas.style.width=y.canvas.width+"px"),h.style("height").hasValue()&&(y.canvas.height=h.style("height").toPixels("y"),y.canvas.style.height=y.canvas.height+"px"));var m=y.canvas.clientWidth||y.canvas.width,f=y.canvas.clientHeight||y.canvas.height;if(n.opts.ignoreDimensions==!0&&h.style("width").hasValue()&&h.style("height").hasValue()&&(m=h.style("width").toPixels("x"),f=h.style("height").toPixels("y")),n.ViewPort.SetCurrent(m,f),n.opts.offsetX!=null&&(h.attribute("x",!0).value=n.opts.offsetX),n.opts.offsetY!=null&&(h.attribute("y",!0).value=n.opts.offsetY),n.opts.scaleWidth!=null&&n.opts.scaleHeight!=null){var c=1,v=1,g=n.ToNumberArray(h.attribute("viewBox").value);h.attribute("width").hasValue()?c=h.attribute("width").toPixels("x")/n.opts.scaleWidth:isNaN(g[2])||(c=g[2]/n.opts.scaleWidth),h.attribute("height").hasValue()?v=h.attribute("height").toPixels("y")/n.opts.scaleHeight:isNaN(g[3])||(v=g[3]/n.opts.scaleHeight),h.attribute("width",!0).value=n.opts.scaleWidth,h.attribute("height",!0).value=n.opts.scaleHeight,h.attribute("viewBox",!0).value="0 0 "+m*c+" "+f*v,h.attribute("preserveAspectRatio",!0).value="none"}n.opts.ignoreClear!=!0&&y.clearRect(0,0,m,f),h.render(y),C&&(C=!1,typeof n.opts.renderCallback=="function"&&n.opts.renderCallback(a))},d=!0;n.ImagesLoaded()&&(d=!1,x()),n.intervalID=setInterval(function(){var m=!1;if(d&&n.ImagesLoaded()&&(d=!1,m=!0),n.opts.ignoreMouse!=!0&&(m=m|n.Mouse.hasEvents()),n.opts.ignoreAnimation!=!0)for(var f=0;f<n.Animations.length;f++)m=m|n.Animations[f].update(1e3/n.FRAMERATE);typeof n.opts.forceRedraw=="function"&&n.opts.forceRedraw()==!0&&(m=!0),m&&(x(),n.Mouse.runEvents())},1e3/n.FRAMERATE)},n.stop=function(){n.intervalID&&clearInterval(n.intervalID)},n.Mouse=new function(){this.events=[],this.hasEvents=function(){return this.events.length!=0},this.onclick=function(y,a){this.events.push({type:"onclick",x:y,y:a,run:function(l){l.onclick&&l.onclick()}})},this.onmousemove=function(y,a){this.events.push({type:"onmousemove",x:y,y:a,run:function(l){l.onmousemove&&l.onmousemove()}})},this.eventElements=[],this.checkPath=function(y,a){for(var l=0;l<this.events.length;l++){var h=this.events[l];a.isPointInPath&&a.isPointInPath(h.x,h.y)&&(this.eventElements[l]=y)}},this.checkBoundingBox=function(y,a){for(var l=0;l<this.events.length;l++){var h=this.events[l];a.isPointInBox(h.x,h.y)&&(this.eventElements[l]=y)}},this.runEvents=function(){n.ctx.canvas.style.cursor="";for(var y=0;y<this.events.length;y++)for(var a=this.events[y],l=this.eventElements[y];l;)a.run(l),l=l.parent;this.events=[],this.eventElements=[]}},n}})();typeof CanvasRenderingContext2D!="undefined"&&(CanvasRenderingContext2D.prototype.drawSvg=function(t,n,y,a,l){canvg(this.canvas,t,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:n,offsetY:y,scaleWidth:a,scaleHeight:l})});angular.module("storage",[]).factory("storage",[function(){"use strict";var t={},n=!1,y=function(){},a={},l=!1,h=[],C="storage",x="storeKey",d=!1,m=function(){if(!l){l=!0;try{a=new IDBStore({dbVersion:1,storeName:C||"storage",keyPath:x,onStoreReady:function(){d=!0;var f;for(f=0;f<h.length;f+=1)h[f]()}})}catch(f){window.supportsIndexedDB=!1}}};return t.save=function(f,c,v,g){if(window.supportsIndexedDB===void 0){setTimeout(function(){t.save(f,c,v,g)},300);return}if(window.supportsIndexedDB){m();var k=function(){a.put({storeKey:f,obj:c},v||y,g||y)};d?k():h.push(k)}else setTimeout(function(){try{localStorage.setItem(f,JSON.stringify(c))}catch(E){n=n||{},n[f]=JSON.stringify(c)}v&&v()},0)},t.load=function(f,c,v){var g;if(window.supportsIndexedDB===void 0){setTimeout(function(){t.load(f,c,v)},300);return}if(window.supportsIndexedDB){if(m(),!f&&isNaN(f)||typeof c!="function")return;var k=function(){a.get(f,function(E){c(E&&E.obj)},v||y)};d?k():h.push(k)}else{if(!f&&isNaN(f)||typeof c!="function")return;setTimeout(function(){if(n)try{g=JSON.parse(n[f])}catch(E){}else try{g=JSON.parse(localStorage.getItem(f))}catch(E){}c(g)},0)}},t.remove=function(f,c,v){if(window.supportsIndexedDB===void 0){setTimeout(function(){t.remove(f,c,v)},300);return}if(window.supportsIndexedDB){m();var g=function(){a.remove(f,c||y,v||y)};d?g():h.push(g)}else n?delete localStorage[f]:delete n[f],c&&c()},t.clear=function(f,c){if(window.supportsIndexedDB===void 0){setTimeout(function(){t.clear(f,c)},300);return}window.supportsIndexedDB?(m(),a.clear(f,c||y)):setTimeout(function(){n?n={}:localStorage.clear(),f&&f()},0)},t}]);(function(){"use strict";var t={};angular.module("tmpl",[]).factory("template",["$http","$q",function(n,y){var a=function(l,h,C){var x=[],d,m,f,c,v,g=h.length,k=C.length,E={},A,M,S;for(A=new Array(g+1).join(" "),d=new Array(k+1).join(" ");l.length;){m=l.indexOf(h),S=m+g,M=l.slice(S),f=0;do f=M.indexOf(C),c=M.indexOf(h),c!==-1&&(M=M.slice(0,c)+A+M.slice(c+g)),M=M.slice(0,f)+d+M.slice(f+k);while(c!==-1&&c<f);if(f+=S,f>m&&m!==-1)S=l.slice(0,m),S&&x.push(S),S=l.slice(m+g,f),S&&(x.push(""),E[S]||(E[S]=[]),E[S].push(x.length-1)),l=l.slice(f+k);else{x.push(l);break}}for(v in E)S=v.indexOf(h),E.hasOwnProperty(v)&&S!==-1&&(m=v.search(/\s/),m!==-1&&(S=Math.min(S,m)),S=v.slice(0,S),E[S]={str:v.slice(S.length).replace(/^\n/,""),opening:h,closing:C,idxArray:E[v]},delete E[v]);return{stringArray:x,map:E}};return function l(h){var C="}}",x="{{",d,m="tmpl/",f={};return f.config=function(c){return typeof c.opening=="string"&&c.opening.length>0&&(x=c.opening),typeof c.closing=="string"&&c.closing.length>0&&(C=c.closing),typeof c.tmplDir=="string"&&(m=c.tmplDir),this},f.set=function(c){return d=a(c,x,C),this},f.get=function(c){var v=y.defer(),g=c.replace(/\.tmpl$/,"");return t.hasOwnProperty(g)?v.resolve(t[g]):n.get(m+g+".tmpl",{transformResponse:!1}).then(function(k){t[g]=f.set(k.data),v.resolve(t[g])}),v.promise},f.fillup=function(c){var v,g,k,E,A,M,S=d.map,N,w=d.stringArray;for(E in c)if(S.hasOwnProperty(E)){if(S[E].fillup||S[E].str){if(S[E].str&&(v=S[E].idxArray,S[E]=l(S[E].str,S[E].opening,S[E].closing),S[E].idxArray=v),M=c[E].length,N="",c[E]){for(k=0;k<M;k+=1)N+=S[E].fillup(c[E][k]);M||(N=S[E].fillup(c[E]))}v=S[E].idxArray}else N=c[E],v=S[E];for(g=0,A=v.length;g<A;g+=1)w[v[g]]=N}return w.join("")},h&&f.set(h),f}}])})();(function(){"use strict";angular.module("color",[]).factory("color",[function(){var t={x:.9505,y:1,z:1.089};function n(d){var m=1-d.k;return{r:Math.round(255*(1-d.c)*m),g:Math.round(255*(1-d.m)*m),b:Math.round(255*(1-d.y)*m)}}function y(d){var m,f=d.h,c=d.s/100,v=d.l/100,g,k,E,A,M,S;return m=(1-Math.abs(2*v-1))*c,f=f%360,A=f/60,S=m*(1-Math.abs(A%2-1)),A>=0&&A<1?(g=m,k=S,E=0):A>=1&&A<2?(g=S,k=m,E=0):A>=2&&A<3?(g=0,k=m,E=S):A>=3&&A<4?(g=0,k=S,E=m):A>=4&&A<5?(g=S,k=0,E=m):A>=5&&A<6&&(g=m,k=0,E=S),M=v-m/2,{r:Math.round((g+M)*255),g:Math.round((k+M)*255),b:Math.round((E+M)*255)}}function a(d){var m=d.r/255,f=d.g/255,c=d.b/255,v={},g=Math.max(m,f,c),k=Math.min(m,f,c),E=g-k,A;return E===0?A=0:g===m?A=(f-c)/E%6:g===f?A=(c-m)/E+2:g===c&&(A=(m-f)/E+4),v.h=60*A,v.h<0&&(v.h+=360),v.l=(g+k)/2,v.l===0||v.l===1?v.s=0:v.s=E/(1-Math.abs(2*v.l-1)),v.h=Math.round(v.h),v.s=Math.round(v.s*100),v.l=Math.round(v.l*100),v}function l(d){var m,f=[],c=d.r/255,v=d.g/255,g=d.b/255,k=[c,v,g];for(m=0;m<3;m+=1)k[m]<=.04045?f[m]=k[m]/12.92:f[m]=Math.pow((k[m]+.055)/1.055,2.4);return{x:.4124*f[0]+.3576*f[1]+.1805*f[2],y:.2126*f[0]+.7152*f[1]+.0722*f[2],z:.0193*f[0]+.1192*f[1]+.9505*f[2]}}function h(d){var m,f,c;function v(g){var k=.20689655172413793;return g>k*k*k?Math.pow(g,1/3):1/3*(29/6)*(29/6)*g+4/29}return d=l(d),m=v(d.x/t.x),f=v(d.y/t.y),c=v(d.z/t.z),{l:116*f-16,a:500*(m-f),b:200*(f-c)}}function C(d){var m=d.r+", "+d.g+", "+d.b;return d.a!==1?m="rgba("+m+", "+d.a:m="rgb("+m,m+=")",m}function x(d){var m,f,c,v,g,k;if(Array.isArray(d)&&d.length>=3)return g=Number(d[0])||0,v=Number(d[1])||0,c=Number(d[2])||0,m=Number(d[3])||1,{r:g,g:v,b:c,a:m};if(d&&d.r!==void 0&&d.g!==void 0&&d.b!==void 0){var E=!1;return d.r<=1&&d.g<=1&&d.b<=1&&(E=!0),(d.r%1!==0&&d.r<1||E)&&(d.r=Math.round(d.r*255)),(d.g%1!==0&&d.g<1||E)&&(d.g=Math.round(d.g*255)),(d.b%1!==0&&d.b<1||E)&&(d.b=Math.round(d.b*255)),{r:Number(d.r),g:Number(d.g),b:Number(d.b),a:Number(d.a)||1}}if(d&&d.c!==void 0&&d.m!==void 0&&d.y!==void 0&&d.k!==void 0)return k=n(d),k.a=d.a||1,k;if(d&&d.h!==void 0&&d.s!==void 0&&d.l!==void 0)return d.h=Number(d.h),d.s=Number(d.s),d.l=Number(d.l),k=y(d),k.a=Number(d.a)||1,k;if(typeof d=="number"){for(d=Math.round(d).toString(16);d.length<6;)d="0"+d;d="#"+d}if(typeof d=="string"){if(d=d.replace(/\s+/g,""),f=d.match(/#([\da-f])([\da-f])([\da-f])$/i),f)return g=parseInt(f[1]+f[1],16),v=parseInt(f[2]+f[2],16),c=parseInt(f[3]+f[3],16),{r:g,g:v,b:c,a:1};if(f=d.match(/#([\da-f]{2})([\da-f]{2})([\da-f]{2})/i),f)return g=parseInt(f[1],16),v=parseInt(f[2],16),c=parseInt(f[3],16),{r:g,g:v,b:c,a:1};if(f=d.match(/rgb\((\d+),(\d+),(\d+)\)/i),f)return g=parseInt(f[1],10),v=parseInt(f[2],10),c=parseInt(f[3],10),{r:g,g:v,b:c,a:1};if(f=d.match(/rgba\((\d+),(\d+),(\d+),(.*)\)/i),f)return g=parseInt(f[1],10),v=parseInt(f[2],10),c=parseInt(f[3],10),m=Number(f[4]),isNaN(m)&&(m=1),{r:g,g:v,b:c,a:m}}return{r:0,g:0,b:0,a:1}}return function(m){var f=x(m);return f.toString=function(c){var v=["",""],g;if(c&&c.hex&&(isNaN(f.a)||f.a===1||c.argb)){for(g=f.toNumber().toString(16);g.length<6;)g="0"+g;return c.argb&&(v=Math.round(f.a*255).toString(16)),v[0]===v[1]&&g[0]===g[1]&&g[2]===g[3]&&g[4]===g[5]?g=v[0]+g[0]+g[2]+g[4]:g=v[0]+v[1]+g,c.forCSS&&(g="#"+g),g}else return C(f)},f.toArray=function(){return[f.r,f.g,f.b,f.a]},f.toHSL=function(){return a(f)},f.toLAB=function(){return h(f)},f.toNumber=function(){return f.r*256*256+f.g*256+f.b},f.equals=function(c){return f.r===c.r&&f.g===c.g&&f.b===c.b},f.distance=function(c,v){var g,k;return g=h(f),typeof f.a=="number"&&f.a<1&&f.a>0&&(g.l*=f.a,g.a*=f.a,g.b*=f.a),k=h(c),typeof c.a=="number"&&c.a<1&&c.a>0&&(k.l*=c.a,k.a*=c.a,k.b*=c.a),v=v||{},isNaN(v.l)&&(v.l=1),isNaN(v.a)&&(v.a=1),isNaN(v.b)&&(v.b=1),Math.sqrt(v.l*Math.pow(g.l-k.l,2)+v.a*Math.pow(g.a-k.a,2)+v.b*Math.pow(g.b-k.b,2)+Math.pow(((f.a||1)-(c.a||1))*100,2))},f}}])})();(function(){"use strict";angular.module("swatch",["color","svg","tmpl"]).factory("swatch",["color","svgPath","template",function(t,n,y){var a=y(['<?xml version="1.0" encoding="utf-8"?>',"<!-- A Color Theme Generated by IcoMoon.io -->",'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">','<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{{width}}" height="{{height}}" viewBox="0 0 {{width}} {{height}}">',"{{rects",'<rect x="{{x}}" y="{{y}}" fill="{{fill}}" width="64" height="64"></rect>',"}}</svg>",""].join("\n"));function l(f){var c=[];return Array.isArray(f.colors)&&f.colors.forEach(function(v){var g=Number(v.red),k=Number(v.green),E=Number(v.blue),A=Number(v.alpha);g=isNaN(g)?Number(v.r):g,k=isNaN(k)?Number(v.g):k,E=isNaN(E)?Number(v.b):E,A=isNaN(A)?Number(v.a):A,c.push(t({r:g||0,g:k||0,b:E||0,a:A||1}))}),c}function h(f){var c,v=n(f),g=[],k=[];return c=v.getAttrs(),c.forEach(function(E){var A,M;E.fill&&(A=t(E.fill),M=A.toNumber(),k.indexOf(M)===-1&&(k.push(M),g.push(A)))}),g}function C(f){var c=new DataView(f),v=[],g,k,E,A,M,S,N,w,F,U,L,J,z;if(c.getUint32(0)!==1095976262||c.getUint32(4)!==65536)return v;for(U=c.getUint32(8),L=12,S=0;S<U&&L+6<f.byteLength;S+=1)try{if(g=c.getUint16(L),k=c.getUint32(L+2),J=c.getUint16(L+6),g===49153)M=[],v.push(M);else if(g===1){for(M||(M=[],v.push(M)),F=L+8+J*2,E=String.fromCharCode.apply(null,new Uint8Array(f,F,4)),F+=4,A=[c.getFloat32(F)],F+=4,/^(RGB|LAB)/.test(E)?w=2:w=3,N=0;N<w;N+=1)A.push(c.getFloat32(F)),F+=4;E=E.slice(0,w+1),E==="CMYK"?M.push({c:A[0],m:A[1],y:A[2],k:A[3]}):E==="RGB"?M.push({r:Math.round(A[0]*255),g:Math.round(A[1]*255),b:Math.round(A[2]*255)}):E==="LAB"?M.push({l:A[0],a:A[1],b:A[2]}):E==="Gray"&&(z=Math.round(A[0]*255),M.push({r:z,g:z,b:z}))}else g===49154&&(M=!1);L+=k+6}catch(G){break}return v}function x(f){var c=[],v,g,k=[],E,A;f&&f.colors&&(c=f.colors);function M(S){for(var N=S.toString(16);N.length<6;)N="0"+N;return N}for(c.length<6?(E=c.length,A=1):(E=Math.ceil(Math.sqrt(c.length)),A=Math.ceil(c.length/E)),v=0;v<A;v+=1)for(g=0;g<E&&v*E+g<c.length;g+=1)k.push({y:v*64,x:g*64,fill:"#"+M(t(c[v*E+g]).toNumber())});return a.fillup({width:E*64,height:A*64,rects:k})}function d(f,c,v){var g,k,E,A,M=f.length;for(c===1?E="setUint8":(E="setUint16",c=2),g=new ArrayBuffer(M*c),k=new DataView(g),A=0;A<M;A+=1)k[E](A*c,f.charCodeAt(A),v);return g}function m(f){var c,v,g,k,E,A,M=f.colors.length+2,S=0;for(A=20+(2+f.name.length*2)+28*f.colors.length+6,c=new ArrayBuffer(A),v=new Uint8Array(c),k=new DataView(c),k.setUint32(S,1095976262),S+=4,k.setUint32(S,65536),S+=4,k.setUint32(S,M),S+=4,k.setUint16(S,49153),S+=2,k.setUint32(S,4+f.name.length*2),S+=4,k.setUint16(S,f.name.length+1),S+=2,v.set(new Uint8Array(d(f.name,2)),S),S+=2*f.name.length+2,E=0;E<f.colors.length;E+=1)k.setUint16(S,1),S+=2,k.setUint32(S,22),S+=4,k.setUint16(S,1),S+=2,k.setUint16(S,0),S+=2,k.setUint32(S,1380401696),S+=4,g=t(f.colors[E]),k.setFloat32(S,g.r/255),S+=4,k.setFloat32(S,g.g/255),S+=4,k.setFloat32(S,g.b/255),S+=4,k.setUint16(S,2),S+=2;return k.setUint16(S,49154),c}return function(c){var v={};return v.getASE=function(g){return v.colors?m({colors:v.colors,name:g&&g.name||""}):!1},v.getSVG=function(){return v.colors?x({colors:v.colors}):!1},v.setColors=function(g){Array.isArray(g)?v.colors=g:g.ase?v.colors=C(g.ase)[0]:g.svg?v.colors=h(g.svg):g.json&&(v.colors=l(g.json))},v.setColors(c),v}}])})();(function(){"use strict";angular.module("csh",["svg"]).factory("csh",[function(){var t=0;function n(C,x){var d,m=C.length,f=0,c=0,v,g=0;for(d=0;d<m;d+=1)f+=C[d].byteLength;if(!isNaN(x)&&x>0)for(;c<f;)c+=x;for(v=new Uint8Array(c||f),d=0;d<m;d+=1)v.set(new Uint8Array(C[d]),g),g+=C[d].byteLength;return v.buffer}function y(C,x,d){var m,f,c,v,g=C.length;for(x===1?c="setUint8":(c="setUint16",x=2),m=new ArrayBuffer(g*x),f=new DataView(m),v=0;v<g;v+=1)f[c](v*x,C.charCodeAt(v),d);return m}function a(C){var x=new Date,d=0,m;return x=x.getTime()+t,t+=1,x=x.toString(16),m=x+C.hashCode()+C,"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(f){var c=m[d];return d+=1,f==="y"&&(c=c.charCodeAt(0)%16,c=c&3|8,c=c.toString(16)),c})}function l(C){var x=[],d=[],m,f,c,v,g,k,E,A,M,S,N;function w(F,U){var L,J,z,G=C.viewBox.width,ie=C.viewBox.height;F.setUint16(0,2),U[1]=U[1]||U[0],U[2]=U[2]||U[1]||U[0],L=U[0],J=U[1],z=U[2],F.setInt32(2,L.y/ie*16777216),F.setInt32(6,L.x/G*16777216),F.setInt32(10,J.y/ie*16777216),F.setInt32(14,J.x/G*16777216),F.setInt32(18,z.y/ie*16777216),F.setInt32(22,z.x/G*16777216)}return C.name=C.name||"",A=new ArrayBuffer(4),f=new DataView(A),f.setUint32(0,C.name.length+1),A=n([A,y(C.name),new ArrayBuffer(2)]),x.push(A),A.byteLength%4!==0&&x.push(new ArrayBuffer(2)),S=new ArrayBuffer(4),f=new DataView(S),f.setUint32(0,1),x.push(S),E=new ArrayBuffer(4),x.push(E),k=C.getPSPaths(),N=a(JSON.stringify(k).match(/\d/g).join("")),d.push(new Uint8Array([N.length]).buffer),d.push(y(N,1)),m=new ArrayBuffer(16),f=new DataView(m),f.setInt32(8,C.viewBox.height),f.setInt32(12,C.viewBox.width),d.push(m),g=new ArrayBuffer(26),f=new DataView(g),f.setUint16(0,6),d.push(g),g=new ArrayBuffer(26),f=new DataView(g),f.setUint16(0,8),d.push(g),k.forEach(function(F){c=new ArrayBuffer(26),f=new DataView(c),f.setUint16(2,F.length),d.push(c),F.forEach(function(U){g=new ArrayBuffer(26),f=new DataView(g),w(f,U),d.push(g)})}),M=n(d),f=new DataView(E),v=4-M.byteLength%4,f.setUint32(0,M.byteLength+v),x.push(M),x.push(new ArrayBuffer(v)),n(x)}function h(C){var x=[],d,m;return x.push(y("cush",1)),m=new ArrayBuffer(8),d=new DataView(m),d.setUint32(0,2),d.setUint32(4,C.length),x.push(m),C.forEach(function(f){x.push(l(f))}),x.push(y("\nGenerated by IcoMoon.io",1)),n(x)}return function(C){var x=Object.create(null);return x.generateCSH=function(){return h(C)},x}}])})();angular.element.prototype.is||(angular.element.prototype.is=function(t){var n,y,a=t.split(/[,\s]+/);try{y=this[0].tagName.toUpperCase()}catch(l){return!1}for(n=0;n<a.length;n+=1)if(a[n].toUpperCase()===this[0].tagName.toUpperCase())return!0;return!1});angular.element2||(angular.element2=function(t){typeof t=="string"&&(t=t.trim()),t=angular.element(t);var n;for(n=0;n<t.length;n+=1)if(t[n].nodeType===1)return angular.element(t[n]);return t});angular.module("svg",["tmpl","color"]).factory("svgPath",["template","color",function(t,n){var y=200,a=angular.element2,l=function(e){return Object.prototype.toString.call(e)==="[object Array]"};function h(e,r,s){return{x:e.x+(r.x-e.x)*s,y:e.y+(r.y-e.y)*s}}function C(e,r){var s=function(o,u,p){var b=o[0][u],P=o[1][u],O=o[2][u],B=1-p;return B*B*b+2*B*p*P+p*p*O};return{x:s(e,"x",r),y:s(e,"y",r)}}function x(e,r){var s=function(o,u,p){var b=o[0][u],P=o[1][u],O=o[2][u],B=o[3][u],I=1-p;return I*I*I*b+3*I*I*p*P+3*p*p*I*O+p*p*p*B};return{x:s(e,"x",r),y:s(e,"y",r)}}function d(e,r){return{x:2*r.x-e.x,y:2*r.y-e.y}}function m(e,r){var s,o,u,p,b,P,O,B,I;if(!(!r||!e))if(s=isNaN(r.a)?1:r.a,o=isNaN(r.b)?0:r.b,u=isNaN(r.c)?0:r.c,p=isNaN(r.d)?1:r.d,b=isNaN(r.e)?0:r.e,P=isNaN(r.f)?0:r.f,B=e.length,B){if(e[0]&&!isNaN(e[0].x)&&!isNaN(e[0].y)){for(I=[],O=0;O<B;O+=1)I[O]={},I[O].x=s*e[O].x+u*e[O].y+b,I[O].y=o*e[O].x+p*e[O].y+P;return I}else if(typeof e[0]=="number"&&B%2===0)for(O=0;O<B;O+=2)I={x:e[O],y:e[O+1]},e[O]=s*I.x+u*I.y+b,e[O+1]=o*I.x+p*I.y+P}else return{x:s*e.x+u*e.y+b,y:o*e.x+p*e.y+P}}function f(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function c(e,r){return f({x:r.x-e.x,y:r.y-e.y})}function v(e,r,s){var o,u=e.x*r.y-e.y*r.x<0?1:-1;return s>=1?s=Math.round(s)*10:s=1e4,o=(e.x*r.x+e.y*r.y)/(f(e)*f(r)),o>1?o=1:o<-1&&(o=-1),Math.round(s*u*Math.acos(o)*180/Math.PI)/s}var g=function(e,r,s,o){var u={},p=function(b,P){var O,B,I,X,R,H,K=u.points[0],j=u.points[1],Y=u.points[2],V=u.points[3];return O=h(K,j,b),B=h(j,Y,b),I=h(Y,V,b),X=h(O,B,b),R=h(B,I,b),H=h(X,R,b),P&&P.point?H:[g(K,O,X,H),g(H,R,I,V)]};return e.length?u.points=e.slice(0):(u.points=[],u.points[0]=e,u.points[1]=r,u.points[2]=s,u.points[3]=o),u.getPointAt=function(b){return p(b,{point:!0})},u.splitAt=p,u};function k(e,r){return(isNaN(r)||r<0)&&(r=3),e.toFixed(r).replace(/\.0+$/,"").replace(/(\.[^0]+)0+$/,"$1")}function E(e){return e=e.toLowerCase(),/[vh]/.test(e)?1:/[mlt]/.test(e)?2:/[sq]/.test(e)?4:/[c]/.test(e)?6:/[a]/.test(e)?7:0}function A(e){var r,s,o,u,p=[],b,P,O;if(!e)return p;for(e=e.replace(/,/g," ").replace(/-/g," -").replace(/-\s+/g,"-").replace(/e\s*/ig,"e").replace(/\.(\d+)\./g,".$1 .").replace(/\.(\d+)\./g,".$1 .").replace(/\s+/g," "),p=e.replace(/([mzlhvcsqta])\s?/ig,"|$1").split("|"),p.splice(0,1),b=p.length,o=0;o<b;o+=1){if(O=p[o],s=O[0],r=O.substr(1).trim(),r)for(r=r.split(/\s/),(s=="a"||s=="A")&&(r=M(r)),P=r.length,u=0;u<P;u+=1)r[u]=Number(r[u]);else r=[];p[o]={cmd:s,args:r}}return p}function M(e){try{for(var r=[],s;e.length>0;)e[3].length>1?e=e.slice(0,3).concat(e[3].replace(/^([01])([01]?)(.+)/,"$1 $2 $3").split(/\s+/)).concat(e.slice(4)):e[4].length>1&&(e=e.slice(0,4).concat(e[4].replace(/^([01])(.+)/,"$1 $2").split(/\s+/)).concat(e.slice(5))),r=r.concat(e.slice(0,7)),e=e.slice(7);return r}catch(o){return e}}function S(e){var r=[],s=0,o=e.length;for(s;s<o;s+=1)r.push(e[s].x),r.push(e[s].y);return r}function N(e){var r=[],s,o;if(typeof e=="string"){for(r=e.trim().split(/[\s,]+/),o=r.length,s=0;s<o;s+=1)r[s]=Number(r[s]);return r}else return e}function w(e){var r=[],s;return e=N(e),s=e.length,s=s-s%2,s>1&&(r.push({cmd:"M",args:[e[0],e[1]]}),r.push({cmd:"L",args:e.slice(2)})),r}function F(e){var r=w(e);return r.push({cmd:"Z"}),r}function U(e,r,s,o,u,p){var b=[],P,O,B=[],I,X,R,H,K,j,Y;function V(q){B.push({cmd:"L",args:q})}function Z(q){var re=[{x:H,y:j},{x:R,y:j},{x:R,y:K},{x:H,y:K}];b[q]&&(b[q].points=m(b[q].points,{e:re[q].x,f:re[q].y}),B.push({cmd:"C",args:S(b[q].points.slice(1))}))}if(e=Number(e),r=Number(r),u=Math.abs(Number(u)),p=Math.abs(Number(p)),s=Math.abs(Number(s)),o=Math.abs(Number(o)),!(s===0||o===0))return!p&&u?p=u:!u&&p?u=p:!u&&!p&&(u=p=0),Y=s/2,u/2>Y&&(u=Y),Y=o/2,p/2>Y&&(p=Y),I=s-2*u,X=o-2*p,u&&(P=e+s/2,O=r+o/2,b=ie({cx:0,cy:0,rx:u,ry:p})),R=e+u,H=R+I,K=r+p,j=K+X,B.push({cmd:"M",args:[R,r]}),I&&V([H,r]),Z(3),X&&V([H+u,j]),Z(0),I&&V([R,j+p]),Z(1),X&&V([R-u,K]),Z(2),B.push({cmd:"Z"}),B}function L(e,r,s,o){var u,p,b=[],P;if(e=Number(e),r=Number(r),s=Number(s),o=Number(o),!(s===0&&o===0)){for(u=ie({cx:e,cy:r,rx:s,ry:o}),b.push({cmd:"M",args:[e+s,r]}),P=u.length,p=0;p<P;p+=1)b.push({cmd:"C",args:S(u[p].points.slice(1))});return b.push({cmd:"Z"}),b}}function J(e){var r=!1,s,o=e.tagName.toUpperCase(),u;return e.getAttribute||(r=!0,e.getAttribute=function(p){return e[p]}),o==="PATH"?(s=A(e.getAttribute("d")),(e.style["fill-rule"]||e.getAttribute("fill-rule"))==="evenodd"&&(s.evenOdd=!0)):o==="POLYGON"?s=F(e.getAttribute("points")):o==="POLYLINE"?s=w(e.getAttribute("points")):o==="LINE"?s=w(e.getAttribute("x1")+","+e.getAttribute("y1")+","+e.getAttribute("x2")+","+e.getAttribute("y2")):o==="RECT"?s=U(e.getAttribute("x"),e.getAttribute("y"),e.getAttribute("width"),e.getAttribute("height"),e.getAttribute("rx"),e.getAttribute("ry")):o==="ELLIPSE"?s=L(e.getAttribute("cx"),e.getAttribute("cy"),e.getAttribute("rx"),e.getAttribute("ry")):o==="CIRCLE"&&(u=e.getAttribute("r"),s=L(e.getAttribute("cx"),e.getAttribute("cy"),u,u)),r&&delete e.getAttribute,s}function z(e,r){var s;return/em$/.test(e)?s=Number(e.slice(0,-2))/(r.fontSize||16):/rem$/.test(e)?s=Number(e.slice(0,-3))/(r.fontSize||16):/%$/.test(e)?r&&typeof r.width=="number"&&typeof r.height=="number"?s=Number(e.slice(0,-1))*(Math.sqrt(Math.pow(r.width,2)+Math.pow(r.height,2))/Math.sqrt(2))/100:s=Number(e.slice(0,-1)):/px$/.test(e)?s=Number(e.slice(0,-2)):/pt$/.test(e)?s=Number(e.slice(0,-2))*4/3:/cm$/.test(e)?s=Number(e.slice(0,-2))*96/2.54:/mm$/.test(e)?s=Number(e.slice(0,-2))*96/2.54/100:/in/.test(e)?s=Number(e.slice(0,-2))*96:/pc/.test(e)?s=Number(e.slice(0,-2))*16:/q/.test(e)?s=Number(e.slice(0,-2))*96/2.54/40:s=Number(e),s||0}function G(e){var r,s,o,u,p,b=[],P,O,B=!0;for(typeof e=="string"?p=A(e):(p=J(e),B=e.style.stroke,B=B&&B!=="none"&&z(e.style.strokeWidth)!==0),O=p?p.length:0,u=0;u<O;u+=1)if(s=p[u].args,o=p[u].cmd,!(/m/.test(o)&&s.length===2&&p[u+1]&&/m/.test(p[u+1])))if(r=E(o),s=s||[],s.length>r){P=0;do b.push({cmd:o,args:s.slice(P,P+r)}),P+=r,o==="m"?o="l":o==="M"&&(o="L");while(P<s.length)}else b.push({cmd:o,args:s});return de(b,{evenOdd:p&&p.evenOdd,hasStroke:B})}function ie(e){var r=e.cx,s=e.cy,o=e.rx,u=e.ry,p=e.angleDiff&&e.angleDiff>0,b=e.startAngle?e.startAngle%360:0,P=e.angleDiff?(e.angleDiff+b)%360:360,O,B,I=4*(Math.sqrt(2)-1)/3,X=I*o,R=I*u,H,K,j,Y,V=[],Z=[],q,re,te,be,we={x:r,y:s-u},ve={x:r+o,y:s},ge={x:r,y:s+u},se={x:r-o,y:s};b<0&&(b+=360),P<0&&(P+=360);function pe(Se,ne){var me=(ne-Se*90)/90;return p?me:1-me}if(H=we.x-X,K=we.x+X,j=se.y-R,Y=se.y+R,V.push([{x:we.x,y:we.y},{x:K,y:we.y},{x:ve.x,y:j},{x:ve.x,y:ve.y}]),V.push([{x:se.x,y:se.y},{x:se.x,y:j},{x:H,y:we.y},{x:we.x,y:we.y}]),V.push([{x:ge.x,y:ge.y},{x:H,y:ge.y},{x:se.x,y:Y},{x:se.x,y:se.y}]),V.push([{x:ve.x,y:ve.y},{x:ve.x,y:Y},{x:K,y:ge.y},{x:ge.x,y:ge.y}]),p){for(O=Math.floor(b/90),O>3&&(O=0),B=Math.ceil(P/90)-1,B<0&&(B=3),be=V.length,te=0;te<be;te+=1)V[te].reverse();for(te=O,O===B&&Math.abs(e.angleDiff)>90&&(Z.push(V[te]),te+=1,te>3&&(te=0));te!==B;)Z.push(V[te]),te+=1,te>3&&(te=0);Z.push(V[te])}else{for(O=Math.ceil(b/90)-1,O<0&&(O=3),B=Math.floor(P/90),B>3&&(B=0),te=O,O===B&&Math.abs(e.angleDiff)>90&&(Z.push(V[te]),te-=1,te<0&&(te=3));te!==B;)Z.push(V[te]),te-=1,te<0&&(te=3);Z.push(V[te])}for(re=1,P%90!==0&&(te=Z.length-1,q=g(Z[te]),re=pe(B,P),Z[te]=q.splitAt(re)[0].points),b%90!==0&&(q=g(Z[0]),te===0?re=pe(O,b)/re:re=pe(O,b),Z[0]=q.splitAt(re)[1].points),be=Z.length,te=0;te<be;te+=1)Z[te]=g(Z[te]);return Z}function fe(e,r){var s,o=e.x,u=e.y,p=r[5],b=r[6],P=r[3],O=r[4],B=Math.abs(r[0]),I=Math.abs(r[1]),X=B*B,R=I*I,H,K=r[2]%360*Math.PI/180,j={},Y=Math.cos(K),V=Math.sin(K),Z,q,re,te,be,we,ve,ge,se,pe,Se;function ne(me){return m(me,{a:Y,b:V,c:-V,d:Y})}if(!(o===p&&u===b)){if(!B||!I)return j.cmd="L",j.args=[p,b],j;for(P=P?1:0,O=O?1:0,Z=m({x:(o-p)/2,y:(u-b)/2},{a:Y,b:-V,c:V,d:Y}),te=Z.x*Z.x,be=Z.y*Z.y,H=te/X+be/R,H>1&&(H=Math.sqrt(H),B*=H,I*=H,X=B*B,R=I*I),re=(P===O?-1:1)*Math.sqrt(Math.abs((X*R-X*be-R*te)/(X*be+R*te))),re={x:re*(B*Z.y/I),y:re*(-I*Z.x/B)},q=ne(re),q.x+=(o+p)/2,q.y+=(u+b)/2,H={x:(Z.x-re.x)/B,y:(Z.y-re.y)/I},we=v({x:1,y:0},H),ve=v(H,{x:-(Z.x+re.x)/B,y:-(Z.y+re.y)/I})%360,O===1&&ve>0?ve-=360:O===0&&ve<0&&(ve+=360),s=ie({cx:q.x,cy:q.y,rx:B,ry:I,startAngle:we,angleDiff:ve}),r=[],pe=s.length,ge=0;ge<pe;ge+=1)for(H=s[ge],Se=H.points.length,r[ge]=[],se=0;se<Se;se+=1)K&&(H.points[se]=m(H.points[se],{e:-q.x,f:-q.y}),H.points[se]=ne(H.points[se]),H.points[se]=m(H.points[se],{e:q.x,f:q.y})),se>0&&(r[ge].push(H.points[se].x),r[ge].push(H.points[se].y));return r}}function de(e,r){var s,o,u,p={x:0,y:0},b,P,O,B,I,X,R=[],H=0,K;function j(Y,V){var Z=[],q,re,te,be,we,ve,ge,se=NaN,pe;if(V=V||.001,we=Y.length,we<2)return!1;for(te=0;te<we;te+=1)be=Y[te],q=be.cmd,q==="Z"?(ve=!1,ge=!1):q==="M"?(ve={x:be.args[0],y:be.args[1]},ge=!1):q==="C"?(ve={x:be.args[4],y:be.args[5]},ge=!1):q==="S"||q==="Q"?(ve={x:be.args[2],y:be.args[3]},ge=!1):q==="T"?(ve={x:be.args[0],y:be.args[1]},ge=!1):q==="L"&&(re={x:be.args[0],y:be.args[1]},ve?(pe=(re.y-ve.y)/(re.x-ve.x),!isNaN(se)&&(pe===se||Math.abs(pe-se)<V||c(ve,re)<V)?Z.pop():ge?(ve=ge,se=(re.y-ge.y)/(re.x-ge.x)):isNaN(pe)||(se=pe)):ve=re,ge=re),q!=="L"&&(se=NaN),Z.push(be);return Z[0].cmd="M",Z}for(I=e.length,P=0;P<I;P+=1){if(u=e[P].cmd,O=/[a-z]/.test(u),u=u.toUpperCase(),s=e[P].args,o=!1,u==="Z")p=b,b=!1;else if(!b&&u!=="M"&&(b=p),u==="A")O&&(s[5]+=p.x,s[6]+=p.y),K={x:s[5],y:s[6]},s=fe(p,s),p=K,u="C",o=[K.x,K.y];else if(u==="H")O&&(s[0]+=p.x),p={x:s[0],y:p.y},s[1]=p.y,u="L";else if(u==="V")O&&(s[0]+=p.y),p={x:p.x,y:s[0]},s[0]=p.x,s[1]=p.y,u="L";else{if(u==="M")try{K=e[P+1].cmd.toUpperCase(),K==="Z"?(O?(p.x+=s[0],p.y+=s[1]):(p.x=s[0],p.y=s[1]),s=!1,P+=1):H+=1}catch(Y){}for(X=s.length,B=0;B<X;B+=2)O&&(s[B]+=p.x,s[B+1]+=p.y),(B+2)%X===0&&(p={x:s[B],y:s[B+1]})}if(u==="M"&&b&&e[P-1].cmd.toUpperCase()!=="Z"&&!r.hasStroke&&R.push({cmd:"Z",args:[]}),s&&(u!=="M"||!e[P+1]||e[P+1].cmd.toUpperCase()!=="M")){if(u==="M"&&(b=p),s[0]&&s[0].length)for(X=s.length,B=0;B<X;B+=1)R.push({cmd:u,args:s[B]});else R.push({cmd:u,args:s});o&&R.push({cmd:"L",args:o})}}return u!=="Z"&&!r.hasStroke&&R.push({cmd:"Z",args:[]}),R=j(R),r.evenOdd&&H>1?D(R):R}function le(e){var r,s={xMin:NaN,xMax:NaN,yMin:NaN,yMax:NaN},o,u,p;for(u=0,p=e.length;u<p;u+=1)r=e[u].args,o={x:r[r.length-2],y:r[r.length-1]},!isNaN(o.x)&&!isNaN(o.y)&&(s.xMin=s.xMin<o.x?s.xMin:o.x,s.xMax=s.xMax>o.x?s.xMax:o.x,s.yMin=s.yMin<o.y?s.yMin:o.y,s.yMax=s.yMax>o.y?s.yMax:o.y);return s}function he(e,r,s,o){var u=function(se,pe){return{x:(se.x+pe.x)/2,y:(se.y+pe.y)/2}},p=u(e,r),b=u(s,o),P=h(e,r,.75),O=h(o,s,.75),B=(o.x-e.x)/16,I=(o.y-e.y)/16,X,R,H,K,j,Y,V,Z,q,re,te,be,we,ve,ge;return Y=u(P,O),P.offCurve=!0,O.offCurve=!0,Z=[e,P,Y],q=[Y,O,o],re=[e,p,P,Y],te=[Y,O,b,o],X=h(e,r,3/8),R=h(P,O,3/8),R.x-=B,R.y-=I,H=h(O,P,3/8),H.x+=B,H.y+=I,K=h(o,s,3/8),j=u(X,R),V=u(H,K),X.offCurve=!0,R.offCurve=!0,H.offCurve=!0,K.offCurve=!0,c(x(re,.5),C(Z,.5))<10?be=[P,Y]:be=[X,j,R,Y],c(x(te,.5),C(q,.5))<10?we=[O,o]:we=[H,V,K,o],ve=be.length-1,ge=we.length-1,c(u(be[ve-1],we[0]),be[ve])<1&&be.splice(ve),be.concat(we)}function Pe(e,r){var s=[],o={x:r[0],y:r[1]},u={x:r[2],y:r[3]};return s[4]=r[2],s[5]=r[3],s[0]=e.x+2/3*(o.x-e.x),s[1]=e.y+2/3*(o.y-e.y),s[2]=u.x+2/3*(o.x-u.x),s[3]=u.y+2/3*(o.y-u.y),s}function $(e){var r,s,o={x:0,y:0},u,p,b,P,O,B;for(e=e.slice(0),b=e.length,u=0;u<b;u+=1)s=e[u].cmd,r=e[u].args,s==="M"||s==="L"?o={x:r[0],y:r[1]}:s==="Z"&&(o={x:0,y:0}),s==="C"?(P={x:r[2],y:r[3]},o={x:r[4],y:r[5]}):s==="S"?(B=o,P&&(B=d(P,B)),P={x:r[0],y:r[1]},e[u].args=[B.x,B.y,r[0],r[1],r[2],r[3]],e[u].cmd="C",o={x:r[2],y:r[3]}):P=!1,s==="Q"?(O={x:r[0],y:r[1]},e[u].args=Pe(o,r),e[u].cmd="C",o={x:r[2],y:r[3]}):s==="T"?(B=o,O&&(B=d(O,B)),O=B,e[u].args=Pe(o,[B.x,B.y,r[0],r[1]]),e[u].cmd="C",o={x:r[0],y:r[1]}):O=!1;for(o={x:0,y:0},u=0;u<b;u+=1)for(r=e[u].args,p=0;p<r.length;p+=2)r[p]-=o.x,r[p+1]-=o.y,o.x+=Math.round(r[p]),o.y+=Math.round(r[p+1]);return e}function oe(e){var r,s,o={x:0,y:0},u=[],p=[],b,P,O=e.length,B,I,X,R,H,K;function j(){p.length>2&&(JSON.stringify(p[0])===JSON.stringify(p[p.length-1])&&(p=p.slice(0,-1)),u.push(p)),p=[]}for(b=0;b<O;b+=1)s=e[b].cmd,r=e[b].args,P=s==="M",P||s==="L"?(P&&j(),p.push({x:r[0],y:r[1]}),o={x:r[0],y:r[1]}):s==="Z"?(o={x:0,y:0},j()):B=o,s==="C"?(I={x:r[0],y:r[1]},X={x:r[2],y:r[3]},o={x:r[4],y:r[5]},R=o,p=p.concat(he(B,I,X,R)),H=X):s==="S"?(H?I=d(H,B):I=B,X={x:r[0],y:r[1]},o={x:r[2],y:r[3]},R=o,p=p.concat(he(B,I,X,R)),H=X):H=!1,s==="Q"?(I={x:r[0],y:r[1],offCurve:!0},o={x:r[2],y:r[3]},X=o,p.push(I),p.push(X),K=I):s==="T"?(K?(I=d(K,B),I.offCurve=!0):I=B,o={x:r[0],y:r[1]},X=o,p.push(I),p.push(X),K=I):K=!1;return p.length>2&&u.push(p),u}function ee(e){var r,s,o={x:0,y:0},u={x:0,y:0},p=[],b,P,O=e.length,B,I,X,R,H,K,j=[];function Y(V,Z){var q;for(V=V.slice(0),q=0;q<V.length;q+=2)V[q]-=Z.x,V[q+1]-=Z.y;p.push(V)}for(b=0;b<O;b+=1)s=e[b].cmd,r=e[b].args,P=s==="M",P||s==="L"?(P?(p.push([r[0],r[1]]),u={x:r[0],y:r[1]}):Y(r,o),o={x:r[0],y:r[1]}):s==="Z"?(o=u,p.length>0&&(p.isClosed=!0,j.push(p)),p=[]):B=o,s==="C"?(Y(r,o),H={x:r[2],y:r[3]},o={x:r[4],y:r[5]}):s==="S"?(H?I=d(H,B):I=B,X={x:r[0],y:r[1]},R={x:r[2],y:r[3]},Y([I.x,I.y,X.x,X.y,R.x,R.y],o),H=X,o=R):H=!1,s==="Q"?(I={x:r[0],y:r[1],offCurve:!0},X={x:r[2],y:r[3]},Y(Pe(o,r),o),K=I,o=X):s==="T"?(K?(I=d(K,B),I.offCurve=!0):I=B,X={x:r[0],y:r[1]},Y(Pe(o,[I.x,I.y,X.x,X.y]),o),o=X,K=I):K=!1;return p.length&&(j.push(p),p=[]),j}function ce(e){var r,s,o={x:0,y:0},u={x:0,y:0},p,b,P=e.length,O,B,I,X,R,H,K,j=[],Y=[];for(p=0;p<P;p+=1)s=e[p].cmd,r=e[p].args,b=s==="M",b||s==="L"?(o={x:r[0],y:r[1]},H=[o,o,o],Y.push(H),b&&(u=o)):s==="Z"?(o=u,Y.length&&j.push(Y),Y=[]):O=o,s==="C"?(H[2]={x:r[0],y:r[1]},H=[{x:r[2],y:r[3]},{x:r[4],y:r[5]}],Y.push(H),R={x:r[2],y:r[3]},o={x:r[4],y:r[5]}):s==="S"?(R?B=d(R,O):B=O,I={x:r[0],y:r[1]},X={x:r[2],y:r[3]},H[2]=B,H=[I,X],Y.push(H),R=I,o=X):R=!1,s==="Q"?(B={x:r[0],y:r[1]},I={x:r[2],y:r[3]},r=Pe(o,r),H[2]={x:r[0],y:r[1]},H=[{x:r[2],y:r[3]},{x:r[4],y:r[5]}],Y.push(H),o=I,K=B):s==="T"?(K?B=d(K,O):B=O,I={x:r[0],y:r[1]},r=Pe(o,[B.x,B.y,I.x,I.y]),H[2]=B,H=[{x:r[2],y:r[3]},{x:r[4],y:r[5]}],Y.push(H),o=I,K=B):K=!1;return Y.length&&j.push(Y),j}function ye(e){var r,s,o,u,p=[],b={x:0,y:0},P={},O,B,I,X,R,H=.001,K,j,Y=[],V;for(X=e.length,O=0;O<X;O+=1){I=e[O];try{s=I.args.slice(0)}catch(Z){s=[]}if(u=I.cmd.toLowerCase(),R=s?s.length:0,R>1){if(P.x=s[R-2],P.y=s[R-1],u==="c"?(K&&(V=d(K,b),Math.abs(V.x-s[0])<H&&Math.abs(V.y-s[1])<H?(u="s",s=s.slice(2),K=V):K=!1),K||(K={x:s[2],y:s[3]}),j=!1):u==="q"?(j&&(V=d(j,b),Math.abs(V.x-s[0])<H&&Math.abs(V.y-s[1])<H?(u="t",s=s.slice(2),j=V):j=!1),j||(j={x:s[0],y:s[1]}),K=!1):u==="s"?(K=K?d(K,b):!1,j=!1):u==="t"?(j=j?d(j,b):!1,K=!1):(K=!1,j=!1),u==="m")u="M";else for(R=s.length,B=0;B<R;B+=2)s[B]-=b.x,s[B+1]-=b.y;u==="l"&&(s[0]===0?(u="v",s=[s[1]]):s[1]===0&&(u="h",s=[s[0]])),b.x=P.x,b.y=P.y}p.push({cmd:u,args:s})}for(o=[],O=0;O<X;O+=1){for(I=p[O],o.push(I),u=I.cmd,B=O+1;B<X&&p[B].cmd===u;)I.args=I.args.concat(p[B].args),B+=1;O=B-1}for(X=o.length,O=0;O<X;O+=1)for(I=o[O],Y.push(I.cmd),R=I.args?I.args.length:0,B=0;B<R;B+=1)r=I.args[B],r>=0&&B!==0?r=" "+k(r):r=k(r),Y.push(r);return Y.join("")}function xe(e){var r,s=e.length,o=[];for(r=0;r<s;r+=1)o.push(e[r].cmd),o.push(e[r].args.join(" "));return o.join("")}function ue(e){var r,s,o={x:0,y:0},u,p=e.length,b,P=[],O,B,I,X,R=[],H,K,j=[],Y,V,Z;for(e=JSON.parse(JSON.stringify(e)),u=0;u<p;u+=1)s=e[u].cmd,r=e[u].args,s==="C"?(I={x:r[2],y:r[3]},o={x:r[4],y:r[5]}):s==="S"?(Y=o,I&&(Y=d(I,Y)),I={x:r[0],y:r[1]},e[u].args=[Y.x,Y.y,r[0],r[1],r[2],r[3]],e[u].cmd="C",o={x:r[2],y:r[3]}):I=!1,s==="Q"?(X={x:r[0],y:r[1]},e[u].args=Pe(o,r),e[u].cmd="C",o={x:r[2],y:r[3]}):s==="T"?(Y=o,X&&(Y=d(X,Y)),X=Y,e[u].args=[Y.x,Y.y,r[0],r[1]],e[u].cmd="C",o={x:r[0],y:r[1]}):X=!1,j.push(e[u].cmd),j=j.concat(e[u].args);for(b=new RegExp("[MLCQZ]",""),u=0;u<j.length;u+=1)if(K=j[u],b.test(K)){if(K==="C")B=3,H=2;else if(K==="Q")B=2,H=1;else if(K==="L")B=1,H=1;else if(K==="M")B=1,H=0;else{R.push("M");continue}for(B===H&&R.push(K),O=0;O<B;O+=1)O===H&&R.push(K),V=j[++u],Z=j[++u],R.push(Z),R.push(V)}else return e;for(u=R.length-1;u>-1;u-=1)typeof R[u]=="string"?P.push({cmd:R[u],args:[]}):P[P.length-1].args.push(R[u]);return P[P.length-1].cmd="Z",P}function D(e){var r,s,o,u,p,b=0,P,O=e.length,B,I,X,R,H,K=[],j=[],Y,V,Z,q,re,te,be;function we(ge){var se,pe=[];for(se=0;se<ge.length;se+=1)pe=pe.concat(ge[se]);return pe}function ve(ge,se){var pe,Se,ne=0,me,Ae;for(pe=ge.getContext("2d").getImageData(0,0,ge.width,ge.height).data,Se=se.getContext("2d").getImageData(0,0,se.width,se.height).data,me=0,Ae=pe.length;me<Ae;me+=1)pe[me]!==Se[me]&&(ne+=1);return ne}for(u=0;u<O;u+=1){for(r=e[u].args,p=0;p<r.length;p+=2)B=typeof B=="number"?Math.max(B,r[p]):r[p],X=typeof X=="number"?Math.min(X,r[p]):r[p],I=typeof I=="number"?Math.max(I,r[p+1]):r[p+1],R=typeof R=="number"?Math.min(R,r[p+1]):r[p+1];s=e[u].cmd,(s==="Z"||s==="z")&&(K.push(e.slice(b,u+1)),b=u+1)}if(be=B-X,P=I-R,q=t(['<svg width="{{width}}" height="{{height}}" viewBox="0 0 {{width}} {{height}}">','<g transform="scale({{scale}}) translate('+-X+" "+-R+')"><path d="{{paths}}" {{attrs}}/></g>',"</svg>"].join("")),V=document.createElement("canvas"),re=document.createElement("canvas"),Z=50/P,be*=Z,P*=Z,V.width=re.width=be,V.height=re.height=P,V.width===0||V.height===0)return e;for(canvg(V,q.fillup({paths:xe(e),width:be,height:P,scale:Z,attrs:'fill-rule="evenodd"'})),u=0;u<K.length;u+=1)j.push(ue(K[u]));for(H=K.slice(0),canvg(re,q.fillup({paths:xe(we(H)),attrs:""})),o=ve(V,re),Y=o+1;o&&o<Y;)for(Y=o,u=0;u<K.length;u+=1){if(H[u]=j[u],canvg(re,q.fillup({paths:xe(we(H))})),te=ve(V,re),te===0)return we(H);te<=o?o=te:H[u]=K[u]}return we(H)}function W(e){var r,s,o,u={},p,b={},P;p=e[0].getAttribute("viewBox"),p&&(p=p.trim().split(/\s*[\,\s]\s*/),u.x=Number(p[0]),u.y=Number(p[1]),u.w=Number(p[2]),u.h=Number(p[3]));try{e[0].width.baseVal.unitType===2?P=u.w*e[0].width.baseVal.valueInSpecifiedUnits/100:P=e[0].width.baseVal.valueInSpecifiedUnits||e[0].width.baseVal.value,e[0].height.baseVal.unitType===2?o=u.h*e[0].width.baseVal.valueInSpecifiedUnits/100:o=e[0].height.baseVal.valueInSpecifiedUnits||e[0].height.baseVal.value}catch(O){try{r=e[0].getBBox(),P=r.width,o=r.height}catch(B){P=u.w,o=u.h}}if(p||(p=e.clone()[0],document.body.appendChild(p),s=p.getBoundingClientRect(),u={x:0,y:0,w:s.width,h:s.height},p.setAttribute("width",s.width),p.setAttribute("height",s.height),document.body.removeChild(p)),P=P||u.w,o=o||u.h,u.w<0||u.h<0)throw new Error("Invalid viewBox.");return P>=o&&u.w>=u.h||P<=o&&u.w>=u.h?(b.a=b.d=P/u.w,b.e=0):(P<=o&&u.w<=u.h||P>=o&&u.w<=u.h)&&(b.d=b.a=o/u.h),b.a&&(b.f=(o-b.d*u.h)/2,b.e=(P-b.a*u.w)/2,b.e-=u.x*b.a,b.f-=u.y*b.d),(isNaN(b.a)||b.a===1)&&!b.e&&!b.f&&(b=!1),{viewBox:{x:0,y:0,width:P,height:o},transform:b}}function T(e){return"matrix("+[e.a||0,e.b||0,e.c||0,e.d||0,e.e||0,e.f||0].join(" ")+")"}function _(e){var r,s,o,u,p=!1,b,P=Q(),O=0,B,I;function X(j){var Y=j.attr("transform"),V=/(\w+)\s*\(([e\d\s\.\,\-]+)\)/gm,Z=[],q=[],re,te;return Y?(Y.replace(V,function(be,we,ve){var ge,se,pe;q=ve.replace(/-/g," -").replace(/e\s*/g,"e").replace(/,/g," ").replace(/\s+/g," ").trim().split(/\s/),q.forEach(function(Se,ne){q[ne]=Number(Se)}),we=we.toLowerCase(),we==="matrix"&&q.length===6?Z.push({a:q[0],b:q[1],c:q[2],d:q[3],e:q[4],f:q[5]}):we==="scale"?(ge=q[0]||1,se=q[1]||ge,Z.push({a:ge,b:0,c:0,d:se})):we==="translate"?(ge=q[0]||0,se=q[1]||0,Z.push({a:1,b:0,c:0,d:1,e:ge,f:se})):we==="rotate"?(ge=q[0]/180*Math.PI,re=Math.cos(ge),te=Math.sin(ge),se=q[1]||0,pe=q[2]||0,se===0&&pe===0?Z.push({a:re,b:te,c:-te,d:re}):(Z.push({a:1,b:0,c:0,d:1,e:se,f:pe}),Z.push({a:re,b:te,c:-te,d:re}),Z.push({a:1,b:0,c:0,d:1,e:-se,f:-pe}))):we==="skewx"?(ge=q[0]/180*Math.PI,Z.push({a:1,b:0,c:Math.tan(ge),d:1})):we==="skewy"&&(ge=q[0]/180*Math.PI,Z.push({a:1,b:Math.tan(ge),c:0,d:1}))}),Z.reverse()):[]}function R(j,Y){var V,Z;for(V=0,Z=Y.length;V<Z;V+=1)j.transform(Y[V])}function H(j){var Y=window.getComputedStyle(j),V=["fill","fill-opacity","stroke","display","opacity","visibility","fill-rule","stroke-width","stroke-opacity","stroke-linecap","stroke-linejoin","stroke-miterlimit"],Z=[];return V.forEach(function(q){Z.push(q+":"+Y[q])}),Z.join(";")}function K(j,Y,V){var Z,q,re,te,be,we,ve,ge,se,pe,Se,ne,me,Ae,Ce,Ee,ae,Fe,ke,Be,De,Me,Ne;p&&j.attr("style",H(j[0]));try{if(j.css("opacity")==="0"||j.attr("opacity")===0)return}catch(Ue){return}if(te=j.attr("display"),be=j.css("display"),we=j.attr("fill"),ve=j.css("fill"),ge=j.attr("fill-opacity"),se=j.css("fill-opacity"),De=j.attr("visibility"),Me=j.css("visibility"),Ae=j.attr("opacity"),me=j.css("opacity"),Be=z(j.css("stroke-width")||j.attr("stroke-width"),Y&&Y.viewBox),Ce=j.css("stroke")||j.attr("stroke"),Ee=j.css("stroke-opacity")||j.attr("stroke-opacity"),ae=j.css("stroke-linecap")||j.attr("stroke-linecap"),Fe=j.css("stroke-miterlimit")||j.attr("stroke-miterlimit"),ke=j.css("stroke-linejoin")||j.attr("stroke-linejoin"),V=V||{},V=JSON.parse(JSON.stringify(V)),(we||ve)&&(ve=ve||we,V.fill=ve==="none"||ve==="transparent"||/rgba\(\d+,\s*\d+,\s*\d+,\s*0\)/.test(ve)||ge==="0"||se==="0",V.fill!==!0?(V.fill=ve||we,V.fill=V.fill.replace(/\s+/g,""),(/#000|#000000|rgb\(0,0,0\)|rgba\(0,0,0,1\)/.test(V.fill)||!V.fill)&&(V.fill="#000")):V.fill="none"),V.opacity!==!0&&(Ae||me)&&(me=Number(me||Ae)*(Number(j.css("fill-opacity")||j.attr("fill-opacity"))||1),typeof V.opacity!="number"&&(V.opacity=1),V.opacity*=me,V.opacity===0&&(V.opacity=!0)),!(te==="none"||be==="none")){if((De||Me)&&(Me=Me||De,Me==="hidden"&&(V.visibility=!0)),j.is("use")&&(Ne=j.attr("xlink:href").trim(),Ne[0]==="#"&&(Ne=B.getElementById(Ne.slice(1)),Ne&&function(){var Ue;Ne=a(Ne).clone(),Ue=W(Ne),Ne=a("<g>").append(Ne.html()||Ne[0].outerHTML),Ue&&Ue.transform&&j.attr("transform",T(Ue.transform)+" "+j.attr("transform")),Ne.attr("style",j.attr("style")),j.append(Ne),j.attr("transform",["translate(",j.attr("x")||0,",",j.attr("y")||0,") ",j.attr("transform")].join(""))}())),Be>0&&Ce!=="none"&&Ce!=="transparent"&&Ee!=="0"&&Y.viewBox&&Be*Be/(Y.viewBox.width*Y.viewBox.height)>1e-4&&(O=Math.max(O,Be),V.stroke=Ce,V.strokeLinejoin=ke,V.strokeLinecap=ae,V.strokeMiterlimit=Fe,V.strokeWidth=Be),(V.fill===void 0||V.fill==="none")&&!V.strokeWidth&&(V.fill=!0),j.is("g, use")||j.is("switch"))for(q=j.children(),pe=j[0].style["fill-rule"]||j.attr("fill-rule"),Ne=Q(),Ne.viewBox=Y.viewBox,Se=0,ne=q.length;Se<ne;Se+=1)re=a(q[Se]),pe&&!(re[0].style["fill-rule"]||re.attr("fill-rule"))&&re.attr("fill-rule",pe),K(re,Ne,V);else if(j.is("polygon, polyline, path, circle, rect, ellipse")||j.is("line")&&V.strokeWidth>0){Z={};for(Ne in V)if(V.hasOwnProperty(Ne)){if(V[Ne]===!0)return;Z[Ne]=V[Ne]}Ne=Q(j[0]),Ne.setAttrs(Z)}else if(j.is("image")||j.is("img")){Y.hasImage=!0;return}else return;R(Ne,X(j)),Y.append(Ne)}}typeof e=="string"&&(e=a(e));try{for(e.find("style")&&(p=!0,document.body.appendChild(e[0])),r=e.children(),o=e[0].style["fill-rule"]||e.attr("fill-rule"),B=e[0],I=W(e),u=0,b=r.length;u<b;u+=1)s=a(r[u]),p&&s.attr("style",H(s[0])),o&&!(s[0].style["fill-rule"]||s.attr("fill-rule"))&&s.attr("fill-rule",o),I.viewBox&&(P.viewBox=Object.create(I.viewBox)),K(s,P)}catch(j){p&&e.remove()}return p&&e.remove(),P.transform(I.transform),I.viewBox&&(P.viewBox=I.viewBox,O*O/(P.viewBox.width*P.viewBox.height)>1e-4&&(P.strokeWarning=!0)),P}function Q(e){var r=[],s={};return s.append=function(o,u){var p=!1,b,P,O,B,I=[],X,R;if(r.forEach(function(H){I.push(JSON.stringify(H))}),!o)return this;if(l(o)){for(B=o.length,P=0;P<B;P+=1)s.append(o[P],!0);return this}else typeof o!="string"&&o.length&&(o=o[0]);if(typeof o=="string"&&/<\/svg>/i.test(o)||o.tagName&&o.tagName.toLowerCase()==="svg"){for(o=_(a(o)),o.viewBox&&(s.viewBox=o.viewBox),s.hasImage=o.hasImage,o.strokeWarning&&(s.strokeWarning=!0),o=o.getPathArray(),R=s.viewBox,R={xMin:R.x,xMax:R.x+R.width,yMin:R.y,yMax:R.y+R.height},X=[],O=0;O<o.length;O+=1)b=le(o[O]),b.xMin<R.xMax&&b.xMax>R.xMin&&b.yMin<R.yMax&&b.yMax>R.yMin&&X.push(o[O]);o=X,p=!0}else o.tagName||typeof o=="string"?o=G(o):o.getPathArray?(o=o.getPathArray(),p=!0):o=!1;return o&&(u||I.indexOf(JSON.stringify(o))===-1)&&(p?r=r.concat(o):r.push(o)),function(){var H,K=[],j=[];if(r.length>y){var Y=r.reduce(function(V,Z){return Math.min(V,Z.length)},r[0].length||0);r=r.filter(function(V){return V.length>Y})}!u&&r.length>1&&r.length<=y&&(r.forEach(function(V){var Z=JSON.stringify(V)+JSON.stringify(V.attrs);H=K.indexOf(Z),H!==-1?j.splice(H,1):K.push(Z),j.push(V)}),r=j)}(),this},s.setPath=function(o){return r=[],s.append(o)},s.setAttrs=function(o,u){u=u||0,r[u]&&(r[u].attrs=o)},s.getAttrs=function(o){var u=!0,p=n([0,0,0]),b,P,O,B=r.length,I=[],X=!1,R=!1;for(O=0;O<B;O+=1)I.push(r[O].attrs||{}),o&&(I[O].fill&&I[O].fill!=="none"&&(b=n(I[O].fill),P=I[O].fill=b.toString(),u=u&&n(I[O].fill).distance(p)<14,O&&!X&&n(I[O].fill).distance(n(I[O-1].fill))>10&&!u&&(X=!0)),I[O].stroke&&I[O].stroke!=="none"&&(b=n(I[O].stroke),I[O].stroke=b.toString()),I[O].opacity===1&&delete I[O].opacity);if(o)if(!X)I=I.map(function(H){return H.fill!=="none"&&(I.fill=P),H});else for(O=0;O<B;O+=1)I[O]=I[O]||{},I[O].fill||(I[O].fill="#000"),I[O].strokeWidth>0&&!I[O].stroke&&(I[O].stroke="#000");return I},s.getPathData=function(o){var u=[],p,b;for(p=0;p<r.length;p+=1)b=ye(r[p]),u.push(b);return o?r.length>y?[u.join("")]:u:u.join("")},s.transform=function(o,u){var p=0,b,P,O=r.length;for(!isNaN(u)&&u>=0&&u<O&&(p=u,O=u+1),p;p<O;p+=1)for(b=r[p],P=0;P<b.length;P+=1)m(b[P].args,o);return s.viewBox&&(o.a&&(s.viewBox.width=Math.abs(Math.round(o.a*s.viewBox.width))),o.d&&(s.viewBox.height=Math.abs(Math.round(o.d*s.viewBox.height)))),this},s.scale=function(o,u,p){return o=Number(o),u=Number(u),!o||o===1/0?this:(s.transform({a:o,d:u||o},p),this)},s.translate=function(o,u,p){return o=Number(o),u=Number(u),isNaN(o)?this:(isNaN(u)&&(u=o),s.transform({e:o,f:u},p),this)},s.rotate=function(o,u){var p,b;return o=Number(o)/180*Math.PI,isNaN(o)?this:(p=Math.cos(o),b=Math.sin(o),s.transform({a:p,b:b,c:-b,d:p},u),this)},s.deleteSubPath=function(o){return o>=0&&o<r.length&&r.splice(o,1),this},s.moveLayer=function(o,u){var p;o>=0&&o<r.length&&(u+=u>0?1:-1,p=r.map(function(b,P){return{el:b,order:P}}),p[o].order+=u,p.sort(function(b,P){return b.order-P.order}),r=p.map(function(b){return b.el}))},s.getTTFContours=function(){var o=[],u;for(u=0;u<r.length;u+=1)o=o.concat(oe(r[u]));return o.length||(o=[[{x:0,y:0},{x:0,y:0},{x:0,y:0}]]),o},s.getCFFPath=function(){var o=[],u;for(u=0;u<r.length;u+=1)o=o.concat(r[u]);return o=$(o),o.length||(o=[{cmd:"Z",args:[]}]),o},s.getPDFSegments=function(){var o=[],u;for(u=0;u<r.length;u+=1)o.push(ee(r[u]));return o},s.getPSPaths=function(){var o=[],u;for(u=0;u<r.length;u+=1)o=o.concat(ce(r[u]));return o},s.getPathArray=function(){return r.slice(0)},s.setPath(e),s}return Q}]).factory("glyphs",["svgPath","template",function(t,n){var y=angular.element2;return function(a){var l=[],h,C,x,d,m,f,c={},v,g=Object.create(null),k,E,A,M=n(['<svg viewBox="0 0 {{width}} {{height}}" width="{{width}}" height="{{height}}">','<path d="{{d}}"></path>',"</svg>"].join("")),S;function N(F){return F=F.replace(/,[,\s]+/g,",").replace(/,$/,"").replace(/^,/,"").trim(),F.split(",")}function w(F,U,L){var J=parseInt(F.attr("horiz-adv-x"),10),z,G,ie,fe;if(U=U||0,L||M.fillup({width:J||c.defaultAdvX}),z=F.attr("d"),!z||z.length<10||F.hasClass("hidden"))return!1;if(ie=t(z),ie.transform({a:1,d:-1,f:c.ascent-U}),L){if(ie.viewBox={x:0,y:0,width:J,height:c.unitsPerEm},fe=F.attr("data-tags")||F.attr("glyph-name"),fe&&(ie.tags=N(fe)),G=F.attr("unicode"),G){if(G.charLength()>1)return{d:z,path:ie,liga:G};ie.defaultCode=G.codePointAt(0)}return ie}return y(M.fillup({d:ie.getPathData()}))}if(typeof a=="string"&&(/<svg/.test(a)&&/<\w+:/.test(a)&&(a=a.replace(/(<\/?)\w+:/gm,"$1")),a=y(a)),d=a.find("glyph"),v=d.length,v)for(x=a.children(),f=0;f<x.length;f+=1)x.eq(f).is("g, polygon, polyline, path, circle, rect, ellipse, use")&&(E=!0);if(!v||E)S=a.attr("data-tags"),a=t(a),S&&(a.tags=N(S)),l.push(a);else{if(c.defaultAdvX=parseInt(a.find("font").attr("horiz-adv-x"),10),S=a.find("font-face"),c.ascent=parseInt(S.attr("ascent"),10),c.descent=parseInt(S.attr("descent"),10),c.baseline=c.descent/(c.descent-c.ascent)*100,c.unitsPerEm=c.ascent-c.descent,M.fillup({height:c.unitsPerEm}),k=a.find("metadata"),k.length&&(k=k.find("json"),k.length))try{k=JSON.parse(k.text()),l.metadata={name:k.name||k.fontFamily,url:k.url||k.fontURL,designer:k.designer,designerURL:k.designerURL,license:k.license,licenseURL:k.licenseURL,description:k.description,copyright:k.copyright,majorVersion:k.majorVersion,minorVersion:k.minorVersion,includeMetadata:!0},k.grid&&(l.metadata.grid=k.grid)}catch(F){}for(C=angular.element(document.body),f=0;f<20;f+=1)if(S=w(y(d[f])),S){C.append(S);try{h=S[0].getBBox(),S.remove()}catch(F){S.remove()}if(h.height===c.unitsPerEm){if(A===h.y)break;A=h.y}}for(f=0;f<v;f+=1)if(m=y(d[f]),S=w(m,A,!0),S)S.liga?(g[S.d]=g[S.d]||{liga:[]},g[S.d].liga.push(S.liga),g[S.d].path=S.path):(l.push(S),g[m.attr("d")]=g[m.attr("d")]||{liga:[]},g[m.attr("d")].idx=l.length-1);else try{m.attr("unicode").codePointAt(0)===32&&(c.whitespace=parseInt(m.attr("horiz-adv-x"),10)/c.unitsPerEm*100)}catch(F){}for(S in g)try{typeof g[S].idx=="number"?l[g[S].idx].liga=g[S].liga:(g[S].path.liga=g[S].liga,l.push(g[S].path))}catch(F){}}return l.fontMetrics={emSize:c.unitsPerEm,baseline:c.baseline,whitespace:c.whitespace},l}}]);(function(){var t="http://www.w3.org/1999/xlink",n=angular.module("svg"),y={};angular.forEach([{miAttrName:"miXlinkHref",attrName:"xlink:href"},{miAttrName:"miStrokeWidth",attrName:"stroke-width"},{miAttrName:"miStrokeLinejoin",attrName:"stroke-linejoin"},{miAttrName:"miStrokeLinecap",attrName:"stroke-linecap"},{miAttrName:"miStrokeMiterlimit",attrName:"stroke-miterlimit"},{miAttrName:"miFontSize",attrName:"font-size"},"d","fill","stroke","opacity","width","height","viewBox","x1","x2","y1","y2"],function(a){var l;typeof a=="string"?l="mi"+a.substr(0,1).toUpperCase()+a.substr(1):(l=a.miAttrName,a=a.attrName),y[l]=function(){return{priority:99,link:function(h,C,x){x.$observe(l,function(d){d&&(/:/.test(a)?C[0].setAttributeNS(t,a,d):C.attr(a,d))})}}}}),n.directive(y)})();angular.module("font",["svg","tmpl"]).factory("font",["svgPath","template",function(t,n){var y,a,l,h,C,x,d,m=function(D,W){return isNaN(D)?W:isNaN(W)||D<W?D:W},f=function(D,W){return isNaN(D)?W:isNaN(W)||D>W?D:W},c=function(D){return D>32767&&(D=32767),D<-32768&&(D=-32768),D},v=function(D,W){var T,_,Q,e=Array.from(D),r=Array.from(W),s=e.length;for(s=s<r.length?s:r.length,Q=0;Q<s;Q+=1)if(T=e[Q].codePointAt(0),_=r[Q].codePointAt(0),T!==_)return isNaN(T)?-1:isNaN(_)?1:T-_;return e.length-r.length},g=function(D,W){var T,_=D.length,Q=0,e=0,r,s=0;for(T=0;T<_;T+=1)Q+=D[T].byteLength;if(!isNaN(W)&&W>0)for(;e<Q;)e+=W;for(r=new Uint8Array(e||Q),T=0;T<_;T+=1)r.set(new Uint8Array(D[T]),s),s+=D[T].byteLength;return r.buffer},k=function(D,W,T){var _,Q,e,r,s=D.length;for(W===1?e="setUint8":(e="setUint16",W=2),_=new ArrayBuffer(s*W),Q=new DataView(_),r=0;r<s;r+=1)Q[e](r*W,D.charCodeAt(r),T);return _},E=function(D){var W,T=D.length,_="";for(W=0;W<T;W+=1)_+=D[W].charCodeAt(0).toString(16);return parseInt(_,16)},A=function(D){for(var W=0;D>=2;)D/=2,W+=1;return W},M=function(D){var W=new DataView(D),T,_=D.byteLength,Q=0;for(T=0;T<_;T+=4)Q+=W.getUint32(T),Q>4294967295&&(Q=parseInt(Q.toString(16).match(/.{8}$/)[0],16));return Q},S=function(D){var W=[{bit:0,range:[0,127]},{bit:1,range:[128,255]},{bit:2,range:[256,383]},{bit:3,range:[384,591]},{bit:4,range:[592,687]},{bit:4,range:[7424,7551]},{bit:4,range:[7552,7615]},{bit:5,range:[688,767]},{bit:5,range:[42752,42783]},{bit:6,range:[768,879]},{bit:6,range:[7616,7679]},{bit:7,range:[880,1023]},{bit:8,range:[11392,11519]},{bit:9,range:[1024,1279]},{bit:9,range:[1280,1327]},{bit:9,range:[11744,11775]},{bit:9,range:[42560,42655]},{bit:10,range:[1328,1423]},{bit:11,range:[1424,1535]},{bit:12,range:[42240,42559]},{bit:13,range:[1536,1791]},{bit:13,range:[1872,1919]},{bit:14,range:[1984,2047]},{bit:15,range:[2304,2431]},{bit:16,range:[2432,2559]},{bit:17,range:[2560,2687]},{bit:18,range:[2688,2815]},{bit:19,range:[2816,2943]},{bit:20,range:[2944,3071]},{bit:21,range:[3072,3199]},{bit:22,range:[3200,3327]},{bit:23,range:[3328,3455]},{bit:24,range:[3584,3711]},{bit:25,range:[3712,3839]},{bit:26,range:[4256,4351]},{bit:26,range:[11520,11567]},{bit:27,range:[6912,7039]},{bit:28,range:[4352,4607]},{bit:29,range:[7680,7935]},{bit:29,range:[11360,11391]},{bit:29,range:[42784,43007]},{bit:30,range:[7936,8191]},{bit:31,range:[8192,8303]},{bit:31,range:[11776,11903]},{bit:32,range:[8304,8351]},{bit:33,range:[8352,8399]},{bit:34,range:[8400,8447]},{bit:35,range:[8448,8527]},{bit:36,range:[8528,8591]},{bit:37,range:[8592,8703]},{bit:37,range:[10224,10239]},{bit:37,range:[10496,10623]},{bit:37,range:[11008,11263]},{bit:38,range:[8704,8959]},{bit:38,range:[10752,11007]},{bit:38,range:[10176,10223]},{bit:38,range:[10624,10751]},{bit:39,range:[8960,9215]},{bit:40,range:[9216,9279]},{bit:41,range:[9280,9311]},{bit:42,range:[9312,9471]},{bit:43,range:[9472,9599]},{bit:44,range:[9600,9631]},{bit:45,range:[9632,9727]},{bit:46,range:[9728,9983]},{bit:47,range:[9984,10175]},{bit:48,range:[12288,12351]},{bit:49,range:[12352,12447]},{bit:50,range:[12448,12543]},{bit:50,range:[12784,12799]},{bit:51,range:[12544,12591]},{bit:51,range:[12704,12735]},{bit:52,range:[12592,12687]},{bit:53,range:[43072,43135]},{bit:54,range:[12800,13055]},{bit:55,range:[13056,13311]},{bit:56,range:[44032,55215]},{bit:57,range:[55296,57343]},{bit:58,range:[67840,67871]},{bit:59,range:[19968,40959]},{bit:59,range:[11904,12031]},{bit:59,range:[12032,12255]},{bit:59,range:[12272,12287]},{bit:59,range:[13312,19903]},{bit:59,range:[131072,173791]},{bit:59,range:[12688,12703]},{bit:60,range:[57344,63743]},{bit:61,range:[12736,12783]},{bit:61,range:[63744,64255]},{bit:61,range:[194560,195103]},{bit:62,range:[64256,64335]},{bit:63,range:[64336,65023]},{bit:64,range:[65056,65071]},{bit:65,range:[65040,65055]},{bit:65,range:[65072,65103]},{bit:66,range:[65104,65135]},{bit:67,range:[65136,65279]},{bit:68,range:[65280,65519]},{bit:69,range:[65520,65535]},{bit:70,range:[3840,4095]},{bit:71,range:[1792,1871]},{bit:72,range:[1920,1983]},{bit:73,range:[3456,3583]},{bit:74,range:[4096,4255]},{bit:75,range:[4608,4991]},{bit:75,range:[4992,5023]},{bit:75,range:[11648,11743]},{bit:76,range:[5024,5119]},{bit:77,range:[5120,5759]},{bit:78,range:[5760,5791]},{bit:79,range:[5792,5887]},{bit:80,range:[6016,6143]},{bit:80,range:[6624,6655]},{bit:81,range:[6144,6319]},{bit:82,range:[10240,10495]},{bit:83,range:[40960,42127]},{bit:83,range:[42128,42191]},{bit:84,range:[5888,5919]},{bit:84,range:[5920,5951]},{bit:84,range:[5952,5983]},{bit:84,range:[5984,6015]},{bit:85,range:[66304,66351]},{bit:86,range:[66352,66383]},{bit:87,range:[66560,66639]},{bit:88,range:[118784,119039]},{bit:88,range:[119040,119295]},{bit:88,range:[119296,119375]},{bit:89,range:[119808,120831]},{bit:90,range:[1044480,1048573]},{bit:90,range:[1048576,1114109]},{bit:91,range:[65024,65039]},{bit:91,range:[917760,917999]},{bit:92,range:[917504,917631]},{bit:93,range:[6400,6479]},{bit:94,range:[6480,6527]},{bit:95,range:[6528,6623]},{bit:96,range:[6656,6687]},{bit:97,range:[11264,11359]},{bit:98,range:[11568,11647]},{bit:99,range:[19904,19967]},{bit:100,range:[43008,43055]},{bit:101,range:[65536,65663]},{bit:101,range:[65664,65791]},{bit:101,range:[65792,65855]},{bit:102,range:[65856,65935]},{bit:103,range:[66432,66463]},{bit:104,range:[66464,66527]},{bit:105,range:[66640,66687]},{bit:106,range:[66688,66735]},{bit:107,range:[67584,67647]},{bit:108,range:[68096,68191]},{bit:109,range:[119552,119647]},{bit:110,range:[73728,74751]},{bit:110,range:[74752,74879]},{bit:111,range:[119648,119679]},{bit:112,range:[7040,7103]},{bit:113,range:[7168,7247]},{bit:114,range:[7248,7295]},{bit:115,range:[43136,43231]},{bit:116,range:[43264,43311]},{bit:117,range:[43312,43359]},{bit:118,range:[43520,43615]},{bit:119,range:[65936,65999]},{bit:120,range:[66e3,66047]},{bit:121,range:[66208,66271]},{bit:121,range:[66176,66207]},{bit:121,range:[67872,67903]},{bit:122,range:[127024,127135]},{bit:122,range:[126976,127023]}],T,_;for(T=0,_=W.length;T<_;T+=1)if(D>=W[T].range[0]&&D<=W[T].range[1])return W[T].bit;return 0},N=function(D,W){for(var T=new ArrayBuffer(12),_=1,Q=0,e,r=new DataView(T);_<D;)Q+=1,_*=2;return _/=2,Q-=1,e=16*_,r.setUint32(0,W?E("OTTO"):65536),r.setUint16(4,D),r.setUint16(6,e),r.setUint16(8,Q),r.setUint16(10,D*16-e),T},w=function(D,B){var T,_,Q,e,r,s,o,u,p=[],b=[],P=[],O=[],B=B||{},I,X,R=0,H=function(j,Y,V,Z){var q=1,re=4,te,be,we;j==="y"&&(q+=1,re+=1),Z?(te=Z.roundedVal,isNaN(te)&&(te=Z.val)):te=0,V.relVal=V.val-te,we=Math.round(V.relVal),V.relVal>0&&V.relVal%1===.5?V.relVal=we-1:V.relVal=we,V.roundedVal=Math.round(te+V.relVal),be=Z&&V.relVal===0,!be&&V.relVal<256&&V.relVal>-256?(Y[q]=1,V.relVal<0?(Y[re]=0,V.relVal=-V.relVal):Y[re]=1,V.byteLength=1):(Y[q]=0,be?(Y[re]=1,V.byteLength=0):(Y[re]=0,V.byteLength=2))},K=function(j,Y){var V=Y.length,Z=new ArrayBuffer(V*2),q=new DataView(Z),re=0,te,be,we,ve;for(te=0;te<V;te+=1)be=Y[te],we=be[j].byteLength,we&&(ve=be[j].relVal,we===1?q.setUint8(re,ve):we===2&&q.setInt16(re,ve),re+=we);return Z.slice(0,re)};for(D=Object.create(D),r=D.length,e=0;e<r;e+=1){for(T=D[e],u=[],s=T.length,R+=s,Q=0;Q<s;Q+=1)u[Q]=[],u[Q][3]=0,o=T[Q],o.offCurve?u[Q][0]=0:(u[Q][0]=1,T.xMin=m(T.xMin,o.x),T.yMin=m(T.yMin,o.y),T.xMax=f(T.xMax,o.x),T.yMax=f(T.yMax,o.y)),o.x={val:o.x},o.y={val:o.y},Q===0?D[e-1]?(I=D[e-1].length,I=D[e-1][I-1]):I=!1:I=T[Q-1],H("x",u[Q],o.x,I?I.x:!1),H("y",u[Q],o.y,I?I.y:!1);for(s=u.length,_=0;_<s;_+=1){for(Q=0,I=u[_].join("");Q<256&&u[_+Q+1]&&I===u[_+Q+1].join("");)Q+=1;Q&&(u[_][3]=1,u[_+1]=Q,u.splice(_+2,Q-1),s=u.length,_+=1)}T.flags=u,T.xBuffer=K("x",T),T.yBuffer=K("y",T)}for(u=[],_=0,r=D.length;_<r;_+=1){for(T=D[_],B.xMin=Math.round(m(B.xMin,T.xMin)),B.yMin=Math.round(m(B.yMin,T.yMin)),B.xMax=Math.round(f(B.xMax,T.xMax)),B.yMax=Math.round(f(B.yMax,T.yMax)),b.push(T.length+(b[_-1]||-1)),Q=0,s=T.flags.length;Q<s;Q+=1)T.flags[Q].length&&(T.flags[Q]=parseInt(T.flags[Q].reverse().join(""),2));u.push(new Uint8Array(T.flags).buffer),P.push(T.xBuffer),O.push(T.yBuffer)}for(u=g(u),I=new ArrayBuffer(b.length*2+2),X=new DataView(I),_=0,r=b.length;_<r;_+=1)X.setInt16(_*2,b[_]);return I=[I],P=g(P),O=g(O),I.push(u),I.push(P),I.push(O),p=g(I),I=new ArrayBuffer(10),X=new DataView(I),X.setUint16(0,D.length),X.setUint16(2,c(B.xMin)),X.setUint16(4,c(B.yMin)),X.setUint16(6,c(B.xMax)),X.setUint16(8,c(B.yMax)),I=[I],I.push(p),{buffer:g(I,4),bbox:B,contourCount:D.length,pointsCount:R}},F=function(D){var W=[],T=[],_=[],Q,e,r,s,o,u,p,b,P,O,B,I,X=3,R;function H(j,Y){var V=[],Z,q,re=j.length;for(q=0,j.sort(function(te,be){return te.code-be.code}),Z=1;Z<re;Z+=1)(j[Z].code!==j[Z-1].code+1||Y&&j[Z].idx!==j[Z-1].idx+1)&&(V.push(j.slice(q,Z)),q=Z);return V.push(j.slice(q,re)),V}function K(j,Y,V){var Z,q;e||(e=new ArrayBuffer(8*X)),q=e.lastOffset||0,Z=new DataView(e),Z.setUint16(q,j),q+=2,Z.setUint16(q,Y),q+=2,Z.setUint32(q,V),q+=4,e.lastOffset=q}for(b=D.length,p=0;p<b;p+=1)R=D[p],R<=65535?T.push({idx:p+1,code:R}):_.push({idx:p+1,code:R});if(u=_.length>0,o=T.length>0,u&&o&&(X=6),u&&(_=_.concat(T)),R=new ArrayBuffer(4),Q=new DataView(R),Q.setUint16(0,0),Q.setUint16(2,X),W.push(R),o){for(R=T.map(function(j){return j.code}),R.indexOf(65535)<0&&T.push({idx:0,code:65535}),R.indexOf(65534)<0&&R.indexOf(65533)<0&&T.push({idx:0,code:65533}),O=H(T),I=O.length,s=new ArrayBuffer(2*(8+4*I)),Q=new DataView(s),Q.setUint16(0,4),Q.setUint16(2,s.byteLength),Q.setUint16(4,0),Q.setUint16(6,2*I),R=2*Math.pow(2,A(I)),Q.setUint16(8,R),Q.setUint16(10,A(R/2)),Q.setUint16(12,2*I-R),P=14,p=0;p<I;p+=1)Q.setUint16(P,O[p][O[p].length-1].code),P+=2;for(Q.setUint16(P,0),P+=2,p=0;p<I;p+=1)Q.setUint16(P,O[p][0].code),P+=2;for(p=0;p<I;p+=1)Q.setInt16(P,O[p][0].idx-O[p][0].code),P+=2;for(p=0;p<I;p+=1)Q.setUint16(P,0),P+=2}if(P=4+X*8,R=s?s.byteLength:0,R+=P,o&&K(0,3,P),u&&K(0,4,R),o&&K(1,3,P),u&&K(1,4,R),o&&K(3,1,P),u&&K(3,10,R),W.push(e),o&&W.push(s),u){for(B=H(_,!0),I=B.length,r=new ArrayBuffer(16+12*I),Q=new DataView(r),Q.setUint32(0,786432),Q.setUint32(4,r.byteLength),Q.setUint32(8,0),Q.setUint32(12,I),P=16,p=0;p<I;p+=1)R=B[p],Q.setUint32(P,R[0].code),P+=4,Q.setUint32(P,R[R.length-1].code),P+=4,Q.setUint32(P,R[0].idx),P+=4;W.push(r)}return g(W,4)},U=function(D){var W=new ArrayBuffer(D.cff?6:32),T=new DataView(W);return T.setUint32(0,D.cff?20480:65536),T.setUint16(4,D.numGlyphs||0),D.cff||(T.setUint16(6,D.maxPoints||0),T.setUint16(8,D.maxContours||0),T.setUint16(10,D.maxComponentPoints||0),T.setUint16(12,D.maxComponentContours||0),T.setUint16(14,2),T.setUint16(16,D.maxTwilightPoints||0),T.setUint16(18,D.maxStorage||0),T.setUint16(20,D.maxFunctionDefs||0),T.setUint16(22,D.maxInstructionDefs||0),T.setUint16(24,D.maxStackElements||0),T.setUint16(26,D.maxSizeOfInstructions||0),T.setUint16(28,D.maxComponentElements||0),T.setUint16(30,D.maxComponentDepth||0)),W},L=function(D){var W=new ArrayBuffer(32),T=new DataView(W);return T.setInt32(0,196608),T.setUint32(12,D.isFixedPitch?1:0),W},J=function(D){var W=new ArrayBuffer(54),T=new DataView(W),_={val:Math.round(new Date().getTime()/1e3)+2082844800},Q=D.xMax,e=D.xMin;return _.msb=Math.floor(_.val/4294967295),_.lsb=Math.floor(_.val%4294967295),T.setInt32(0,65536),T.setUint32(4,Math.round(+(D.majorVersion+"."+D.minorVersion)*65536)),T.setUint32(12,1594834165),T.setUint8(16,0),T.setUint8(17,11),T.setUint16(18,D.unitsPerEm||0),T.setUint32(20,_.msb),T.setUint32(24,_.lsb),T.setUint32(28,_.msb),T.setUint32(32,_.lsb),T.setInt16(36,c(D.xMin)||0),T.setInt16(38,c(D.yMin)||0),T.setInt16(40,c(D.xMax)||0),T.setInt16(42,c(D.yMax)||0),T.setUint16(44,0),T.setUint16(46,D.lowestRecPPEM||8),T.setInt16(48,2),T.setInt16(50,D.indexToLocFormat||0),W},z=function(D){var W=[],T,_,Q,e,r,s,o=[],u=[],p=0,b,P=[],O,B={copyright:0,fontFamily:1,subFamily:2,fontId:3,fullName:4,version:5,psName:6,trademark:7,manufacturer:8,designer:9,description:10,fontURL:11,designerURL:12,license:13,licenseURL:14};function I(X){var R=new ArrayBuffer(12),H=new DataView(R);return H.setUint16(0,X.pid),H.setUint16(2,X.sid),H.setUint16(4,X.languageID||0),H.setUint16(6,X.nameID),H.setUint16(8,X.byteLength),H.setUint16(10,X.offset),R}for(r in D)b=D[r],e=B[r],!isNaN(e)&&b&&(P.push(k(b,1)),s=b.length,o.push({pid:1,sid:0,nameID:e,offset:p,byteLength:s}),p+=s,s*=2,P.push(k(b)),u.push({pid:3,sid:1,languageID:1033,nameID:e,offset:p,byteLength:s}),p+=s);for(O=function(X,R){return X.nameID-R.nameID},o.sort(O),u.sort(O),o=o.concat(u),Q=0,s=o.length;Q<s;Q+=1)o[Q]=I(o[Q]);if(s)return T=new ArrayBuffer(6),_=new DataView(T),_.setUint16(2,s),W.push(T),o=g(o),W.push(o),P=g(P),W.push(P),T=g(W),_=new DataView(T),_.setUint16(4,o.byteLength+6),T},G=function(D){var W=new ArrayBuffer(36),T=new DataView(W);return T.setUint32(0,65536),T.setInt16(4,D.ascent||0),T.setInt16(6,D.descent||0),T.setInt16(8,D.lineGap||0),T.setUint16(10,D.advanceWidthMax||0),T.setInt16(12,D.minLeftSideBearing||0),T.setInt16(14,D.minRightSideBearing||0),T.setInt16(16,c(D.xMaxExtent)||0),T.setInt16(18,1),T.setUint16(34,D.numOfLongHorMetrics),W},ie=function(D){var W,T,_,Q=0,e=D.length;for(W=new ArrayBuffer(4*e),T=new DataView(W),_=0;_<e;_+=1)T.setUint16(Q,D[_].aw),T.setInt16(Q+2,D[_].lsb),Q+=4;return W},fe=function(D){var W=new ArrayBuffer(16),T=new DataView(W),_={tag:0,checksum:4,offset:8,length:12},Q=function(e){var r,s;for(r in e)e.hasOwnProperty(r)&&(s=_[r],isNaN(s)||T.setUint32(s,e[r]))};return Q(D),{buffer:W,set:Q}},de=function(D,W){var T,_=W?4:2,Q,e,r=D.length,s=W?"setUint32":"setUint16";for(T=new ArrayBuffer(r*_),Q=new DataView(T),e=0;e<r;e+=1)Q[s](e*_,D[e]*(W?2:1));return T},le=function(D){var W=new ArrayBuffer(96),T=new DataView(W),_=D.emSize,Q,e=Math.sin(D.italicAngle*Math.PI/180),r=.7*_,s=.65*_,o=.14*_,u=.48*_;for(T.setUint16(0,3),T.setInt16(2,D.xAvgCharWidth||_||0),D.usWeightClass=D.usWeightClass||400,T.setUint16(4,D.usWeightClass),T.setUint16(6,D.usWidthClass||5),D.fsType=D.fsType||0,T.setUint16(8,D.fsType),T.setInt16(10,s||0),T.setInt16(12,r||0),T.setInt16(14,-e*o),T.setInt16(16,o),T.setInt16(18,s),T.setInt16(20,r),T.setInt16(22,e*u),T.setInt16(24,u),T.setInt16(26,102*_/2048),T.setInt16(28,530*_/2048),T.setInt16(30,0),D.panose=[],D.unicodeRanges=[],Q=0;Q<128;Q+=1)D.unicodeRanges[Q]=0;return D.codes&&D.codes.forEach(function(p){D.unicodeRanges[S(p)]=1}),T.setUint32(42,parseInt(D.unicodeRanges.slice(0,32).reverse().join(""),2)),T.setUint32(46,parseInt(D.unicodeRanges.slice(32,64).reverse().join(""),2)),T.setUint32(50,parseInt(D.unicodeRanges.slice(64,96).reverse().join(""),2)),T.setUint32(54,parseInt(D.unicodeRanges.slice(96,128).reverse().join(""),2)),T.setUint16(62,64),D.italic=0,T.setUint16(64,D.usFirstCharIndex||0),T.setUint16(66,D.usLastCharIndex||0),T.setInt16(68,D.sTypoAscender||D.ascent||0),T.setInt16(70,D.sTypoDescender||D.descent||0),T.setInt16(72,D.sTypoLineGap||Math.abs(D.descent)||0),T.setUint16(74,D.usWinAscent||D.ascent||0),T.setUint16(76,D.usWinDescent||-D.descent||0),T.setUint32(78,1),D.codePageRange1=1,D.codePageRange2=0,T.setInt16(86,D.sxHeight||0),T.setInt16(88,D.sCapHeight||0),T.setUint16(92,32),T.setUint16(94,D.usMaxContext||0),D.panose=0,W},he=function(D){var W=new ArrayBuffer(4+2*D.length),T=new DataView(W),_,Q=D.length,e;for(T.setUint16(0,1),T.setUint16(2,Q/2),e=4,_=0;_<Q;_+=2)T.setUint16(e,D[_]),T.setUint16(e+2,D[_+1]),e+=2;return W},Pe=function(D,W){var T=[],_,Q,e,r,s,o,u=10,p=8;function b(ge,se,pe){var Se=Object.create(pe),ne=0,me,Ae=String.fromCodePoint(ge.codePointAt(0));Se[Ae]||(Se[Ae]=[]),Se[Ae].push({id:D[ge],str:ge,ligaTable:P(ge,se)});var Ce=0;for(me in Se)ne+=1,Se[me].forEach(function(Fe){Ce+=Fe.ligaTable.byteLength}),Ce+=2+Se[me].length*2;var Ee=6+2*ne,ae=4+2*ne;return{newLigaSets:Se,newLength:Ee+ae+Ce}}function P(ge,se){var pe=Array.from(ge),Se=pe.length,ne=new ArrayBuffer(2*(Se-1)+4),me=new DataView(ne),Ae,Ce;for(me.setUint16(0,se),me.setUint16(2,Se),Ce=4,Ae=1;Ae<Se;Ae+=1)me.setUint16(Ce,W[pe[Ae]]),Ce+=2;return ne}function O(ge){var se=[],pe=ge.length,Se=2+2*pe,ne=new ArrayBuffer(Se),me=new DataView(ne),Ae,Ce,Ee;for(ge.sort(function(ae,Fe){return v(Fe.str,ae.str)}),me.setUint16(0,pe),Ee=2,Ae=0;Ae<pe;Ae+=1)me.setUint16(Ee,Se),Ee+=2,Ce=ge[Ae].ligaTable,se[Ae+1]=Ce,Se+=Ce.byteLength;return se[0]=ne,g(se)}function B(ge){var se=[],pe;for(pe in ge){var Se=ge[pe];se.push({key:pe,set:Se,ligaSetTable:O(Se)})}se.sort(function(De,Me){return v(De.key,Me.key)});var ne=se.length,me=new ArrayBuffer(4+2*ne),Ae=6+2*ne,Ce=new ArrayBuffer(Ae),Ee=new DataView(Ce);Ee.setUint16(0,1),Ee.setUint16(2,Ae),Ee.setUint16(4,ne);var ae=6,Fe=me.byteLength+Ce.byteLength;Ee=new DataView(Ce);var ke=[],Be;for(Be=0;Be<ne;Be+=1)Ae=se[Be].ligaSetTable,ke.push(Ae),Ee.setUint16(ae,Fe),ae+=2,Fe+=Ae.byteLength;for(Ee=new DataView(me),Ee.setUint16(0,1),Ee.setUint16(2,ne),Ae=4,Be=0;Be<ne;Be+=1)Ee.setUint16(Ae,W[se[Be].key]||0),Ae+=2;return g([Ce,me].concat(ke))}var I,X,R,H,K=[],j={},Y=Object.keys(D).sort(function(ge,se){return se.length-ge.length});for(e=0;e<Y.length;e+=1)r=Y[e],isNaN(D[r])||(X=b(r,D[r],j),K.length>0?H=X.newLength:(R=2*u+p,H=R+X.newLength),H>65535?(K.push(j),j=b(r,D[r],{}).newLigaSets):j=X.newLigaSets);K.push(j),T=K.map(B);var V=new ArrayBuffer(20);_=new DataView(V),_.setUint16(0,1),_.setUint32(2,E("latn")),_.setUint16(6,8),_.setUint16(8,4),_.setUint16(10,0),_.setUint16(12,0),_.setUint16(14,0),_.setUint16(16,1),_.setUint16(18,0);var Z=new ArrayBuffer(12+2*K.length);for(_=new DataView(Z),_.setUint16(0,1),_.setUint32(2,E("liga")),_.setUint16(6,8),_.setUint16(8,0),_.setUint16(10,K.length),s=12,e=0;e<K.length;e+=1)_.setUint16(s,e),s+=2;var q=new ArrayBuffer(2+2*K.length);for(_=new DataView(q),_.setUint16(0,K.length),s=2,e=0;e<K.length;e+=1)_.setUint16(s,2+2*K.length+e*10),s+=2;var re=[];for(e=0;e<K.length;e+=1){var te=new ArrayBuffer(10),be;e==0?be=4:be=7,_=new DataView(te),_.setUint16(0,be),_.setUint16(4,1),e==0?o=10*K.length+8*(K.length-1):o=10*(K.length-e)+8*(e-1),_.setUint16(6,o),re.push(te)}for(length=T[0].byteLength,e=1;e<K.length;e+=1){var we=new ArrayBuffer(8);_=new DataView(we),_.setUint16(0,1),_.setUint16(2,4),_.setUint32(4,length+8*(K.length-e)),re.push(we),length+=T[e].byteLength}Q=new ArrayBuffer(10),s=10,_=new DataView(Q),_.setUint32(0,65536),_.setUint16(4,s),s+=V.byteLength,_.setUint16(6,s),s+=Z.byteLength,_.setUint16(8,s);var ve=[Q,V,Z,q].concat(re).concat(T);return g(ve)},$=function(D){var W=new ArrayBuffer(20),T=new ArrayBuffer(14),_=new ArrayBuffer(12),Q,e,r,s,o,u,p=[],b=[],P;P={},s=0,D.forEach(function(B){isNaN(P[B.left])&&(P[B.left]=s,s+=1,p.push({left:B.left,rights:[]})),p[P[B.left]].rights.push({id:B.right,value:B.value})}),p.sort(function(B,I){return B.left-I.left});function O(B){var I=B.rights,X=new ArrayBuffer(2+I.length*4),R=new DataView(X),H,K;for(I.sort(function(j,Y){return j.id-Y.id}),R.setUint16(0,I.length),K=2,H=0;H<I.length;H+=1)R.setUint16(K,I[H].id),K+=2,R.setInt16(K,I[H].value),K+=2;return X}for(e=new DataView(W),e.setUint16(0,1),e.setUint32(2,E("latn")),e.setUint16(6,8),e.setUint16(8,4),e.setUint16(10,0),e.setUint16(12,0),e.setUint16(14,65535),e.setUint16(16,1),e.setUint16(18,0),e=new DataView(T),e.setUint16(0,1),e.setUint32(2,E("kern")),e.setUint16(6,8),e.setUint16(8,0),e.setUint16(10,1),e.setUint16(12,0),e=new DataView(_),e.setUint16(0,1),e.setUint16(2,4),e.setUint16(4,2),e.setUint16(8,1),e.setUint16(10,8),P=10+2*p.length,u=new ArrayBuffer(P),e=new DataView(u),e.setUint16(0,1),e.setUint16(2,P),e.setUint16(4,4),e.setUint16(6,0),e.setUint16(8,p.length),Q=new ArrayBuffer(4+2*p.length),e=new DataView(Q),e.setUint16(0,1),e.setUint16(2,p.length),P=4,s=0;s<p.length;s+=1)e.setUint16(P,p[s].left||0),P+=2;for(length=Q.byteLength+u.byteLength,o=10,e=new DataView(u),s=0;s<p.length;s+=1)P=O(p[s]),b.push(P),e.setUint16(o,length),o+=2,length+=P.byteLength;return r=new ArrayBuffer(10),o=10,e=new DataView(r),e.setUint32(0,65536),e.setUint16(4,o),o+=W.byteLength,e.setUint16(6,o),o+=T.byteLength,e.setUint16(8,o),g([r,W,T,_,u,Q].concat(b))},oe=function(D){var W,T,_,Q,e,r=D.tableDirectory.length,s,o=[],u,p;for(e=new ArrayBuffer(44),_=new DataView(e),_.setUint32(0,2001684038),D.truetype?_.setUint32(4,65536):_.setUint32(4,E("OTTO")),_.setUint16(12,r),_.setUint32(16,D.sfntSize),_.setUint16(20,D.majorVersion||0),_.setUint16(22,D.minorVersion||0),s=44+r*20,Q=0;Q<r;Q+=1)W=new ArrayBuffer(20),T=new DataView(W),u=new DataView(D.tableDirectory[Q]),T.setUint32(0,u.getUint32(0)),T.setUint32(4,s),s+=D.subTables[Q].byteLength,p=u.getUint32(12),T.setUint32(8,p),T.setUint32(12,p),T.setUint32(16,u.getUint32(4)),o.push(W);return o=g(o),p=g(D.subTables),_.setUint32(8,e.byteLength+o.byteLength+p.byteLength),g([e,o,p])},ee=function(D){var W,T,_,Q=!0,e,r;function s(o){var u=new ArrayBuffer(4),p=[],b=new DataView(u);return b.setUint16(2,o.length*2,!0),p.push(u),p.push(k(o,2,!0)),g(p)}for(W=new ArrayBuffer(80),T=new DataView(W),T.setUint32(4,D.ttf.byteLength,Q),T.setUint32(8,131073,Q),e=16,r=D.os2.panose,_=0;_<r.length;_+=1)T.setUint8(e,r[_],Q),e+=4;return T.setUint8(26,1,Q),T.setUint8(27,D.os2.italic,Q),T.setUint32(28,D.os2.usWeightClass,Q),T.setUint16(32,D.os2.fsType,Q),T.setUint16(34,20556,Q),T.setUint32(36,D.os2.unicodeRange1,Q),T.setUint32(40,D.os2.unicodeRange2,Q),T.setUint32(44,D.os2.unicodeRange3,Q),T.setUint32(48,D.os2.unicodeRange4,Q),T.setUint32(52,D.os2.codePageRange1,Q),T.setUint32(56,D.os2.codePageRange2,Q),T.setUint32(60,D.checkSumAdjustment,Q),W=g([W,s(D.name.fontFamily),s(D.name.subFamily),s(D.name.version),s(D.name.fullName),new ArrayBuffer(4),D.ttf]),T=new DataView(W),T.setUint32(0,W.byteLength,Q),W},ce=function(){var D,W,T,_,Q,e=[],r,s,o,u,p=[],b,P,O;for(W=n(' horiz-adv-x="{{advX}}"'),O=n(' data-tags="{{tags}}"'),u=n(' glyph-name="{{name}}"'),T=n('<glyph unicode="{{code}}"{{tags}}{{advX}} d="{{d}}" />'),b=n(['<?xml version="1.0" standalone="no"?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" >','<svg xmlns="http://www.w3.org/2000/svg">',"<metadata>","<json>","<![CDATA[","{{metadata}}","]]>","</json>","</metadata>","<defs>",'<font id="{{fontId}}" horiz-adv-x="{{defaultAdvX}}">','<font-face units-per-em="{{unitsPerEm}}" ascent="{{ascent}}" descent="{{descent}}" />','<missing-glyph horiz-adv-x="{{defaultAdvX}}" />',"{{glyphs}}","</font></defs></svg>"].join("\n")),r=y.length,_=0;_<r;_+=1)if(D=y[_].advX,!isNaN(D)&&D!==x?D=W.fillup({advX:D}):D="",P=y[_].tags,!P||!P.join||!P.join("")?P="":P=O.fillup({tags:P.join(", ")}),o=y[_].name,o&&(o=u.fillup({name:o}),P?P=o+P:P=o),(y[_].d||y[_].code===32)&&(p.push(T.fillup({code:"&#x"+y[_].code.toString(16)+";",d:y[_].d,advX:D,tags:P})),y[_].ligatures))for(Q=0,s=y[_].ligatures.length;Q<s;Q+=1)e.push({d:y[_].d,liga:y[_].ligatures[Q],advX:D,tags:P});for(e.sort(function(B,I){return v(I.liga,B.liga)}),Q=0,s=e.length;Q<s;Q+=1)e[Q]=T.fillup({code:e[Q].liga,d:e[Q].d,advX:e[Q].advX,tags:e[Q].tags});return p=p.concat(e),p=p.join("\n"),b.fillup({metadata:JSON.stringify(d,null,"	"),fontId:d.fontId,defaultAdvX:x,unitsPerEm:C,ascent:l,descent:h,glyphs:p})},ye=function(D){function W(R,H){var K,j;return R=Math.round(R),R>=-107&&R<=107&&(!H||H===1)?(K=new Uint8Array(1),R+=139,K[0]=R,K.buffer):R>=108&&R<=1131&&(!H||H===2)?(K=new Uint8Array(2),R-=108,K[0]=Math.floor(R/256)+247,K[1]=Math.floor(R%256),K.buffer):R>=-1131&&R<=-108&&(!H||H===2)?(K=new Uint8Array(2),R+=108,K[0]=Math.floor(-R/256)+251,K[1]=Math.floor(-R%256),K.buffer):R>=-32768&&R<=32767&&(!H||H===3)?(K=new ArrayBuffer(3),j=new DataView(K),j.setUint8(0,28),j.setInt16(1,R),K):(K=new ArrayBuffer(5),j=new DataView(K),j.setUint8(0,29),j.setInt32(1,R),K)}function T(R){var H,K,j,Y=[1,14],V;for(R=R.toFixed(6).replace(/\.0+$/,"").replace(/(\.[^0]+)0+$/,"$1").toUpperCase(),j=0;j<R.length;j+=1)V=R[j],V==="."?Y.push(10):V==="E"?R[j+1]==="-"?(Y.push(12),j+=1):(Y.push(11),R[j+1]==="+"&&(j+=1)):V==="-"?Y.push(14):Y.push(parseInt(V,10));for(Y.push(15),Y.length%2&&Y.push(15),H=new ArrayBuffer(Y.length/2),K=new DataView(H),j=0;j<Y.length;j+=2)K.setUint8(j/2,Y[j]*16+Y[j+1]);return H}function _(R){return R%1?T(R):W(R)}function Q(R){var H,K,j,Y,V=R.length,Z,q=[1],re;for(j=new ArrayBuffer(2),H=new DataView(j),H.setUint16(0,V),K=0;K<V;K+=1)q.push(q[K]+R[K].byteLength);for(V=q.length,Z=q[V-1],Z<256?(Y="setUint8",Z=1):Z<65536?(Y="setUint16",Z=2):(Y="setUint32",Z=4),re=new ArrayBuffer(V*Z),H=new DataView(re),K=0;K<V;K+=1)H[Y](K*Z,q[K]);return j=g([j,new Uint8Array([Z]).buffer,re,g(R)]),j}var e,r,s,o=new ArrayBuffer(2),u=new ArrayBuffer(4),p=new ArrayBuffer(5),b=391,P,O,B,I,X=new ArrayBuffer(7);for(s=new DataView(u),s.setUint8(0,1),s.setUint8(2,4),s.setUint8(3,4),s=new DataView(p),s.setUint16(0,1),s.setUint8(2,1),s.setUint8(3,1),s.setUint8(4,D.psName.length+1),p=g([p,k(D.psName,1)]),s=new DataView(X),s.setUint16(0,1),s.setUint8(2,2),s.setUint16(3,1),I=1/D.emSize,X=g([X,W(b+1),new Uint8Array([2]).buffer,W(b),new Uint8Array([3]).buffer,W(388),new Uint8Array([4]).buffer,_(I),new Uint8Array([139,139]).buffer,_(I),new Uint8Array([139,139]).buffer,new Uint8Array([12,7]).buffer,_(D.bbox.xMin),_(D.bbox.yMin),_(D.bbox.xMax),_(D.bbox.yMax),new Uint8Array([5]).buffer]),B=[k(D.fontFamily,1),k(D.fullName,1)],P=0;P<y.length;P+=1)B.push(k("u"+y[P].code.toString(16).toUpperCase(),1));return B=Q(B),r=new ArrayBuffer(5),s=new DataView(r),s.setUint8(0,2),s.setUint16(1,b+2),s.setUint16(3,D.glyphs.length-1),function(){var R,H,K,j=0,Y,V=[g([W(-D.defaultAdvX),new Uint8Array([14]).buffer])],Z,q,re;for(Y=D.glyphs,Z=0;Z<Y.length;Z+=1){for(H=[],q=Y[Z].svgPath.getCFFPath(),Y[Z].advX!==D.defaultAdvX&&H.push(W(Y[Z].advX-D.defaultAdvX)),re=0;re<q.length;re+=1)K=q[re].cmd,R=q[re].args,K==="M"?(H.push(W(R[0])),H.push(W(R[1])),H.push(new Uint8Array([21]))):K==="L"?(H.push(W(R[0])),H.push(W(R[1])),j+=2,(j>47||re+1<q.length&&q[re+1].cmd!=="L")&&(H.push(new Uint8Array([5])),j=0)):K==="C"&&(H=H.concat([W(R[0]),W(R[1]),W(R[2]),W(R[3]),W(R[4]),W(R[5])]),j+=6,(j>47||re+1<q.length&&q[re+1].cmd!=="C")&&(H.push(new Uint8Array([8])),j=0));H.push(new Uint8Array([14])),V.push(g(H))}e=Q(V)}(),O=g([W(D.defaultAdvX),new Uint8Array([20]).buffer,W(D.defaultAdvX),new Uint8Array([21]).buffer,W(0),new Uint8Array([12,10]).buffer]),function(){var R,H,K=g([u,p,X,B,o,r]);R=K.byteLength+20+3,H=K.byteLength+e.byteLength+20+3,X=g([X,W(K.byteLength-r.byteLength+23,5),new Uint8Array([15]).buffer,W(R,5),new Uint8Array([17]).buffer,W(O.byteLength,5),W(H,5),new Uint8Array([18]).buffer])}(),s=new DataView(X),s.setUint16(5,X.byteLength-6),g([u,p,X,B,o,r,e,O])},xe=function(){var D="Font generated by IcoMoon.";d||(d={}),!isNaN(d.majorVersion)&&!isNaN(d.minorVersion)&&(d.version=d.majorVersion+"."+d.minorVersion),d.version=d.version&&d.version.match(/\d{1,5}\.\d{1,5}/)||"1.0",isNaN(d.majorVersion)&&(d.majorVersion=Number(d.version.match(/(\d+)\./)[1])),isNaN(d.minorVersion)&&(d.majorVersion=Number(d.version.match(/\.(\d+)/)[1])),d.version="Version "+d.version,d.fontFamily=d.fontFamily||"icomoon",d.fontId=d.fontId||d.fontFamily,d.psName=d.psName||d.fontFamily,d.subFamily=d.subFamily||"Regular",d.fullName=d.fontFamily,/regular/i.test(d.subFamily)||(d.fullName+=" "+d.subFamily),d.description?d.description.indexOf(D)===-1&&(d.description=d.description+"\n"+D):d.description=D};function ue(D){var W,T=D.outlines==="truetype"||D.woff==="truetype",_=x,Q={},e=[],r,s,o,u,p=[],b=0,P=[0],O=[{aw:x,lsb:0}],B,I,X=0,R=!0,H,K={},j,Y={},V={},Z,q,re,te=0,be=0,we,ve,ge,se={advXSum:0,advXCount:0},pe=0,Se,ne,me={},Ae=["CFF ","OS/2","cmap","gasp","glyf","head","hhea","hmtx","loca","maxp","name","post"],Ce,Ee,ae,Fe,ke;for(ve=y.length,B=0;B<ve;B+=1)for(ae=y[B].code,isNaN(ae)&&(ae=B+59648,y[B].code=ae),e.push(ae),ae=y[B].ligatures,Z=ae&&ae.length||0,!j&&ae&&(j=!0),I=0;I<Z;I+=1)typeof ae[I]=="string"&&ae[I].length>1&&(K[ae[I]]=y[B].code);for(Ce in K)K.hasOwnProperty(Ce)&&Array.from(Ce).forEach(function(Be){ae=Be.codePointAt(0),e.indexOf(ae)===-1&&(y.push({code:ae,advX:0}),e.push(ae))});y.sort(function(Be,De){return Be.code-De.code}),e.sort(function(Be,De){return Be-De});for(Ce in K)K.hasOwnProperty(Ce)&&(K[Ce]=e.indexOf(K[Ce])+1,Array.from(Ce).forEach(function(Be){V[Be]=e.indexOf(Be.codePointAt(0))+1}));for(a&&a.length&&(a=a.map(function(Be){var De=e.indexOf(Be.left),Me=e.indexOf(Be.right);return De===-1||Me===-1?!1:{left:De+1,right:Me+1,value:Be.value}}).filter(function(Be){return Be!==!1})),ve=y.length,B=0;B<ve;B+=1)y[B].contours||(ne=y[B].svgPath,ne?(ne.viewBox&&ne.viewBox.height!==C&&(ae=C/ne.viewBox.height,ne.scale(ae)),y[B].d=ne.transform({a:1,d:-1,f:l}).getPathData(),y[B].contours=ne.getTTFContours()):(y[B].contours=[[{x:0,y:0},{x:0,y:0},{x:0,y:0}]],y[B].svgPath=t())),ae=w(y[B].contours,{xMin:0,yMin:h,yMax:l}),te=f(te,ae.pointsCount),be=f(be,ae.contourCount),p.push(ae.buffer),P.push(b/2),b+=ae.buffer.byteLength,ae=ae.bbox,y[B].code===120&&(se.sxHeight=ae.yMax),y[B].code===72&&(se.sCapHeight=ae.yMax),Q.xMin=m(Q.xMin,ae.xMin),Q.yMin=m(Q.yMin,ae.yMin),Q.xMax=f(Q.xMax,ae.xMax),Q.yMax=f(Q.yMax,ae.yMax),q=ae.xMin,re=m(q,re),W=y[B].advX,isNaN(W)&&y[B].svgPath&&(W=y[B].svgPath.viewBox,W&&(W=W.width,y[B].advX=W)),!isNaN(W)&&W!==x?(R&&ve>1&&(R=!1),_=f(W,_)):W=x,W&&(se.advXSum+=W,se.advXCount+=1),ke=f(ke,q+ae.xMax-ae.xMin),ae=W-ae.xMax,we=m(we,ae),O.push({aw:W,lsb:q});if(ve+=1,P.push(b/2),D.woff&&!T&&(me["CFF "]=ye({psName:d.psName,fontFamily:d.fontFamily,fullName:d.fullName,ascent:l,descent:h,bbox:{xMin:Q.xMin<0?Q.xMin:0,yMin:m(h,Q.yMin),xMax:f(_,Q.xMax),yMax:f(l,Q.yMax)},defaultAdvX:x,emSize:C,glyphs:y}),me.maxp2=U({numGlyphs:ve,maxPoints:te,maxContours:be,cff:!0})),P[P.length-1]>65535&&(X=1),(D.ttf||D.eot||T)&&(me.glyf=g(p),me.loca=de(P,X),me.maxp=U({numGlyphs:ve,maxPoints:te,maxContours:be})),me.cmap=F(e),me.gasp=he([65535,15]),me.head=J({xMin:Q.xMin,yMin:Q.yMin,xMax:Q.xMax,yMax:Q.yMax,unitsPerEm:C,indexToLocFormat:X,majorVersion:d.majorVersion,minorVersion:d.minorVersion}),me.hhea=G({ascent:l,descent:h,advanceWidthMax:_,numOfLongHorMetrics:O.length,minRightSideBearing:we,minLeftSideBearing:re,xMaxExtent:ke}),me.hmtx=ie(O),me.name=z(d),j&&(Ae.splice(1,0,"GSUB"),me.GSUB=Pe(K,V)),a&&a.length&&(Ae.splice(1,0,"GPOS"),me.GPOS=$(a)),s=e[0],s=s>65535?65535:s,H=e[e.length-1],se={italicAngle:0,emSize:C,usFirstCharIndex:s,usLastCharIndex:H>65535?65535:H,ascent:l,descent:h,codes:e,xAvgCharWidth:Math.round(se.advXSum/se.advXCount),sxHeight:se.sxHeight||0,sCapHeight:se.sCapHeight||0},me["OS/2"]=le(se),me.post=L({isFixedPitch:R}),Z=Ae.length,D.ttf||D.eot||T){for(ge=Z-1,o=[N(ge)],Ee=[],Se=[],pe=o[0].byteLength+ge*16,B=0;B<Z;B+=1)Ae[B]!=="CFF "&&(Ae[B]==="head"&&(I=Se.length),ae=me[Ae[B]],ae={buffer:ae,origLength:ae.byteLength},ae.buffer=g([ae.buffer],4),Se.push(ae.buffer),Ee.push(fe({tag:E(Ae[B]),checksum:M(ae.buffer),offset:pe,length:ae.origLength}).buffer),pe+=ae.buffer.byteLength);o=o.concat(Ee),ae=M(g(o.concat(Se))),ae=2981146554-ae,new DataView(Se[I]).setUint32(8,ae),o=g(o.concat(Se))}if(D.woff&&!T){for(ge=Z-2,u=[N(ge,!0)],Ee=[],Se=[],pe=u[0].byteLength+ge*16,B=0;B<Z;B+=1)ae=Ae[B],ae!=="glyf"&&ae!=="loca"&&(ae==="maxp"?ae="maxp2":ae==="head"&&(I=Se.length),ae=me[ae],ae={buffer:ae,origLength:ae.byteLength},ae.buffer=g([ae.buffer],4),Se.push(ae.buffer),Ee.push(fe({tag:E(Ae[B]),checksum:M(ae.buffer),offset:pe,length:ae.origLength}).buffer),pe+=ae.buffer.byteLength);u=u.concat(Ee),ae=M(g(u.concat(Se))),ae=2981146554-ae,new DataView(Se[I]).setUint32(8,ae),u=g(u.concat(Se))}return D.ttf&&(Y.ttf=o),D.eot&&(r=ee({ttf:o,checkSumAdjustment:ae,name:d,os2:se}),Y.eot=r),D.woff&&(Fe=oe({tableDirectory:Ee,subTables:Se,sfntSize:T?o.byteLength:u.byteLength,majorVersion:d.majorVersion,minorVersion:d.minorVersion,truetype:T}),Y.woff=Fe),D.svg&&(Y.svg=ce()),Y}return function(D){var W={};return W.set=function(T){return y=T.glyphs,l=T.ascent,h=T.descent,C=T.unitsPerEm,x=T.defaultAdvX,d=T.metadata?JSON.parse(JSON.stringify(T.metadata)):{},a=T.kerningPairs,xe(),this},W.generate=function(T){return T||(T={woff:!0,ttf:!0,eot:!0,svg:!0}),ue(T)},D&&W.set(D),W}}]);angular.module("file",["scriptLoader"]).factory("fileSaver",["scriptLoader","$q","$http",function(t,n,y){var a=function(f,c){this.files={},this.root="",f&&this.load(f,c)};a.signature={LOCAL_FILE_HEADER:"PK",CENTRAL_FILE_HEADER:"PK",CENTRAL_DIRECTORY_END:"PK",ZIP64_CENTRAL_DIRECTORY_LOCATOR:"PK\x07",ZIP64_CENTRAL_DIRECTORY_END:"PK",DATA_DESCRIPTOR:"PK\x07\b"},a.defaults={base64:!1,binary:!1,dir:!1,date:null,compression:null},a.prototype=function(){var f=function(S,N,w){this.name=S,this.data=N,this.options=w};f.prototype={asText:function(){var S=this.data;return S===null||typeof S=="undefined"?"":(this.options.base64&&(S=l.decode(S)),this.options.binary&&(S=a.prototype.utf8decode(S)),S)},asBinary:function(){var S=this.data;return S===null||typeof S=="undefined"?"":(this.options.base64&&(S=l.decode(S)),this.options.binary||(S=a.prototype.utf8encode(S)),S)},asUint8Array:function(){return a.utils.string2Uint8Array(this.asBinary())},asArrayBuffer:function(){return a.utils.string2Uint8Array(this.asBinary()).buffer}};var c=function(S,N){var w="",F;for(F=0;F<N;F++)w+=String.fromCharCode(S&255),S=S>>>8;return w},v=function(){var S={},N,w;for(N=0;N<arguments.length;N++)for(w in arguments[N])arguments[N].hasOwnProperty(w)&&typeof S[w]=="undefined"&&(S[w]=arguments[N][w]);return S},g=function(S){return S=S||{},S.base64===!0&&S.binary==null&&(S.binary=!0),S=v(S,a.defaults),S.date=S.date||new Date,S.compression!==null&&(S.compression=S.compression.toUpperCase()),S},k=function(S,N,w){var F=E(S);if(F&&A.call(this,F),w=g(w),w.dir||N===null||typeof N=="undefined")w.base64=!1,w.binary=!1,N=null;else if(a.support.uint8array&&N instanceof Uint8Array)w.base64=!1,w.binary=!0,N=a.utils.uint8Array2String(N);else if(a.support.arraybuffer&&N instanceof ArrayBuffer){w.base64=!1,w.binary=!0;var U=new Uint8Array(N);N=a.utils.uint8Array2String(U)}else w.binary&&!w.base64&&(w.optimizedBinaryString!==!0&&(N=a.utils.string2binary(N)),delete w.optimizedBinaryString);return this.files[S]=new f(S,N,w)},E=function(S){S.slice(-1)=="/"&&(S=S.substring(0,S.length-1));var N=S.lastIndexOf("/");return N>0?S.substring(0,N):""},A=function(S){if(S.slice(-1)!="/"&&(S+="/"),!this.files[S]){var N=E(S);N&&A.call(this,N),k.call(this,S,null,{dir:!0})}return this.files[S]},M=function(S,N,w){var F=N!==S.name,U=S.asBinary(),L=S.options,J,z;J=L.date.getHours(),J=J<<6,J=J|L.date.getMinutes(),J=J<<5,J=J|L.date.getSeconds()/2,z=L.date.getFullYear()-1980,z=z<<4,z=z|L.date.getMonth()+1,z=z<<5,z=z|L.date.getDate();var G=U!==null&&U.length!==0;if(w=L.compression||w,!a.compressions[w])throw w+" is not a valid compression method !";var ie=a.compressions[w],fe=G?ie.compress(U):"",de="";return de+="\n\0",de+=F?"\0\b":"\0\0",de+=G?ie.magic:a.compressions.STORE.magic,de+=c(J,2),de+=c(z,2),de+=G?c(this.crc32(U),4):"\0\0\0\0",de+=G?c(fe.length,4):"\0\0\0\0",de+=G?c(U.length,4):"\0\0\0\0",de+=c(N.length,2),de+="\0\0",{header:de,compressedData:fe}};return{filter:function(S){var N=[],w,F,U,L;for(w in this.files)this.files.hasOwnProperty(w)&&(U=this.files[w],L=new f(U.name,U.data,v(U.options)),F=w.slice(this.root.length,w.length),w.slice(0,this.root.length)===this.root&&S(F,L)&&N.push(L));return N},file:function(S,N,w){if(arguments.length===1)if(S instanceof RegExp){var F=S;return this.filter(function(U,L){return!L.options.dir&&F.test(U)})}else return this.filter(function(U,L){return!L.options.dir&&U===S})[0]||null;else S=this.root+S,k.call(this,S,N,w);return this},folder:function(S){if(!S)return this;if(S instanceof RegExp)return this.filter(function(U,L){return L.options.dir&&S.test(U)});var N=this.root+S,w=A.call(this,N),F=this.clone();return F.root=w.name,F},remove:function(S){S=this.root+S;var N=this.files[S];if(N||(S.slice(-1)!="/"&&(S+="/"),N=this.files[S]),N)if(!N.options.dir)delete this.files[S];else for(var w=this.filter(function(U,L){return L.name.slice(0,S.length)===S}),F=0;F<w.length;F++)delete this.files[w[F].name];return this},generate:function(S){S=v(S||{},{base64:!0,compression:"STORE",type:"base64"});var N=S.compression.toUpperCase();if(!a.compressions[N])throw N+" is not a valid compression method !";var w=[],F=[],U=0;for(var L in this.files)if(this.files.hasOwnProperty(L)){var J=this.files[L],z=this.utf8encode(J.name),G="",ie="",fe=M.call(this,J,z,N);G=a.signature.LOCAL_FILE_HEADER+fe.header+z+fe.compressedData,ie=a.signature.CENTRAL_FILE_HEADER+"\0"+fe.header+"\0\0\0\0\0\0"+(this.files[L].options.dir===!0?"\0\0\0":"\0\0\0\0")+c(U,4)+z,U+=G.length,F.push(G),w.push(ie)}var de=F.join(""),le=w.join(""),he="";he=a.signature.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(F.length,2)+c(F.length,2)+c(le.length,4)+c(de.length,4)+"\0\0";var Pe=de+le+he;switch(S.type.toLowerCase()){case"uint8array":return a.utils.string2Uint8Array(Pe);case"arraybuffer":return a.utils.string2Uint8Array(Pe).buffer;case"blob":return a.utils.string2Blob(Pe);case"base64":return S.base64?l.encode(Pe):Pe;default:return Pe}},crc32:function(S,N){if(S===""||typeof S=="undefined")return 0;var w=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof N=="undefined"&&(N=0);var F=0,U=0;N=N^-1;for(var L=0,J=S.length;L<J;L++)U=(N^S.charCodeAt(L))&255,F=w[U],N=N>>>8^F;return N^-1},clone:function(){var S=new a;for(var N in this)typeof this[N]!="function"&&(S[N]=this[N]);return S},utf8encode:function(S){for(var N="",w=0;w<S.length;w++){var F=S.charCodeAt(w);F<128?N+=String.fromCharCode(F):F>127&&F<2048?(N+=String.fromCharCode(F>>6|192),N+=String.fromCharCode(F&63|128)):(N+=String.fromCharCode(F>>12|224),N+=String.fromCharCode(F>>6&63|128),N+=String.fromCharCode(F&63|128))}return N},utf8decode:function(S){for(var N="",w=0,F=0,U=0,L=0,J=0;w<S.length;)F=S.charCodeAt(w),F<128?(N+=String.fromCharCode(F),w++):F>191&&F<224?(L=S.charCodeAt(w+1),N+=String.fromCharCode((F&31)<<6|L&63),w+=2):(L=S.charCodeAt(w+1),J=S.charCodeAt(w+2),N+=String.fromCharCode((F&15)<<12|(L&63)<<6|J&63),w+=3);return N}}}(),a.compressions={STORE:{magic:"\0\0",compress:function(f){return f},uncompress:function(f){return f}}},a.support={arraybuffer:function(){return typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"}(),uint8array:function(){return typeof Uint8Array!="undefined"}(),blob:function(){if(typeof ArrayBuffer=="undefined")return!1;var f=new ArrayBuffer(0);try{return new Blob([f],{type:"application/zip"}).size===0}catch(v){}try{var c=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return c.append(f),c.getBlob("application/zip").size===0}catch(v){}return!1}()},a.utils={string2binary:function(f){for(var c="",v=0;v<f.length;v++)c+=String.fromCharCode(f.charCodeAt(v)&255);return c},string2Uint8Array:function(f){if(!a.support.uint8array)throw new Error("Uint8Array is not supported by this browser");for(var c=new ArrayBuffer(f.length),v=new Uint8Array(c),g=0;g<f.length;g++)v[g]=f.charCodeAt(g);return v},uint8Array2String:function(f){if(!a.support.uint8array)throw new Error("Uint8Array is not supported by this browser");for(var c="",v=0;v<f.length;v++)c+=String.fromCharCode(f[v]);return c},string2Blob:function(f){if(!a.support.blob)throw new Error("Blob is not supported by this browser");var c=a.utils.string2Uint8Array(f).buffer;try{return new Blob([c],{type:"application/zip"})}catch(g){}try{var v=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return v.append(c),v.getBlob("application/zip")}catch(g){}throw new Error("Bug : can't construct the Blob.")}};var l=function(){var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(c,v){for(var g="",k,E,A,M,S,N,w,F=0;F<c.length;)k=c.charCodeAt(F++),E=c.charCodeAt(F++),A=c.charCodeAt(F++),M=k>>2,S=(k&3)<<4|E>>4,N=(E&15)<<2|A>>6,w=A&63,isNaN(E)?N=w=64:isNaN(A)&&(w=64),g=g+f.charAt(M)+f.charAt(S)+f.charAt(N)+f.charAt(w);return g},decode:function(c,v){var g="",k,E,A,M,S,N,w,F=0;for(c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");F<c.length;)M=f.indexOf(c.charAt(F++)),S=f.indexOf(c.charAt(F++)),N=f.indexOf(c.charAt(F++)),w=f.indexOf(c.charAt(F++)),k=M<<2|S>>4,E=(S&15)<<4|N>>2,A=(N&3)<<6|w,g=g+String.fromCharCode(k),N!=64&&(g=g+String.fromCharCode(E)),w!=64&&(g=g+String.fromCharCode(A));return g}}}(),h=Blob&&Blob.constructor&&"download"in document.createElement("a")||navigator.msSaveBlob,C=n.defer(),x=C.promise;h&&(window.saveAs||navigator.msSaveBlob?C.resolve():x=t.load("bower_components/file-saver/dist/FileSaver.min.js"));function d(f,c){var v=n.defer();return h?x.then(function(){var g=new Blob([c]);g.encoding="base64",navigator.msSaveBlob?(navigator.msSaveBlob(g,f),v.resolve()):(saveAs(g,f),v.resolve())}):v.reject(),v.promise}function m(f){var c=0,v=[],g,k;function E(A){var M,S,N;0<=A&&A<=127?v.push(A):128<=A&&A<=2047?(M=A>>>6,v.push(192+M),v.push(128+(A&63))):2048<=A&&A<=65535?(M=A>>>6,S=M>>>6,v.push(224+S),v.push(128+(M&63)),v.push(128+(A&63))):(M=A>>>6,S=M>>>6,N=S>>>6,v.push(240+N),v.push(128+(S&63)),v.push(128+(M&63)),v.push(128+(A&63)))}for(;c<f.length;)g=f[c].charCodeAt(0),k=f[c+1],k!==void 0&&(k=k.charCodeAt(0)),55296<=g&&g<=56319&&k&&56320<=k&&k<=57343?(E((g-55296)*1024+k-56320+65536),c+=1):E(g),c+=1;return new Uint8Array(v).buffer}return function(){var f=new a;return{addUnicodeString:function(c,v){return f.file(c,m(v)),this},add:function(c,v,g){return f.file(c,v,g),this},get:function(c){return f.file(c).data},save:function(c,v){return v?d(c,v):d(c,this.getArrayBuffer())},getArrayBuffer:function(){return f.generate({type:"arraybuffer"})}}}}]);angular.module("moonui",["color"]).filter("zpad",function(){return function(t,n){var y=/\-/.test(t);if(n=parseInt(n,10),isNaN(n))return t;t=String(t);var a=t.replace(/\.|\-/g,"").length,l;for(l=0;l<n-a;l+=1)t="0"+t;return y&&(t="-"+t.replace(/\-/g,"")),t}}).directive("miEditable",function(){return{priority:50,require:"ngModel",link:function(t,n,y,a){n.attr("contenteditable",!0),n.bind("blur",function(){t.$apply(function(){n.html(n.text()),a.$setViewValue(n.text())})}),t.$watch(function(){return a.$viewValue},function(){n.html(a.$viewValue)})}}}).directive("miPopup",function(){return{restrict:"A",require:"^?miAbsorbClicks",link:function(t,n,y,a){var l,h=angular.element(n[0]).next(),C,x=function(){h.attr("style","opacity: 0"),setTimeout(function(){h.addClass("hidden"),h.removeAttr("style")},500)},d=function(){h.removeClass("hidden"),l=!0},m=function(){clearTimeout(C),C=setTimeout(function(){l||x(),l=!1},10)};a&&a.addCallback&&a.addCallback(m),angular.element(document).bind("click",m),x(),h.bind("click",function(f){var c=f.target.tagName.toUpperCase();f.stopPropagation(),(c==="A"||c==="BUTTON"||c==="I")&&(x(),f.target.tagName.toUpperCase()!=="A"&&f.preventDefault())}),y.miPopup==="focus"?function(){var f,c,v,g;f=n.find("input"),f.length||(f=n),f.bind("focus",d),f.bind("click",function(){l||(h.toggleClass("hidden"),l=!0)}),f.bind("blur",function(k){var E,A,M=k.relatedTarget;if(!M){l&&x();return}if(g||function(){var S,N=[],w,F,U;for(g=h.find("button"),U=g.length,w=0;w<U;w+=1)N[w]=g[w];for(S=h.find("a"),U+=S.length,w=g.length,F=0;w<U;w+=1,F+=1)N[w]=S[F];g=N.filter(function(L){return L.offsetParent!==null})}(),A=g.length,c||(c=g[0]),v||(v=g[A-1],angular.element(v).bind("blur",function(S){var N=S.relatedTarget;N!==g[A-2]&&N!==c&&x()})),g){for(E=0;E<A;E+=1)if(M===g[E])return;E===A&&x()}})}():n.bind("click",function(){h.toggleClass("hidden"),l=!0}),n.bind("keydown",function(f){f.which===27?x():f.which===13&&f.target.type==="text"&&h.addClass("hidden")})}}}).directive("miNumber",["$filter",function(t){return{restrict:"E",scope:{radix:"&",min:"&",max:"&",def:"&",zpad:"&",validator:"&",modelVal:"=model"},template:'<input type="text" ng-model="viewVal" />',link:function(n,y,a){var l=t("zpad"),h=Number(n.radix())||10,C=Number(n.min()),x=Number(n.max()),d=Number(n.zpad())||0,m=!1,f=Number(n.def())||0,c=y.children("input"),v=h===10,g=a.invalidClass,k,E=n.validator&&n.validator(),A,M;h<2&&(h=2);var S=function(N,w,F){var U=!1,L=n.viewVal;if(v)try{L=n.$eval(n.viewVal)}catch(J){L=f}else L=parseInt(L,h);isNaN(L)&&(F?(U=!0,L=n.viewVal):L=f),!U&&!isNaN(N)&&(L+=parseInt(N,10)),!isNaN(x)&&L>x?F?U=!0:L=x:!isNaN(C)&&L<C&&(F?U=!0:L=C),!U&&E&&(E(L,f)||(F?U=!0:L=f)),U&&g?(c.addClass(g),c[0].setCustomValidity("invalid")):g&&(c.removeClass(g),c[0].setCustomValidity("")),n.$apply(function(){n.viewVal=l(L.toString(h),d),a.charInput&&!U&&A.val(String.fromCodePoint(L))}),F||(isNaN(w)?n.$apply(function(){n.modelVal=f=L,k=setTimeout(function(){n.modelVal!==L&&n.$apply(function(){n.modelVal=f=L})},300)}):(clearTimeout(k),k=setTimeout(function(){n.$apply(function(){n.modelVal=f=L})},w)))};c.bind("keydown",function(N){var w;N.which===40?(w=-1,N.preventDefault()):N.which===38&&(w=1,N.preventDefault()),N.shiftKey&&(w*=h),w&&S(w,0,g)}).bind("change",function(){S()}).bind("focus",function(){m=!0}).bind("blur",function(){m=!1,g&&S()}).bind("mousewheel",function(N){if(N.stopPropagation(),!!m){var w=N.wheelDeltaY>0?1:-1;N.shiftKey&&(w*=h),N.preventDefault(),S(w,500,g)}}).bind("input",function(){g&&S(NaN,0,g)}),isNaN(n.modelVal)||(f=n.modelVal),n.modelVal=f,n.viewVal=l(f,d),n.$watch("modelVal",function(N){isNaN(N)||(n.viewVal=l(N.toString(h),d),a.charInput&&A.val(String.fromCodePoint(N)),f=N)}),a.charInput&&(A=angular.element('<input type="text" maxlength="2" />'),A.bind("keydown",function(N){(N.which===13||N.which===27)&&(N.target.blur(),N.preventDefault())}),A.val(String.fromCodePoint(f)),M=function(N){E(N,f)&&(n.$apply(function(){f=n.modelVal=N,n.viewVal=l(N.toString(h),d)}),A[0].setCustomValidity(""),g&&A.removeClass(g))},A.bind("input",function(){var N;N=A.val().codePointAt(0),document.activeElement===A[0]&&E&&(N&&E(N,f)?M(N):(A[0].setCustomValidity("invalid"),g&&A.addClass(g)))}).bind("change",function(){var N=A.val();if(!N||!A[0].validity.valid){A.val(String.fromCodePoint(n.modelVal)),A[0].setCustomValidity(""),g&&A.removeClass(g);return}N=N.codePointAt(0),f!==N&&M(N)}).bind("click",function(){A[0].select()}),y.parent().after(angular.element('<label class="'+a.charInput+'"></label>').append(A)))}}}]).directive("miSelectAll",function(){return{link:function(t,n){n.bind("focus",function(){setTimeout(function(){n[0].select()})})}}}).directive("miPresets",function(){return{restrict:"E",transclude:!0,template:'<label mi-popup="focus"><mi-number min="min" max="max" def="def" zpad="zpad" model="val"></mi-number><span ng-transclude></span></label><ul><li ng-repeat="p in presets"><button type="button" ng-click="update(p)" value="{{p}}">{{p}}</button></li></ul>',scope:{val:"=model",min:"=",max:"=",def:"=",zpad:"=",getPresets:"&presets"},link:function(t,n){t.update=function(a){t.val=a};var y=function(){var a=t.getPresets(),l;for(t.presets=[],l=0;l<a.length;l+=1)a[l]>=t.min&&a[l]<=t.max&&t.presets.push(a[l]);t.$apply()};n.bind("click",y),n.find("input").bind("focus",function(a){a.target.select(),y()})}}}).directive("miStyle",function(){return{restrict:"E",link:function(t,n){var y,a=function(){return y=n.html(),y},l=angular.element("<style></style>");n.after(l),l=l[0],n.css("display","none"),t.$watch(a,function(){l.stylesheet?l.stylesheet.cssText=y:l.innerHTML=y})}}}).directive("miLink",function(){return{restrict:"E",replace:!0,transclude:!0,template:'<span><span ng-show="!href" ng-transclude></span><a ng-show="href" href="{{href}}" ng-transclude></a></span>',scope:{href:"@"}}}).directive("miColorPicker",["color","$timeout",function(t,n){var y=0;return{restrict:"E",replace:!0,templateUrl:"views/colorpicker.html",scope:{num:"=color",resultId:"@"},link:function(a,l){var h={h:0,s:0,l:0},C,x,d,m,f,c;a.id=y,y+=1,function(){var M,S=l.find("linearGradient");for(C=0;C<S.length;C+=1)M=angular.element(S[C]),M.attr("class")==="satGrad"?m=M.children():M.attr("class")==="litGrad"&&(x=M.children());v()}();function v(){m[0].setAttribute("stop-color","hsl("+h.h+", 0%, "+h.l+"%)"),m[1].setAttribute("stop-color","hsl("+h.h+", 100%, "+h.l+"%)"),x[0].setAttribute("stop-color","hsl("+h.h+", "+h.s+"%, 0%)"),x[1].setAttribute("stop-color","hsl("+h.h+", "+h.s+"%, 50%)"),x[2].setAttribute("stop-color","hsl("+h.h+", "+h.s+"%, 100%)"),d||(d=document.getElementById(a.resultId)),d&&d.setAttribute("style","background-color: hsl("+h.h+", "+h.s+"%, "+h.l+"%)")}h=t(a.num).toHSL();function g(){var M=t(a.num).toHSL();(M.h!==h.h||M.s!==h.s||M.l!==h.l)&&(a.num=t(h).toNumber())}function k(){a.hsl={h:h.h,s:h.s,l:h.l}}k();function E(){var M,S,N=l.find("input");if(N.length)for(M=0;M<N.length;M+=1)S=N[M].getAttribute("id"),/hue/.test(S)?N[M].value=h.h:/saturation/.test(S)?N[M].value=h.s:/lightness/.test(S)&&(N[M].value=h.l)}E();function A(M){clearTimeout(c),c=setTimeout(function(){var S=M.target.getAttribute("id");if(S==="hue"+a.id)h.h=M.target.value;else if(S==="saturation"+a.id)h.s=M.target.value;else if(S==="lightness"+a.id)h.l=M.target.value;else return;v(),n.cancel(f),f=n(function(){g(),k()},128)},16)}l[0].addEventListener("input",A,!1),l[0].addEventListener("change",A,!1),a.$watch("num",function(){n.cancel(f),f=n(function(){var M=t(a.num).toHSL();M.h===0&&h.h===360&&(M.h=h.h),(h.l===100||h.l===0)&&(M.s=h.s),t(h).toNumber()!==a.num&&(h=M,k(),v(),E())},256)}),a.$watch("hsl",function(){n.cancel(f),f=n(function(){h.h=a.hsl.h,h.s=a.hsl.s,h.l=a.hsl.l,g(),v(),E()},256)},!0)}}}]).directive("miFileOver",function(){return function(t,n){var y=!1,a,l,h;n.on("dragover",function(C){C.stopPropagation(),C.preventDefault();try{if(h=C.dataTransfer.types,h.indexOf)y=h.indexOf("Files")!==-1;else for(a=0;a<h.length;a+=1)C.dataTransfer.types[a]==="Files"&&(y=!0);y?(n.addClass("miFileOver"),clearTimeout(l),l=setTimeout(function(){n.removeClass("miFileOver")},1e3)):n.removeClass("miFileOver")}catch(x){}}),n.on("drop",function(C){C.stopPropagation(),n.removeClass("miFileOver")})}}).directive("miFileZone",function(){return{scope:{onOpen:"&"},link:function(t,n,y){var a=y.dragClass||"dragged",l=y.arrayBufferIf?new RegExp(y.arrayBufferIf):!1,h=new RegExp(y.typeRegex);n.on("dragover",function(C){n.addClass(a),C.dataTransfer.dropEffect="copy"}),n.on("dragleave",function(){n.removeClass(a)}),n.on("drop",function(C){var x=[],d=0,m,f,c,v=new FileReader,g=[],k,E=0,A=0,M=function(w){k=x[d].type||x[d].name,h.test(k)&&g.push({file:w.target.result,type:k,name:x[d].name}),d+=1,d===x.length?t.$apply(function(){t.onOpen({files:g.reverse()})}):(v=new FileReader,v.onload=M,l&&l.test(k)?v.readAsArrayBuffer(x[d]):v.readAsText(x[d]))},S=function(w){var F;function U(L){for(m=0;m<L.length;m+=1)L[m].isDirectory?E+=1:A+=1,S(L[m]);L.length===0?(E-=1,E===0&&A===0&&N()):F.readEntries(U)}w.isFile?w.file(function(L){A-=1,h.test(L.type||L.name)&&x.push(L),E===0&&A===0&&N()}):w.isDirectory&&(F=w.createReader(),F.readEntries(U))},N=function(){k=x[d].type||x[d].name,l&&l.test(k)?v.readAsArrayBuffer(x[d]):v.readAsText(x[d])};C.preventDefault(),v.onload=M;try{for(c=C.dataTransfer.items,m=0;m<c.length;m+=1)f=c[m].webkitGetAsEntry(),f&&(f.isDirectory?E+=1:A+=1,S(f))}catch(w){x=C.dataTransfer.files,N()}})}}}).directive("miFile",function(){return{restrict:"E",scope:{onOpen:"&",focused:"="},template:'<input type="file" multiple />',link:function(t,n,y){var a=n.children("input"),l=y.arrayBufferIf?new RegExp(y.arrayBufferIf):!1,h=new RegExp(y.typeRegex);a[0].addEventListener("change",function(C){var x=C.target.files,d=0,m=new FileReader,f=[],c,v=function(g){c=x[d].type||x[d].name,h.test(c)&&f.push({file:g.target.result,type:c,name:x[d].name}),d+=1,d===x.length?(t.$apply(function(){t.onOpen({files:f.reverse()})}),a[0].value=""):(m=new FileReader,m.onload=v,l&&l.test(c)?m.readAsArrayBuffer(x[d]):m.readAsText(x[d]))};m.onload=v,c=x[d].type||x[d].name,l&&l.test(c)?m.readAsArrayBuffer(x[d]):m.readAsText(x[d])},!1),y.focused&&a.bind("focus",function(){t.$apply(function(){t.focused=!0})}).bind("blur",function(){t.$apply(function(){t.focused=!1})})}}}).directive("miBoxSelector",function(){return{restrict:"E",scope:{map:"=",mode:"@",onApply:"&"},transclude:!0,template:"<div ng-transclude></div>",link:function(t,n,y){var a=[],l=!1,h=!1,C={},x={},d=NaN,m=y.boxClass||"mi-boxed",f,c,v={},g=y.selectedClass||"mi-selected",k=[],E,A=[],M,S=0,N=function(J){t.$apply(function(){t.onApply({selection:k,mode:J}),k=[]})},w=function(J){return J.offsetLeft<=v.x2&&J.offsetLeft+J.offsetWidth>=v.x1&&J.offsetTop<=v.y2&&J.offsetTop+J.offsetHeight>=v.y1?!0:J.offsetTop>v.y2||v.y1>J.offsetHeight+J.offsetTop?NaN:!1},F=function(){var J=n.find("mi-box"),z=J.length,G=[],ie,fe=1,de,le;if(!z)return G;for(ie=0;ie<z;ie+=1)J[ie].offsetHeight&&G.push({el:J[ie],idx:ie});for(J=G,G=[],z=J.length,de=J[0].offsetTop,v.x1=Math.min(C.x,x.x),v.x2=Math.max(C.x,x.x),v.y1=Math.min(C.y,x.y),v.y2=Math.max(C.y,x.y),d===1&&(d=0),ie=d||0;ie<z;ie+=1)if(S+=1,fe===1&&J[ie].el.offsetTop>de&&(fe=ie),le=w(J[ie].el),le)isNaN(d)&&(d=ie),G.push({index:J[ie].idx,element:angular.element(J[ie].el)});else{if(isNaN(le)&&!isNaN(d))break;ie+=fe-1}for(ie=d-1||-1;ie>-1;ie-=1)if(le=w(J[ie].el),le)G.push({index:J[ie].idx,element:angular.element(J[ie].el)});else if(isNaN(le))break;return G},U=function(){var J,z,G=t.map,ie=n.find("mi-box"),fe,de,le=ie.length,he=[];if(!le||!G||le!==G.length){S<500&&(S+=1,setTimeout(U,0));return}if(L(),S=0,fe=JSON.stringify(G),JSON.stringify(A)!==fe){for(J=0;J<le;J+=1)JSON.stringify(A[J])!==JSON.stringify(G[J])&&he.push(J);for(le=he.length,J=0;J<le;J+=1){if(z=he[J],de=angular.element(ie[z]),G[z].id+""!==de.attr("data-id")){setTimeout(U,300);return}G[z].order?de.addClass(g):de.removeClass(g)}A=JSON.parse(fe)}};n.bind("mousedown",function(J){if(t.mode!=="move")return d=NaN,l=!0,C.x=J.pageX,C.y=J.pageY,J.preventDefault(),!1});function L(){try{E.destroy()}catch(J){}t.mode==="move"&&(E=new Sortable(n.children()[0],{ghostClass:m,onUpdate:function(J){var z,G;z=parseInt(angular.element(J.item)[0].getAttribute("data-idx"),10);try{G=parseInt(angular.element(J.item).next()[0].getAttribute("data-idx"),10)}catch(ie){G=NaN}G>z&&(G-=1),k=[z,G],clearTimeout(M),M=setTimeout(function(){N("move")},300)}}))}document.body.addEventListener("mouseup",function(J){var z,G,ie,fe,de=t.mode,le;if(h=!1,l=!1,d=NaN,t.mode!=="move"){if(a.length){for(G=0,fe=a.length;G<fe;G+=1)z=a[G],z.element.removeClass(m),de==="delete"?z.element.removeClass(g).remove():de==="select"&&z.element.toggleClass(g),le=z.index,ie=k.indexOf(le),ie>0?k.splice(ie,1):k.push(z.index);a=[],clearTimeout(M),M=setTimeout(function(){N(de)},300)}for(f={x:J.pageX,y:J.pageY},c=angular.element(J.target),G=0;!c.is("mi-box")&&G<6;)c=c.parent(),G+=1;try{c=c[0]}catch(he){c=!1}}},!1),n.bind("mouseup",function(J){var z,G,ie,fe,de,le,he;if(!a.length&&t.mode!=="move"){for(de=t.mode,G=de==="delete",x.x=J.pageX,x.y=J.pageY,z=F(),d=NaN,ie=z.length,ie===1&&f&&J.shiftKey&&(C=f,z=F(),ie=z.length),n.find("mi-box").removeClass(m),fe=0;fe<ie;fe+=1)(G||ie<2||z[fe].element&&z[fe].element[0]!==c)&&(G&&!J.shiftKey?z[fe].element.removeClass(g).remove():de==="select"&&z[fe].element.toggleClass(g),le=z[fe].index,he=k.indexOf(le),he>0?k.splice(he,1):k.push(z[fe].index+(G&&!J.shiftKey?k.length:0)));clearTimeout(M),M=setTimeout(function(){N(de)},300)}}),n.bind("mousemove",function(J){if(t.mode!=="move"){var z;if(!l||J.buttons!==1)return;for(h=!0,clearTimeout(M),x.x=J.pageX,x.y=J.pageY,a=F(),n.find("mi-box").removeClass(m),z=0;z<a.length;z+=1)a[z].element.addClass(m)}}),window.addEventListener("scroll",function(){clearTimeout(M);var J=t.mode;k.length&&(M=setTimeout(function(){N(J)},300))},!1),t.$watch("map",function(){U()},!0),t.$watch("mode",function(J){try{E.destroy()}catch(z){}t.mode==="move"&&L()}),U()}}}).directive("miTags",function(){return{priority:2,require:"ngModel",link:function(t,n,y,a){var l=n.is("span");a.$parsers.push(function(C){var x=[],d=C;return d?(d=d.replace(/\s*,\s*/g,",").replace(/,+/g,", ").trim().replace(/^,+|,+$/,""),d=d.split(", "),d.forEach(function(m){m&&x.indexOf(m)===-1&&x.push(m)}),x.join(", ")):""}),l=n.is("span");function h(){n.val(a.$modelValue),l&&n.html(a.$modelValue)}a.$render=h,n.bind("change, blur",function(){a.$setViewValue(l?n.html():n.val()),h()})}}}).directive("miBlurOnEnter",function(){return{link:function(t,n){n.bind("keydown",function(y){(y.which===13||y.which===27)&&(y.target.blur(),y.preventDefault())})}}}).directive("miUnique",function(){return{priority:5,require:"ngModel",link:function(t,n,y,a){var l=t[y.miUnique]||{},h=!n[0].hasAttribute("contenteditable"),C=typeof y.miTags=="string";a.$parsers.push(function(x){var d=[],m,f,c,v,g,k;if(x=angular.element("<div></div>").html(x).text(),C){for(k in l)l.hasOwnProperty(k)&&(d=d.concat(l[k]));for(g=x.split(/,\s*/),k=l[t.$id]||[],c=g.length,m=0;m<c;m+=1)if(d.indexOf(g[m])!==-1&&k.indexOf(g[m])===-1){f=!1;break}m===c&&(f=!0)}else{for(k in l)k!==t.$id&&l.hasOwnProperty(k)&&d.push(l[k]);v=x.replace(/\s*/g,""),f=d.indexOf(v)===-1}return f?(a.$setValidity("unique",!0),y.miInvalidClass&&n.removeClass(y.miInvalidClass),x):(document.activeElement===n[0]?(a.$setValidity("unique",!1),y.miInvalidClass&&n.addClass(y.miInvalidClass)):h?n.val(a.$modelValue):n.html(a.$modelValue),a.$modelValue)}),n.bind("change, blur",function(){a.$setViewValue(h?n.val():n.text()),a.$setValidity("unique",!0),n.removeClass(y.miInvalidClass)}),t.$watch(function(){return a.$modelValue},function(x){x?C?l[t.$id]=x.split(/,\s*/):l[t.$id]=x.replace(/\s*/g,""):delete l[t.$id]})}}}).directive("miTooltip",["$parse",function(t){var n=600,y=n,a;return{link:function(l,h,C){var x=h[0],d,m=t(C.miTooltip)();h.bind("mouseenter",function(){var f=function(){var c,v,g,k;c=x.getBoundingClientRect(),d=angular.element("<div></div>"),d.addClass(m.class||"tooltip"),d.text(m.text),angular.element(document.body).append(d),g=d[0].getBoundingClientRect(),m.hasOwnProperty("marginTop")?k=c.top+c.height+(Number(m.marginTop)||0):k=c.top-c.height-(Number(m.marginBottom)||0),m.hasOwnProperty("marginRight")?v=c.left+c.width-g.width-Number(m.marginRight):v=c.left+c.width/2-g.width/2,d.css({left:v+"px",top:k+"px"}),y=0};clearTimeout(a),y?a=setTimeout(f,y):f()}).bind("mouseleave",function(f){var c;clearTimeout(a),d&&d.remove(),c=f.toElement,c&&(y!==0||!c.hasAttribute("mi-tooltip"))&&(y=n)}).bind("click",function(){clearTimeout(a),y=n,d&&d.remove()})}}}]).directive("miAbsorbClicks",function(){return{controller:["$scope",function(t){t.callbacks=[],this.addCallback=function(n){t.callbacks.push(n)}}],scope:{onClick:"&"},link:function(t,n){var y,a;n.bind("click",function(l){for(l.stopPropagation(),t.onClick({e:l}),a=t.callbacks.length,y=0;y<a;y+=1)t.callbacks[y]()})}}}).directive("miFocusWhen",function(){return{scope:!0,link:function(t,n,y){var a;t.$watch(function(){return y.miFocusWhen},function(){clearTimeout(a),a=setTimeout(function(){try{y.miFocusWhen==="true"&&(n.is("input, button")?n[0].focus():(n=n.find("input"),n.length&&n[0].focus()))}catch(l){}},100)})}}}).directive("miGrid",["template",function(t){return{restrict:"E",scope:{left:"@",top:"@",width:"@",height:"@",gridSize:"@"},link:function(n,y){var a=t('<div class="miGrid" style="left: {{left}}px; top: {{top}}px; width: {{width}}px; height: {{height}}px;">{{hLines}}{{vLines}}</div>'),l=t('<div class="hLine" style="top: {{y}}px"></div>'),h=t('<div class="vLine" style="left: {{x}}px"></div>');function C(x,d,m,f,c){var v=[],g,k=m/f*c,E=[];if(m===0||f===0)return"";for(g=0;g<k;g+=1)E.push(h.fillup({x:Math.round(g/k*m)}));for(E.push(h.fillup({x:Math.round(m)})),g=0;g<c;g+=1)v.push(l.fillup({y:Math.round(g/c*f)}));return v.push(l.fillup({y:Math.round(f)})),a.fillup({left:x,top:d,width:m,height:f,hLines:v.join(""),vLines:E.join("")})}n.$watch(function(){return n.left+n.top+n.width+n.height+n.gridSize},function(){y.html(C(Number(n.left),Number(n.top),Number(n.width),Number(n.height),Number(n.gridSize))||"")})}}}]).directive("miVisibleBox",function(){return{link:function(t,n,y){var a=0,l=n[0],h,C={width:0,height:0};function x(){var m=t[y.miVisibleBox];m&&(m.processing=!0),a<50?(setTimeout(function(){d()},300),a+=1):a=0}function d(){var m,f,c;try{if(m=l.getBoundingClientRect(),!m.width||!m.height)return;f=l.offsetLeft,isNaN(f)&&(c=l.parentElement||l.parentNode,f=(c.offsetWidth-m.width)/2),t[y.miVisibleBox]={width:Math.round(m.width),height:Math.round(m.height),left:Math.round(f),top:0,processing:!1},setTimeout(function(){t.$apply()},100)}catch(v){x();return}}t.$watch(function(){return n.attr("viewBox")+n.attr("style")+y.miVisibleBoxWatch},function(){d()}),window.addEventListener("resize",function(){clearTimeout(h),h=setTimeout(function(){d(),t.$apply()},500)},!1)}}});location.hash==="#library"&&(location.hash="#/select/library");angular.module("icomoonApp",["ui.router","storage","svg","font","tmpl","color","swatch","csh","file","moonui","cloud","search"]).config(["$stateProvider","$urlRouterProvider","$compileProvider",function(t,n,y){n.otherwise("/select"),y.debugInfoEnabled(!1),y.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|file|chrome-extension):|data:image\//),t.state("select",{url:"/select",templateUrl:"views/main.html",controller:"MainCtrl",resolve:{project:["session","$q","storage","message",function(a,l,h,C){var x,d=l.defer(),m=a("icomoon"),f=function(c){var v=c.total||c.totalSize;v!==c.loaded&&C.setMessage(c.loaded/v)};return h.load("currentProject",function(c){c||(c=-1),m.load("icomoon-lib/presets.json").then(function(v){var g,k;c<0&&!isNaN(v.currentProject)&&(c=v.currentProject);function E(A){d.resolve(A)}for(v.projects||(v={currentProject:-1,projects:[]}),g=0;g<v.projects.length;g+=1)if(v.projects[g].created===c)return x=a(c),x.downloadProgressHandler=x.downloadProgressHandler||f,x.load(v.projects[g].uri).then(E,function(A){if(A==="no such project"){location.hash="#/projects";return}}),d.promise;if(g===v.projects.length){if(g>1){location.hash="#/projects";return}v.projects[c]||(c=0),c<v.projects.length&&c>-1&&v.projects[c].iconSets?(k=new Date().getTime(),v.projects[c].metadata.created=k,a(k).quickSave(v.projects[c]).then(function(A){v.projects.splice(c,1,A.metadata),c=k,v.time+=1,d.resolve(A),d.promise.then(function(){m.quickSave(v)})})):g>0?(c=v.projects[c].created,x=a(c),x.downloadProgressHandler=x.downloadProgressHandler||f,x.load().then(E)):(c=new Date().getTime(),v.projects=[{created:c,name:"Untitled Project 1",lastOpened:0}],m.quickSave(v),k={metadata:v.projects[0],iconSets:[]},a(c).quickSave(k).then(function(){d.resolve(k)}))}h.save("currentProject",c)})}),d.promise}]}}).state("select.font",{url:"/font",templateUrl:"views/font.html",controller:"FontCtrl"}).state("select.image",{url:"/image",templateUrl:"views/image.html",controller:"ImageCtrl"}).state("select.library",{url:"/library",templateUrl:"views/lib.html",controller:"LibCtrl",resolve:{iconSets:["$q","$http",function(a,l){var h=a.defer();return l.get("icomoon-lib/library.json").then(function(C){h.resolve(C.data)}),h.promise}]}}).state("projects",{url:"/projects",templateUrl:"views/projects.html",controller:"ProjectsCtrl",resolve:{}})}]);angular.module("icomoonApp").controller("MsgCtrl",["$scope","message",function(t,n){t.message=n,n.$apply=function(){try{t.$apply()}catch(y){}}}]);angular.module("icomoonApp").factory("session",["$q","$http","$rootScope","$timeout","storage","cloud","scriptLoader","message",function(t,n,y,a,l,h,C,x){"use strict";var d={},m,f={},c={},v=0;function g(){return m=C.load("components/jsondiffpatch/jsondiffpatch.min.js"),v=3e3,m.then(function(){jsondiffpatch.config.objectHash=function(E){return E.id||0}}),m}h.hasCloudAccess().then(g);function k(E){c={},l.clear(function(){E?location.pathname="/login/%2Fapp":location.reload()})}return function(E){var A,M,S,N,w,F,U,L={},J=3;if(d[E])return d[E];d[E]=L;function z(G){var ie=0,fe=t.defer();function de(){(c[E]===!0||c[E]==="pending")&&ie<800?(setTimeout(de,300),ie+=1):le()}function le(){c[E]=!0,h.hasCloudAccess(!0,E).then(function(he){m||g();var Pe=he.time||-1;G&&(G.time=G.time||S&&S.time||0),!G||Pe>G.time||!isNaN(G.uid)&&G.uid!==he.uid?h.getSession({id:E,progress:L.downloadProgressHandler}).then(function($){$&&($.uid=he.uid,G&&G.projects&&G.projects.length>1&&(G.uid===void 0||G.uid===-1)&&(c[E]=!1),fe.resolve($)),$||(G?(G&&he&&(G.uid=he.uid),fe.resolve()):E!=="icomoon"&&(fe.reject("no such project"),c[E]=!1),fe.resolve($))},function(){G&&he&&(G.uid=he.uid),fe.resolve()}):Pe!==G.time?(G&&he&&(G.uid=he.uid),fe.resolve()):G&&he&&(G.uid=he.uid,G.projects=G.projects||[],fe.resolve(G))},function(he){he.noAccess&&G&&G.premium?(c[E]=!1,k(),fe.resolve(!1)):fe.resolve(void 0),he&&G&&(G.uid=he.uid)})}return de(),fe.promise.then(function(){c[E]=!1,f[E]=!1}),fe.promise}return L.load=function(G){var ie=t.defer();function fe(de){(function le(){z(de).then(function(he){var Pe=!1;if(!he&&!de)if(he!==!1&&J>0){J-=1,setTimeout(le,1e3*(4-J));return}else Pe=!0,n.get(G).then(function($){M=$.data,ie.resolve(M)});else M=he||de,he?(S=JSON.parse(JSON.stringify(he)),ie.resolve(he)):ie.resolve(de);ie.promise.then(function($){h.hasCloudAccess().then(function(){m||g(),$.premium=!0,Pe?L.quickSave($,1):L.quickSave($)})})},function(he){he==="no such project"&&ie.reject(he)})})()}return M?fe(M):l.load(E,function(de){fe(de),y.$apply()}),ie.promise},L.save=function(G,ie,fe){return ie=ie||v,N||(N=t.defer()),A?N.resolve():(a.cancel(w),w=a(function(){function de(he){a.cancel(U),U=a(function(){le()},he||1e3)}function le(){h.hasCloudAccess().then(function(){return m||g(),m}).then(function(){if(c[E]==="offline"&&(c[E]=!1),c[E]&&c[E]!=="failed"&&c[E]!=="pending"){de();return}a.cancel(F),F=a(function(){var he,Pe,$=!1,oe,ee,ce;c[E]=!0;function ye(){M.time=fe||h.getTime(),ee=M.time,h.storeSession({session:oe,id:E,time:ee}).then(xe,function(){c[E]="failed",f[E]="failed",de()})}function xe(ue){var D;ue.wasLate?(A=!0,c[E]=!1,f[E]=!1,location.reload()):ue.error?(/Unauthed/.test(ue.error)&&(c[E]=!1,k(M&&M.premium)),D=!0):ee!==ue.time&&(D=!0),D?ye():(S=JSON.parse(oe),c[E]=!1,f[E]=!1)}if(fe=fe||h.getTime(),S){he=jsondiffpatch.diff(S,M);for(ce in he)if(he.hasOwnProperty(ce)&&ce!=="time"){$=!0,M.time=fe,he.time=[S.time,fe];break}$?he=JSON.stringify(he):(he=!1,M.time=S.time),isNaN(M.time)&&(M.time=fe),oe=JSON.stringify(M)}else{M.time=fe,oe=JSON.stringify(M),ye();return}if(ee=M.time,!he){S=JSON.parse(oe),l.save(E,M),c[E]=!1,f[E]=!1;return}Pe=JSON.stringify(he),Pe.length<oe.length?h.storeSession({diff:he,id:E,time:ee}).then(xe,function(){c[E]="failed",f[E]="failed",de()}):ye()},ie/3)}),G.time=G.time||h.getTime(),l.save(E,G,function(){N&&N.resolve(G),N=!1})}G=G||M,M=G,h.hasCloudAccess(!0,E).then(function(he){m||g(),M.uid&&M.uid!==-1&&M.uid!==he.uid||S&&S.time&&S.time<he.time||c[E]==="failed"?(A=!0,c[E]=!1,f[E]=!1,N&&N.resolve(),M.uid!==he.uid?k():location.reload()):(fe=G.time=h.getTime(),M.uid=he.uid)},function(he){he.noAccess&&M.premium?(A=!0,k()):(M.uid=he.uid,c[E]="offline")}).finally(function(){A||le()})},ie),A||(c[E]="pending"),N.promise)},L.quickSave=function(G,ie){return L.save(G,300,ie)},L.isSyncing=function(){var G;for(G in f)if(f.hasOwnProperty(G)&&f[G])return f[G];for(G in c)if(c.hasOwnProperty(G)&&c[G])return c[G];return!1},window.onbeforeunload||h.hasCloudAccess().then(function(){window.onbeforeunload=function(G){if(!h.forceUnload&&L.isSyncing()&&!/#\/projects/.test(location.hash))return"IcoMoon has not finished syncing your data to the cloud."}}),L}}]);angular.module("icomoonApp").factory("message",["$q","$sce",function(t,n){var y,a;return{show:function(l,h,C){return typeof l=="string"?a=l:(a=l.message,h=l.firstButton,C=l.secondButton),this.visible=!0,y=t.defer(),h&&h.caption?this.firstButton={caption:h.caption,focused:h.focused}:this.firstButton=!1,C&&C.caption?this.secondButton={caption:C.caption,focused:C.focused}:this.secondButton=!1,y.promise},setMessage:function(l){a=l,typeof this.$apply=="function"&&this.$apply()},getRawMessage:function(){return a},getMessage:function(){return n.trustAsHtml(String(a))},hide:function(l){this.visible=!1,y.resolve(l)}}}]);angular.module("icomoonApp").factory("hotkeys",function(){var t=[],n=[],y={},a;function l(m){var f;return m=m.toLowerCase(),m.length===1?/[0-9a-z]/.test(m)?m.toUpperCase().charCodeAt(0):-1:(f={cmd:91,command:91,shift:16,ctrl:17,control:17,alt:18,option:18,opt:18,left:37,up:38,right:39,down:40,esc:27},f[m]||-1)}function h(m,f){var c,v=m.length,g=f.length;if(v!==g)return!1;for(c=0;c<g;c+=1)if(m.indexOf(f[c])===-1)return!1;return!0}function C(m){var f,c,v,g=n.length,k;for(c=0;c<g;c+=1)for(f=n[c].keys,k=f.length,v=0;v<k;v+=1)if(h(f[v],m))return n[c];return!1}function x(m){return(m===224||m===93)&&(m=91),m}function d(m){var f=m.getAttribute("contenteditable");return!!(m.type==="text"||m.type==="search"||f&&f.toLowerCase()==="true")}return document.addEventListener("keydown",function(m){var f,c,v,g;d(m.target)||(g=x(m.which),c=t.indexOf(g),c===-1&&(t.push(g),v=!0),m.metaKey||(c=t.indexOf(91),c!==-1&&t.splice(c,1)),f=C(t),f&&f.down&&(v||!f.waitForUp||!f.up)&&(f.scope?f.scope.$apply(f.down):f.down(),f.waitForUp=!0,m.preventDefault()),t.length&&!f?a=setTimeout(function(){t=[]},1e3):clearTimeout(a))}),window.addEventListener("blur",function(){var m=C(t);m&&m.up&&(m.scope?m.scope.$apply(m.up):m.up()),t=[]}),document.addEventListener("keyup",function(m){var f,c,v;if(d(m.target)){t=[];return}v=x(m.which),f=t.indexOf(v),f!==-1?(c=C(t),t.splice(f,1),m.which===91&&(t=[]),c&&(c.waitForUp=!1,c.keys.forEach(function(g){var k=C(g);k&&(k.waitForUp=!1)}),c.up&&(c.scope?c.scope.$apply(c.up):c.up(),m.preventDefault()))):(c=C([v]),c&&c.up&&(c.scope?c.scope.$apply(c.up):c.up(),m.preventDefault()))},!1),y.clear=function(){n=[]},y.add=function(m){var f,c,v,g,k,E,A=m.arr.slice(0),M=[];for(m.id&&(n.forEach(function(S){m.id!==S.id&&M.push(S)}),n=M),f=0,g=A.length;f<g;f+=1){for(E=A[f].keys,typeof E=="string"&&(A[f].keys=E=[E]),c=0,k=E.length;c<k;c+=1)for(E[c]=E[c].trim().split(/\s+\+?\s*/),v=0;v<E[c].length;v+=1)E[c][v]=l(E[c][v]);m.scope&&(A[f].scope=m.scope),m.id&&(A[f].id=m.id)}n=n.concat(A)},y});angular.module("cloud",[]).factory("cloud",["$http","$q",function(t,n){var y={},a={},l,h,C,x=0,d,m,f,c,v,g;function k(E){return["/oldapi/",E].join("")}return y.ping=function(){var E=n.defer(),A;return navigator.onLine?(A=new Date().getTime(),A-x<3e3?E.resolve():t({method:"GET",url:k("authstat"),withCredentials:!0}).then(function(M){x=A,E.resolve(),M&&M.data&&M.data.csrf_token&&(g=M.data.csrf_token)},function(){E.reject()})):E.reject(),E.promise},y.auth=function(){var E=n.defer();return c===!0?E.resolve():c===!1?E.reject():t({method:"GET",url:k("authstat"),withCredentials:!0}).then(function(A){var M=A.data;g=M.csrf_token,M.auth?(y.uid=M.uid,E.resolve(),c=!0):(E.reject(),c=!1)},function(){E.reject()}),E.promise},y.hasCloudAccess=function(E,A){var M=n.defer();return A=A||"",!E&&l?M.resolve(l):m&&m.noAccess?M.reject(m):y.auth().then(function(){t({method:"POST",url:k("getsessiontime"),withCredentials:!0,headers:{"x-csrf-token":g},data:{id:A}}).then(function(S){var N=S.data;N.error?(m={uid:N.uid||v||-1,noAccess:!0},M.reject(m)):(v=N.uid,l={time:N.time,uid:N.uid},M.resolve(l)),N.refTime&&(f=N.refTime*1e3,d=new Date().getTime())},function(){m={uid:v||-1},M.reject(m)})},function(){m={uid:v||-1,noAccess:!0},M.reject(m)}),M.promise},y.getTime=function(){if(f){var E=new Date().getTime();return f+(E-d+E%1e3)}else return new Date().getTime()},y.storeSession=function(E){var A=n.defer();return t({method:"POST",url:k("storesession"),withCredentials:!0,headers:{"x-csrf-token":g},data:E}).then(function(M){A.resolve(M.data)},function(M){A.reject(),(M.status===403||M.status===0)&&(y.forceUnload=!0,location.href="https://icomoon.io/login")}),A.promise},y.getWoff2=function(E){var A=n.defer();return t({method:"POST",url:k("woff2"),withCredentials:!0,headers:{"x-csrf-token":g},data:E}).then(function(M){var S=M.data;S.error?A.reject():S.data&&A.resolve(S.data)},function(){A.reject()}),A.promise},y.getSession=function(E){var A=n.defer(),M=0,S=E.progress,N=E.id||"";return t({method:"POST",url:k("getsession"),headers:{"x-csrf-token":g},withCredentials:!0,data:{id:N,onlyLength:!0}}).then(function(w){M=Number(w.data),t({method:"POST",url:k("getsession"),headers:{"x-csrf-token":g},withCredentials:!0,data:{id:N},progress:function(F){typeof S=="function"&&S({total:M,loaded:F.loaded})}}).then(function(F){A.resolve(F.data)},function(){A.reject()})}),A.promise},y.getPurchases=function(){var E=n.defer();return t({method:"GET",url:k("purchases/0"),headers:{"x-csrf-token":g},withCredentials:!0}).then(function(A){E.resolve(A.data)},function(){E.reject()}),E.promise},y.getExpTime=function(){var E=n.defer();return a.timestamp&&new Date().getTime()-a.timestamp<10368e5?E.resolve(a.daysLeft):t({method:"GET",url:k("purchases/1"),headers:{"x-csrf-token":g},withCredentials:!0}).then(function(A){a.daysLeft=NaN,a.timestamp=new Date().getTime(),A.data.length?(A.data.forEach(function(M){(isNaN(a.daysLeft)||M.daysLeft>a.daysLeft)&&(a.daysLeft=M.daysLeft)}),E.resolve(a.daysLeft)):E.resolve(NaN)}),E.promise},y.host=function(E){var A=n.defer(),M=E.hash;return M===h&&E.onlyDev===!0?(A.resolve(C),A.promise):(h=M,t({method:"POST",url:k("host"),headers:{"x-csrf-token":g},withCredentials:!0,data:E}).then(function(S){C=S.data,A.resolve(C)},function(){A.reject()}),A.promise)},y.unpublish=function(E){var A=n.defer();return t({method:"POST",url:k("unpublish"),headers:{"x-csrf-token":g},withCredentials:!0,data:E}).then(function(M){A.resolve()},function(){A.reject()}),A.promise},y.restoreProjects=function(){var E=n.defer();return t({method:"POST",url:k("restore"),withCredentials:!0,headers:{"x-csrf-token":g}}).then(function(A){console.log(A),A.data?A.data.error?E.reject():E.resolve():E.reject()},function(){E.reject()}),E.promise},y.contact=function(E){var A=n.defer(),M,S="security=2&submitted=IcoMoon";E.email||(E.email="support@icomoon.io",E.msg+="<br /><br />No email address was provided.");for(M in E)S+="&"+(M+"="+E[M]);return t({method:"POST",url:"https://icomoon.io/contact/m.php",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:S}).then(function(N){/error/.test(N.data)?A.reject():A.resolve()},function(){A.reject()}),A.promise},y}]);angular.module("search",[]).factory("search",["$http","$q",function(t,n){var y={},a={query:"",arr:[]},l,h,C=[],x;x||(x=n.defer(),t({method:"GET",url:"icomoon-lib/dict.json"}).then(function(f){C=f.data,x.resolve()}));var d=function(f,c,v){var g,k,E,A,M=0,S=0,N,w=-1,F=!1,U;if(v=v||.65,c.length<=2)return c===f;if(c=c.replace(/\s*/,"").toLowerCase().trim(),!c.length)return!1;if(c=c.split("/"),f=f.replace(/\s*/,"").toLowerCase().trim(),c.length===1)c=c[0];else{for(g=0;g<c.length;g+=1)if(d(f,c[g],g>0?1:!1))return!0;return!1}if(A=c.length,F=Math.min(A,f.length)>=3||Math.abs(f.length-A)/A<=1-v/2,c===f||F&&(f.match(new RegExp("^"+c,"i"))||f.match(new RegExp(c+"$","i"))))return!0;for(g=0;g<A;g+=1)E=c[g],N=f.indexOf(E,w+1),g&&N!==w+1&&(k=!0),N!==-1?(k||(w=N),f=f.split(""),f[N]=" ",f=f.join(""),M+=1):(U=f.indexOf(E),U===-1?S+=1:S+=Math.abs(g-U));return S+=Math.abs(A-f.length),M&&!S&&!k&&A/f.length>v||(M-S)/f.length>v},m=function(f){var c,v,g,k,E,A,M=[],S;if(typeof f=="string"&&(f=[f]),E=C.length,!E)return f;for(c=0;c<f.length;c+=1){for(S=[],v=0;v<E;v+=1)for(A=C[v],g=0,k=A.length;g<k;g+=1)if(!g&&typeof A[g]=="number"&&(k=A[g],A=A.slice(1)),d(A[g],f[c],.8)){S=S.concat(A);break}S.push(f[c]),M=M.concat(S)}return M};return y.match=function(f,c){var v,g,k,E,A,M,S;if(!c||!f)return!1;if(c=c.replace(/\\/g,"").replace(/\./g,"\\."),typeof f=="string")f=f.replace(/[\s\-\,_]+/g," "),f=f.split(" ").concat([f.replace(/\s+/g,"")]);else if(f.slice){for(f=f.slice(0),S=[],g=0;g<f.length;g+=1)f[g]=f[g].replace(/[\s\-\,_]+/g," "),f[g]=[f[g].replace(/\s+/g,"")].concat(f[g].split(" ")),S=S.concat(f[g]);f=S}if(a.query!==c){for(a.query=c,typeof c=="string"&&(c=c.replace(/\s+\/\s+/g,"/").replace(/[\s\-]+/g," ").replace(/,+/g,",").replace(/_/g,""),c=c.split(" ").concat([c.replace(/\s+/g,"")])),S=m(c),a.arr=[],M=[],g=0;g<S.length;g+=1)/\s/.test(S[g])?a.arr=a.arr.concat(S[g].split(/\s+/)):M.push(S[g]);for(M=M.join("/"),g=0;g<a.arr.length;g+=1)a.arr[g]=a.arr[g]+"/"+M;a.arr.length||(a.arr=[M])}for(c=a.arr,E=c.length,v=0,g=0;g<E;g+=1){for(c[g]=c[g].trim(),k=0,A=f.length;k<A;k+=1)if(d(f[k],c[g])){v+=1;break}if(k===A)return!1}return v&&v>=E},y.getExternalResults=function(f,c){var v=n.defer(),g,k=[],E=[],A;return c=c||[],h?h.resolve():(h=n.defer(),t.get("icomoon-lib/map.json").then(function(M){l=M.data,h.resolve()})),h.promise.then(function(){if(!f)v.resolve(k);else{for(A=[],g=0;g<l.sets.length;g+=1)c.indexOf(l.sets[g].metadata.name)===-1&&A.push(g);c=A;for(var M in l.tags)l.tags.hasOwnProperty(M)&&y.match(M,f)&&(E=E.concat(l.tags[M]));for(A=JSON.parse(JSON.stringify(l.sets)),g=0;g<A.length;g+=1)A[g].dir=g,A[g].icons=[];for(g=0;g<E.length;g+=1)A[E[g][0]]&&A[E[g][0]].icons.indexOf(E[g][1])===-1&&A[E[g][0]].icons.push(E[g][1]);for(g=0;g<A.length;g+=1)c.indexOf(g)!==-1&&A[g].icons.length&&k.push(A[g]);k.dir=l.dir,v.resolve(k)}}),v.promise},y}]);angular.module("icomoonApp").directive("miIcon",["template",function(t){var n=t(['<div class="icon{{wide}}">','<svg width="{{width}}" height="{{height}}" viewBox="0 0 {{width}} {{height}}" style="margin-left: calc(50% - {{offset}}em)">','<g transform="scale({{scale}} {{scale}})">{{paths}}</g>',"</svg>","</div>"].join("")),y=t('<path{{attrs}} d="{{d}}"></path>'),a=function(l){var h=[],C,x,d;for(d in l)l.hasOwnProperty(d)&&(C=d.replace(/([A-Z])/g,"-$1").toLowerCase(),x=l[d],h.push(" "+C+'="'+x+'"'));return h.join("")};return{restrict:"E",scope:{icon:"=",height:"@",prevsize:"@"},link:function(l,h){l.$watch(function(){return{icon:l.icon,prevSize:l.prevsize}},function(){var C,x,d,m,f,c=[],v;for(f=l.icon.paths,m=f.length,C=l.icon.attrs||{},x=0;x<m;x+=1)c.push(y.fillup({d:f[x],attrs:C[x]?a(C[x]):""}));d=Number(l.height),v=l.icon.width,isNaN(v)&&(v=d),h.html(n.fillup({width:v,height:d,paths:c.join(""),wide:v>d*1.5?" icon-wide":"",offset:v/d/2,scale:Number(l.prevsize)/d}))},!0)}}}]);angular.module("icomoonApp").controller("MainCtrl",["$scope","$timeout","$state","$q","$http","search","cloud","template","color","swatch","fileSaver","message","hotkeys","glyphs","svgPath","session","project",function(t,n,y,a,l,h,C,x,d,m,f,c,v,g,k,E,A){var M,S,N=1024,w,F,U,L;t.externalSets=[],C.auth().then(function(){t.signedIn=!0},function(){t.signedIn=!1}),E=E(A.metadata.created),t.isSyncing=E.isSyncing,C.hasCloudAccess().then(function(){t.cloudAccess=!0},function(){t.cloudAccess=!1}),Date.now()<16231356e5&&C.getPurchases().then(function(e){var r,s,o;for(r=0,s=e.length;r<s;r+=1)if(o=e[r].product,o===23||o===24||o===25){t.showNotification=function(){var u=E.isSyncing();return!u||u==="offline"};break}}),t.showNotification=function(){return!1},t.scrollPositions={},t.tmp={},t.$on("$stateChangeSuccess",function(){var e=y.current.name;t.tab=e,t.search="",setTimeout(function(){var r=t.scrollPositions[e]||0;window.scrollTo(0,r)},100)}),t.$on("$stateChangeStart",function(){t.scrollPositions[y.current.name]=window.scrollY});function J(){C.getExpTime().then(function(e){var r;e===0&&t.cloudAccess&&(e=1),r=e+" day"+(e===1?"":"s"),e>0&&e<10?(t.expiration=e<4?"error":"warning",t.expMessage="Subscription ends in "+r,t.expMessage2="subscription will end in "+r+"."):e<=0?(t.expiration="error",t.expMessage="Subscription Expired",t.expMessage2="subscription has expired.<br />You may extend it to access your projects again."):t.expiration=!1})}J(),setInterval(J,10368e5);function z(e){var r;setTimeout(function(){if(M.indexOf(e)===0)r=-99999;else try{r=document.getElementById("setH"+e.id).offsetTop-16,r-=document.getElementById("toolbar").offsetHeight}catch(s){r=0}window.scrollTo(0,r)},500)}function G(e){var r,s,o;if(!e||!e.length)return 0;s=e.length;try{o=e[0].id}catch(u){}for((!o||isNaN(o))&&(o=0),r=1;r<s;r+=1)o=e[r]&&e[r].id>o?e[r].id:o;return o+1}t.getNextId=G,t.getSetHash=function(e){var r,s=e.icons,o=s.length,u=[];for(r=0;r<o;r+=1)u.push(s[r].paths.join("")),s[r].tags&&u.push(s[r].tags.join(""));return u.join("").hashCode()};function ie(e,r){var s;e.selection||(e.selection=[]),s=e.selection[r]||{id:G(e.selection)},e.selection[r]=s,s.order=0}function fe(e){var r,s;for(s=e.icons.length,e.selection.length=s,r=0;r<s;r+=1){ie(e,r);try{isNaN(e.icons[r].id)&&(e.icons[r].id=G(e.icons))}catch(o){}}}t.clearSelection=function(){var e,r=M.length;for(e=0;e<r;e+=1)fe(M[e])},t.selectAllNone=function(e,r){var s,o,u,p=0,b=typeof e=="number"?M[e]:e,P=b.selection,O=0;if(o=P.length,u=o/2,r==="undefined"){for(s=0;s<o&&(P[s].order?O+=1:p+=1,!(O>u));s+=1)if(p>u){r=!0;break}}P.forEach(function(B,I){r?(B.order=w,w+=1):ie(b,I)})};function de(e){var r,s,o=0,u,p,b="",P=[],O=0;for(e&&!isNaN(e.setIdx)?(o=e.setIdx,r=o+1):r=M.length,o;o<r;o+=1)if(s=M[o].selection.length,!M[o].invisible)for(e&&e.selectionHash&&(b+=M[o].id),u=0;u<s;u+=1)M[o].icons[u]?M[o].selection[u].order?e&&e.selectionHash?b+=JSON.stringify(M[o].icons[u]):e&&e.onlyCount?O+=1:(p=M[o].selection[u],p.prevSize=p.prevSize||M[o].prevSize,P.push({icon:M[o].icons[u],attrs:M[o].icons[u].attrs,properties:p,setIdx:o,setId:M[o].id,iconIdx:u})):(M[o].selection[u].order=0,isNaN(M[o].selection[u].id)&&(M[o].selection[u].id=G(M[o].selection))):M[o].selection.splice(u,1);return e&&e.selectionHash?b:e&&e.onlyCount?O:(r=P.length,P)}t.getSelectedIcons=de,function(){var e=!1,r=!1;t.getSelectionCount=function(){return r===!1?(r=de({onlyCount:!0}),t.$parent.selectionCount=r,r):(e||(e=setTimeout(function(){r=!1,e=!1},750)),t.$parent.selectionCount=r,r)}}(),t.getSelectionHash=function(){return de({selectionHash:!0})};function le(){var e,r={};for(M=A.iconSets,e=0;e<M.length;e+=1)r[M[e].id]=[];t.searchResults=r,t.project=A,t.pref=A.preferences,t.externalSets=[],t.fontPref=A.preferences.fontPref,t.imagePref=A.preferences.imagePref,t.edit&&t.edit.refresh&&t.edit.refresh(),t.set=M[t.setIdx]}function he(e){function r(s){return typeof s=="number"?{f:s}:s}return Object.keys(e).forEach(function(s){!e[s]||!e[s].map?delete e[s]:e[s]=e[s].map(r)}),e}(function(){var r,s,o,u,p,b,P,O,B,I,X=[],R;for(t.normSize=N,t.mode="select",t.edit={},t.visiblePanels={},S=[],S.idx=0,A.preferences=A.preferences||{},A.preferences.showGlyphs===void 0&&(A.preferences.showGlyphs=!0),A.preferences.showCodes===void 0&&(A.preferences.showCodes=!0),A.preferences.showQuickUse===void 0&&(A.preferences.showQuickUse=!0),A.preferences.showQuickUse2===void 0&&(A.preferences.showQuickUse2=!0),A.preferences.showSVGs===void 0&&(A.preferences.showSVGs=!0),A.preferences.fontPref=A.preferences.fontPref||{prefix:"icon-",metadata:{},metrics:{emSize:1024,baseline:6.25,whitespace:50}},A.preferences.imagePref=A.preferences.imagePref||{prefix:"icon-",png:!0,useClassSelector:!0,color:0,bgColor:16777215},S.size=A.preferences.historySize||50,A.preferences.historySize=S.size,le(),b=M.length,B=[],o=0;o<b;o+=1){for((isNaN(M[o].id)||B.indexOf(M[o].id)!==-1)&&(M[o].id=G(M)),B.push(M[o].id),M[o].prevSize=M[o].prevSize||32,M[o].metadata=M[o].metadata||{name:"Untitled Set"},r=M[o].icons.filter(function(H){return typeof H=="object"}),M[o].icons=r,p=M[o].height,P=r.length,p!==N?(I=N/p,M[o].height=N):I=0,s=[],u=0;u<P;u+=1)r[u]&&((isNaN(r[u].id)||s.indexOf(r[u].id)!==-1)&&(r[u].id=G(r)),s.push(r[u].id),r[u].grid=r[u].grid||0,I&&(O=k(r[u].paths),O.viewBox={width:r[u].width||p,height:p},O.scale(I),r[u].paths=O.getPathData(!0),r[u].width=O.viewBox.width,O.viewBox.width===N&&delete r[u].width,delete r[u].height),r[u].attrs||(r[u].attrs=[]),typeof r[u].colorPermutations=="object"&&(r[u].colorPermutations=he(r[u].colorPermutations)));if(r=M,!r[o].selection||r[o].selection.length!==r[o].icons.length||r[o].selection[0]&&isNaN(r[o].selection[0].id))fe(r[o]);else for(P=r[o].selection.length,u=0;u<P;u+=1)R=r[o].selection[u],R&&R.order&&X.push(R)}for(X.sort(function(H,K){return H.order-K.order}),w=1,o=0,b=X.length;o<b;o+=1)w=w>X[o].order?w:X[o].order;if(w+=1,w>9999999){for(o=0;o<b;o+=1)X[o].order=o+1;w=X.length+1||1}})(),t.changeIcons=function(e,r,s,o){var u=[],p,b=o?t.externalSets[r]:M[r],P,O=s==="delete",B,I=s==="edit",X=!1,R,H,K=function(q){R[q]||(R[q]={}),H=R[q].order,H?ie(b,q):(R[q].order=w,w+=1)},j=function(q){u.push(P[q])},Y=function(q){R[q]=0,!X&&b.icons[q].isMulticolor&&(X=!0),b.icons[q]=0},V=function(){var q,re,te;q=e[0],re=e[1],isNaN(re)&&(re=b.icons.length-1),te=b.icons.splice(q,1)[0],b.icons.splice(re,0,te),te=b.selection.splice(q,1)[0],b.selection.splice(re,0,te),t.search&&(te=t.searchResults[b.id].splice(q,1)[0],t.searchResults[b.id].splice(re,0,te))},Z;if(b){if(R=b.selection,P=b.icons,O)Z=Y;else if(I)Z=j;else if(s==="move"){V();return}else Z=K;if(e.forEach(Z),O)Z=function(q){return!!q},b.icons=P.filter(Z),t.search&&(t.history.ignore=!1,t.searchResults[b.id]=t.searchResults[b.id].filter(function(q,re){return b.selection[re]})),b.selection=R.filter(Z),X&&t.extractColorTheme(b);else if(I){if(B=t.edit,B.selection=!1,u.length===1&&!e.noNavigation){if(t.search){for(B.icons=[],R=[],B.idx=0,p=0;p<b.icons.length;p+=1)t.searchResults[b.id][p]&&(B.icons.push(b.icons[p]),R.push(b.selection[p]),!B.idx&&e[0]===p&&(B.idx=B.icons.length-1));B.selection=R}else B.icons=b.icons,B.idx=e[0];B.properties=!1}else B.icons=u,B.idx=0,B.properties=e.properties,B.selection=b.selection.filter(function(q,re){return t.search?e.indexOf(re)!==-1&&t.searchResults[b.id][re]:e.indexOf(re)!==-1});B.set=b,t.visiblePanels.edit=!0,B.refresh=function(){var q=B.idx;H=t.visiblePanels.edit,t.changeIcons(e,r,s),t.edit.idx=q,t.visiblePanels.edit=H}}}},function(){var e,r=0;t.$watch(function(){return r=A.time,delete A.time,JSON.stringify(A)},function(s,o){n.cancel(e),e=n(function(){U?U=!1:(S.idx>-1&&(S[S.idx]=o),t.history.ignore||S[S.idx]===s?t.history.ignore=!1:(S.idx+=1,S[S.idx]=s,S.splice(S.idx+1),S.length>S.size+1&&(S.shift(),S.idx-=1))),t.history.noUndo=S.idx<1,t.history.noRedo=S.idx>S.length-2,A.time=r,E.save(A)},500)})}(),t.history=function(e){S.idx+e>-1&&S.idx+e<S.length&&(JSON.stringify(S[S.idx+e])===JSON.stringify(A)?(S.splice(S.idx+e,1),e<0&&(S.idx-=1)):(S.idx+=e,A=JSON.parse(S[S.idx]),le(),U=!0)),t.history.noUndo=S.idx<1,t.history.noRedo=S.idx>S.length-2,t.history.idx=S.idx},t.history.noUndo=!0,t.history.noRedo=!0;function Pe(e,r){var u,s=e.length,o;if(r=r||"fill",!s)return!1;var u=e.map(function(p){return p[r]!=="none"?p[r]+" "+p.opacity:""}).filter(function(p){return!!p});for(s=u.length,o=1;o<s;o+=1)if(u[o]!==u[0])return!0;return!1}t.isMulticolor=Pe;function $(e,r,s,o){var u={id:r},p=1,b;return e.paths?(s!==N?(b=k(e.paths),b.viewBox={width:e.width||s,height:s},b=b.scale(N/s),u.width=b.viewBox.width,u.paths=b.getPathData(!0)):(u.paths=e.paths,e.width&&(u.width=e.width)),u.attrs=e.attrs||[]):(s=s||e.viewBox.height,s!==N&&(p=N/s,e.scale(p)),u.paths=e.getPathData(!0),u.attrs=e.getAttrs(!0).map(function(P){return P.strokeWidth>0&&(P.strokeWidth*=p),P}),!isNaN(e.viewBox.width)&&e.viewBox.width!==N&&(u.width=e.viewBox.width)),u.isMulticolor=Pe(u.attrs),u.isMulticolor2=Pe(u.attrs,"stroke"),e.colorPermutations&&(u.colorPermutations=e.colorPermutations),e.tags&&(u.tags=e.tags),e.kerning&&(u.kerning=e.kerning),e.defaultCode&&(u.defaultCode=e.defaultCode),u.grid=o||0,u}function oe(e){var r,s,o,u,p,b={selection:[]},P;if(typeof e=="string"){for(u=M.length,r=0;r<u;r+=1)if(M[r].metadata.name===e)return M[r];return oe({metadata:{name:e}})}if(e=e||{},b.id=G(M),b.metadata=e.metadata||{},delete b.metadata.iconsHash,!b.metadata.name){for(p=[],r=0,u=M.length;r<u;r+=1)p.push(M[r].metadata.name);if(P="Untitled Set",p.indexOf(P)!==-1){for(o=2;p.indexOf(P+" "+o)!==-1;)o+=1;P=P+" "+o}b.metadata.name=P}b.height=N,s=e.icons||[],u=s.length;try{e.prevSize&&e.prevSize<=128?b.prevSize=e.prevSize:b.prevSize=e.selection[0].prevSize||32}catch(O){b.prevSize=32}for(P=G(b.icons),b.icons=[],b.icons[s.length-1]=0,e.selection?(b.selection=e.selection,b.selection.forEach(function(O,B){O.id=B})):fe(b),r=0;r<u;r+=1)s[r].liga&&Array.isArray(s[r].liga)&&(b.selection[r].ligatures=s[r].liga.join(", ")),s[r]=$(s[r],P+r,e.height,s[r].grid||b.metadata.grid),s[r].colorPermutations&&(s[r].colorPermutations=he(s[r].colorPermutations));return b.icons=s,e.invisible===!0&&(b.invisible=!0),e.colorThemes&&(b.colorThemes=e.colorThemes,b.colorThemeIdx=e.colorThemeIdx||0),M.unshift(b),b}t.newSetFromSelection=function(e,r){var s,o,u=[],p,b,P=[],O={icons:u};for(s=!e,e=e||de(),t.search&&(e=e.filter(function(B){return t.searchResults[B.setId][B.iconIdx]})),o=0,p=e.length;o<p;o+=1)u[o]=JSON.parse(JSON.stringify(e[o].icon)),delete u[o].colorPermutations,r&&(P[o]=JSON.parse(JSON.stringify(e[o].properties))),s&&(e[o].properties.order=0);r&&(O.selection=P),b=oe(O),t.extractColorTheme(b),t.search&&(O=[],P.forEach(function(){O.push(!0)}),t.searchResults[b.id]=O),window.scrollTo(0,0)},t.removeSet=function(e,r){var s;r&&(s=de({setIdx:e})),M.splice(e,1),r&&s.length&&t.newSetFromSelection(s,!0)};function ee(e){e&&e.name&&(A.preferences.fontPref.metadata.fontFamily=e.name),e&&e.url&&(A.preferences.fontPref.metadata.fontURL=e.url),e&&e.designer&&(A.preferences.fontPref.metadata.designer=e.designer),e&&e.designerURL&&(A.preferences.fontPref.metadata.designerURL=e.designerURL),e&&e.license&&(A.preferences.fontPref.metadata.license=e.license),e&&e.licenseURL&&(A.preferences.fontPref.metadata.licenseURL=e.licenseURL),e&&e.description&&(A.preferences.fontPref.metadata.description=e.description),e&&e.copyright&&(A.preferences.fontPref.metadata.copyright=e.copyright),e&&e.majorVersion&&(A.preferences.fontPref.metadata.majorVersion=e.majorVersion),e&&e.minorVersion&&(A.preferences.fontPref.metadata.minorVersion=e.minorVersion),e&&e.includeMetadata&&(A.preferences.fontPref.includeMetadata=e.includeMetadata)}function ce(e){var r;return e.isMulticolor===void 0&&(e.isMulticolor=Pe(e.attrs)),e.isMulticolor2===void 0&&(e.isMulticolor2=Pe(e.attrs,"stroke")),(!e.isMulticolor||!e.isMulticolor2)&&(r=d([0,0,0]),e.attrs=e.attrs.map(function(s){if(!e.isMulticolor)try{s.fill&&s.fill!=="none"&&d(s.fill).distance(r)<30&&delete s.fill}catch(o){delete s.fill}if(!e.isMulticolor2)try{d(s.stroke).distance(r)<30&&delete s.stroke}catch(o){delete s.stroke}return s})),e}t.simplifyIcon=ce,function(){var e;t.import=function(r,s,o){var u,p=[],b,P=a.defer(),O,B,I=[],X,R,H,K,j,Y,V,Z=/^[\d\-_\.\s]+|\.[^\.]*$/g,q,re,te,be=!1,we=!1,ve=/svg/,ge,se;function pe(ne){var me,Ae={};return ne=ne.replace(/\.[^\.]*$/,""),me=ne.match(/U0x[0-9A-F]+/i),me&&(me=parseInt(me[0].slice(3),16),Ae.defaultCode=me,ne=ne.replace(/U0x[0-9A-F]+/i,"")),/[^\d]/g.test(ne)&&(ne=ne.replace(/^[\d]+/,"")),ne=ne.replace(/^[\-_\.\s]+|[\-_\.\s]+$/,""),Ae.name=ne,Ae.tags=ne.split("#").filter(function(Ce){return Ce}),Ae}function Se(ne){var me,Ae,Ce,Ee,ae=ne.path,Fe=ne.name,ke=ne.tags,Be=ne.importSize,De;if(!ae)return P.reject(),P.promise;Be&&(j&&typeof j.width=="number"&&j.width===j.height&&Be.width!==Be.height&&Be.height!==j.height&&(Ee=Math.max(Be.width,Be.height),Ae=Ee-Be.height,Ce=Ee-Be.width,ae.translate(0,Ae/2),ae.viewBox.height=Ee,ae.translate(Ce/2,0),ae.viewBox.width=Ee),te.metadata.importSize=Be,!te.prevSize&&typeof Be.height=="number"&&Be.height<=128&&(te.prevSize=Be.height)),typeof O!="number"&&(O=!1);var Me=$(ae,G(te.icons),!1,O);return!Me.tags&&(ke||Fe)&&(ke&&ke.length?Me.tags=ke:Fe&&(Me.tags=[Fe])),isNaN(ne.defaultCode)||(Me.defaultCode=ne.defaultCode),ce(Me),te.icons.unshift(Me),te.selection=te.selection||[],De={order:0,id:G(te.selection)},ke&&ke.length&&(De.name=Me.tags.join(", ")),ae.liga&&Array.isArray(ae.liga)&&(De.ligatures=ae.liga.join(", ")),te.selection.unshift(De),Me}return r?(H=r.length,H||c.show("Please choose SVG images, SVG fonts or JSONs exported by IcoMoon."),typeof s=="number"?s>=0&&(te=M[s],q=a.defer()):s&&s.icons?te=s:re=!0,function(){for(B=0;B<H;B+=1)if(ve.test((r[B].type||"").replace(/.*\.([^\.]*)/,"$1"))){if(V=g(r[B].file),V.length===1&&!j)for(K=H,K>10&&(K=10),j={},X=0;X<K&&K>4;X+=1)try{se=g(r[X].file),se={width:Math.round(se[0].viewBox.width),height:Math.round(se[0].viewBox.height)},!j.width||!j.height?j=se:(j.width=Math.max(j.width,se.width),j.height=Math.max(j.height,se.height))}catch(me){se=!1}if(V.length>1){for(se=V.metadata||{},se.name||(se.name=r[B].name.replace(Z,"")),se=oe({icons:V,metadata:se}),X=0;X<se.icons.length;X+=1)delete se.icons[X].attrs;V.fontMetrics&&c.show({message:"The glyphs in your SVG font were loaded.<br />Use this font's metrics and metadata when exporting fonts?",firstButton:{caption:"Yes"},secondButton:{caption:"No",focused:!0}}).then(function(me){me==="Yes"&&(A.preferences.fontPref.metrics.baseline=V.fontMetrics.baseline,A.preferences.fontPref.metrics.whitespace=V.fontMetrics.whitespace,ee(V.metadata),le())})}else{try{se={width:Math.round(V[0].viewBox.width),height:Math.round(V[0].viewBox.height)}}catch(me){se=!1}if(be=be||V[0].strokeWarning,we=we||V[0].hasImage,te)q||(q=a.defer(),q.resolve());else{if(M.length>0)try{for(b=[],e&&M.indexOf(e)!==-1&&b.push(e),X=0;X<M.length&&M[X].metadata.name.indexOf("Untitled Set")!==-1;X+=1)b.push(M[X]);for(b.length===0&&M.length>0&&(b=[M[0]]),X=0;X<b.length;X+=1)if((b[X].metadata.importSize||{}).height===se.height){te=b[X];break}te||(te=oe({prevSize:se}))}catch(me){te=oe()}else te=oe();q=a.defer()}for(te.invisible=!1,e=te,p=[],R=0;R<te.selection.length;R+=1)try{p.push(te.selection[R].name||te.icons[R].tags[0])}catch(me){}for(R=0;R<H;R+=1)if(X=p.indexOf(pe(r[R].name).name),X!==-1&&p.indexOf(pe(r[R].name).name,X+1)===-1&&(te.icons[X].tags.length!==1||te.selection[X].name&&te.icons[X].tags[0]!==te.selection[X].name||!isNaN(te.icons[X].defaultCode)||!isNaN(te.selection[X].code)||te.selection[X].ligatures&&te.selection[X].ligatures.length)){c.show({message:"Replace existing icons?<br />By replacing, your settings (tags, char codes, etc.) won't&nbsp;change.",firstButton:{caption:"Replace"},secondButton:{caption:"Reimport",focused:!0}}).then(function(me){q.resolve(me==="Replace")});break}R===H&&q.resolve(),typeof r[B].grid=="number"?O=r[B].grid:(O=t.getGridSize(te),O=O&&O[0]),Y=pe(r[B].name),q.promise.then(function(me,Ae,Ce){return function(Ee){X=-1,Ee&&(X=p.indexOf(me.name),X!==-1&&(Ae=ce($(Ce)),te.icons[X].paths=Ae.paths,te.icons[X].width=Ae.width,te.icons[X].attrs=Ae.attrs,I.push(te.icons[X]))),X===-1&&(I.push(Se({path:Ce,name:me.name,tags:me.tags,importSize:Ae,defaultCode:me.defaultCode})),p&&p.unshift(""))}}(Y,se,V[0]))}}else{try{se=JSON.parse(r[B].file)}catch(me){var ne="<strong>Invalid JSON file</strong>";try{ne+="<br>"+me.message}catch(Ae){}c.show(ne);continue}if(ge=se.IcoMoonType,ge==="icon-set")oe(se);else if(ge==="selection")(function(){var me,Ae,Ce,Ee={};for(X=0,K=se.icons.length;X<K;X+=1)Ce=se.icons[X].icon,Ae=Ce.grid||"undefined",Ee.hasOwnProperty(Ae)?me=Ee[Ae]:(me=Ee[Ae]={},me.icons=[],me.selection=[],me.height=se.height,me.metadata=se.metadata),me.icons.push(Ce),me.selection.push(se.icons[X].properties);t.clearSelection();for(Ae in Ee)Ee.hasOwnProperty(Ae)&&oe(Ee[Ae]);se.preferences&&c.show({message:"Your icon selection was loaded.<br />Would you like to load all the settings stored in your selection file?",firstButton:{caption:"Yes"},secondButton:{caption:"No",focused:!0}}).then(function(ae){ae==="Yes"&&(A.preferences=se.preferences,le())})})();else if(Array.isArray(se.iconSets))try{se.iconSets.reverse().forEach(function(me){oe(me)})}catch(me){}}q||(q=a.defer(),q.resolve()),q.promise.then(function(){te&&I.length&&(t.extractColorTheme(te),xe(I,te)),re&&z(te),o||(t.search=""),we?c.show('Embedded or referenced images get ignored.<br>Note that raster images, which consist of pixels, are not scalable and embedding them in SVG does not make them vector.<br><br><a target="_blank" href="https://en.wikipedia.org/wiki/Vector_graphics">Learn about vector versus raster graphics.</a>'):be&&c.show('Strokes get ignored when generating fonts or CSH files.<br />You may <a target="_blank" href="https://icomoon.io/docs/#stroke-to-fill">convert them to fills</a> and reimport your SVG(s).'),P.resolve()})}(),P.promise):(P.reject(),P.promise)}}(),t.showInfo=function(e){var r=M[e];t.setIdx=e,t.visiblePanels.info=!0,t.metadata=r.metadata,t.iconsCount=r.icons.length,t.set=r,t.colorTheme=t.extractColorTheme(r)},t.hasValidTheme=function(e){var r;if(e.colorThemes)try{return r=e.colorThemes[e.colorThemeIdx],r.length>=2&&r.length<=15}catch(s){return!1}return!1},t.setSet=function(e){var r=M[e];t.setIdx=e,t.set=r,t.colorTheme=t.extractColorTheme(r),t.metadata=r.metadata},t.getGridSize=function(e){var r,s,o,u;if(e=e||t.set,!(!e||!e.icons)){for(u=e.icons.length,r=0;r<u;r+=1)if(s=e.icons[r],s.grid){if(!o)o=[s.grid];else if(o.indexOf(s.grid)===-1&&(o.push(s.grid),o.length>3))break}if(o)return o.toString=function(){var p,b;if(this.length){if(this.length>1)return b=this.slice(0),b.forEach(function(P){P=P||"unknown"}),p="mixed",this.length<4&&(p+=" ("+b.join(", ")+")"),p;if(this.length===1)return this[0]||"unknown"}else return"unknown"},o.sort()}};function ye(e){return e=e.slice(0),e.forEach(function(r,s){e[s]=parseInt(r.join(""),10)}),e.sort().join("")}t.colorThemeKey=ye,t.clearAttrs=function(e){var r=e.some(function(s){return s.strokeWidth>0});return r?e.map(function(s){return delete s.stroke,s.fill!=="none"&&delete s.fill,s}):[]},t.removeColorTheme=function(e,r){var s,o,u;r=r||t.set,!(e>=r.colorThemes.length)&&(e===r.colorThemeIdx&&t.selectColorTheme(0),e<r.colorThemeIdx&&(r.colorThemeIdx-=1),t.colorThemeIdx.value=r.colorThemeIdx,u=r.colorThemes.splice(e,1),s=ye(u[0]),o=r.colorThemes.length===0,r.icons.forEach(function(p){try{delete p.colorPermutations[s]}catch(b){}o&&(p.attrs=t.clearAttrs(p.attrs))}),o||ue(r))},t.removeAllColors=function(e){e=e||t.set,e.icons.forEach(function(r){try{delete r.colorPermutations,delete r.isMulticolor2,delete r.isMulticolor,e.colorThemes=[],r.attrs=t.clearAttrs(r.attrs),t.visiblePanels.info=!1}catch(s){}})},t.downloadColorTheme=function(e,r){var s="icomoon_color_theme",o=f();r=r||t.set,!(e>=r.colorThemes.length)&&(o.add(s+".ase",m(r.colorThemes[e]).getASE({name:"IcoMoon Theme"})),o.add(s+".svg",m(r.colorThemes[e]).getSVG()),o.save(s+".zip"))},t.editColorTheme=function(e,r,s){var o,u,p,b,P,O,B;for(r=r||t.set,typeof s!="number"&&(s=r.colorThemeIdx),T(r,s),o=r.colorThemes[s],O=ye(o),e.forEach(function(I,X){o[X]=d(I.hex).toArray()}),P=ye(o),u=0;u<r.icons.length;u+=1)if(p=r.icons[u],(!p.colorPermutations||!p.colorPermutations[O])&&xe([p],r),B=p.colorPermutations[P]=p.colorPermutations[O],delete p.colorPermutations[O],B)for(b=0;b<p.attrs.length;b+=1)B[b]&&B[b].f>=0&&p.attrs[b].fill!=="none"&&(p.attrs[b].fill=d(o[B[b].f]).toString()),B[b]&&B[b].s>=0&&p.attrs[b].stroke&&p.attrs[b].strokeWidth>0&&(p.attrs[b].stroke=d(o[B[b].s]).toString())};function xe(e,r){var s,o,u,p,b;(!r.colorThemes||!r.colorThemes[0])&&t.extractColorTheme(r),!(!r.colorThemes||!r.colorThemes[0])&&(o=r.colorThemes[r.colorThemeIdx].slice(0),p=ye(o),e.forEach(function(P){if(!P.colorPermutations||!P.colorPermutations[p]){for(o.forEach(function(O,B){o[B]=d(O).toString()}),s=[],u=0;u<P.attrs.length;u+=1)s[u]={},P.attrs[u]&&P.attrs[u].fill&&P.attrs[u].fill!=="none"&&(b=o.indexOf(d(P.attrs[u].fill).toString()),b===-1&&(b=0),s[u].f=b),P.attrs[u]&&P.attrs[u].strokeWidth>0&&(b=o.indexOf(d(P.attrs[u].stroke).toString()),b===-1&&(b=0),s[u].s=b);P.colorPermutations=P.colorPermutations||{},P.colorPermutations[p]=s}}))}t.addColorPermutations=xe,t.addColorTheme=function(e,r,s){var o,u=0,p,b,P;function O(B,I){var X,R;return B.length>I.length?(X=B,R=I):(X=I,R=B),X=X.map(function(H){return JSON.stringify(H)}),R.every(function(H){return X.indexOf(JSON.stringify(H))!==-1})}if(r=r||t.set,o=r.colorThemes,e=e.slice(0),e.forEach(function(B,I){B&&B.hex&&(B=B.hex),(typeof B=="string"||!B.length)&&(e[I]=d(B).toArray())}),e.sort(function(B,I){return d(B).toHSL().l-d(I).toHSL().l}),!o||!o[0])o=[e];else{for(o=o.filter(function(B){var I=!0;return p=ye(B),B.length<e.length&&O(B,e)&&(I=!1),I||r.icons.forEach(function(X){try{delete X.colorPermutations[p]}catch(R){}}),I}),r.colorThemes=o,b=ye(e),u=0;u<o.length&&(P=o[u],p=ye(P),!(p===b||O(e,P)));u+=1);u===o.length&&o.push(e),xe(r.icons,r)}return r.colorThemes=o,s&&t.selectColorTheme(u),u},t.importColorTheme=function(e){var r,s,o;if(o={},!!e.length){if(/ase/.test(e[0].type))o.ase=e[0].file;else if(/svg/.test(e[0].type))o.svg=e[0].file;else try{o.json=JSON.parse(e[0].file)}catch(u){}if(r=m(o).colors,r&&r.length){for(t.newColorTheme=[],s=0;s<r.length;s+=1)t.newColorTheme.push({hex:d(r[s]).toNumber()});t.newColorTheme.idx=0}}},t.getColorString=function(e){return d(e).toString()};function ue(e){e=e||t.set,t.currentTheme=e.colorThemes[e.colorThemeIdx].slice(0),t.currentTheme.forEach(function(r,s){t.currentTheme[s]={hex:d(r).toNumber()}}),t.currentTheme.idx=t.currentTheme.idx||0}function D(e){var r={},s,o,u,p,b,P,O,B,I,X;function R(Y,V){var Z,q=0,re;if(!isNaN(Y)&&!isNaN(V))q=Y-V;else if(Y&&Y.distance&&V&&V.distance)q=Y.distance(V);else if(Array.isArray(Y)&&Array.isArray(V)){for(re=Math.min(Y.length,V.length),Z=0;Z<re;Z+=1)q+=Math.pow(R(Y[Z],V[Z]),2);q=Math.sqrt(q)}return q}function H(Y,V){var Z,q=Y.length<V.length?Y.length:V.length,re=0;for(Z=0;Z<q;Z+=1)re+=Math.pow(R(Y[Z],V[Z]),2);return Math.sqrt(re)}function K(Y){var V=[];return Y.forEach(function(Z){var q=[];Y.forEach(function(re){Z!==re&&q.push(Z.color.distance(re.color,{l:1,a:0,b:0}))}),V.push(q)}),V}function j(Y){var V=0;function Z(q,re){var te,be;if(re===1){typeof Y.func=="function"&&Y.func(),V+=1;return}if(!(!isNaN(Y.max)&&V>=Y.max)){for(te=0;te<re-1;te+=1)Z(q,re-1),re%2===0?(be=q[te],q[te]=q[re-1],q[re-1]=be):(be=q[0],q[0]=q[re-1],q[re-1]=be);Z(q,re-1)}}Z(Y.arr,Y.arr.length)}return o=e.theme1.map(function(Y){return d(Y).toNumber()}),u=e.theme2.map(function(Y,V){return{color:d(Y),idx:V}}),s=[],e.icon.attrs.forEach(function(Y,V){var Z,q,re;Y.fill&&Y.fill!=="none"&&(Z=d(Y.fill),q=o.indexOf(Z.toNumber()),q<0&&(q=0),s.push({color:Z,t1Ref:q,type:"f",idx:V})),Y.stroke&&Y.strokeWidth>0&&(re=d(Y.stroke),q=o.indexOf(re.toNumber()),q<0&&(q=0),s.push({color:re,t1Ref:q,type:"s",idx:V}))}),p=s.map(function(Y){return Y.color}),P=K(s),B=s.map(function(Y){return Y.color.toLAB().l}),j({arr:u,func:function(){var Y=[],V,Z,q,re;s.forEach(function(te,be){var we=te.t1Ref%u.length;te.color=u[we].color,Y[be]=u[we].idx}),b=s.map(function(te){return te.color}),O=K(s),I=s.map(function(te){return te.color.toLAB().l}),V=H(p,b),Z=H(P,O),q=H(B,I),re=Math.sqrt(V*V+Z*Z+10*q*q),(isNaN(r.dist)||r.dist>re)&&(r.dist=re,r.colors=Y)},max:720}),X=[],s.forEach(function(Y,V){var Z=X[Y.idx]||{};Z[Y.type]=r.colors[V],X[Y.idx]=Z}),X}function W(e){var r=[],s,o,u,p,b=[],P=[],O=[];for(s=0;s<e.theme1.length;s+=1)for(o=0;o<e.theme2.length;o+=1)r.push({d:e.theme1[s].distance(e.theme2[o],e.lab),pair:[s,o]});for(r.sort(function(B,I){return B.d-I.d}),s=0;s<r.length;s+=1)u=r[s].pair[0],p=r[s].pair[1],b.indexOf(u)===-1&&P.indexOf(p)===-1&&(b.push(u),P.push(p),O[u]=p);return O}function T(e,r){var s,o,u;try{s=e.colorThemes[e.colorThemeIdx].slice(0),u=[],s.forEach(function(p,b){u[b]=d(p).toString()}),o=ye(s),e.icons.forEach(function(p){var b;if((!p.colorPermutations||p.colorPermutations.length!==void 0)&&(p.colorPermutations={}),!p.colorPermutations[o]||p.colorPermutations[o].length!==p.attrs.length)for(p.colorPermutations[o]=[],b=0;b<p.attrs.length;b+=1)p.colorPermutations[o][b]=p.colorPermutations[o][b]||{},p.attrs[b]&&p.attrs[b].fill&&p.attrs[b].fill!=="none"&&(p.colorPermutations[o][b].f=u.indexOf(d(p.attrs[b].fill).toString()),p.colorPermutations[o][b].f===-1&&(p.colorPermutations[o][b].f=0)),p.attrs[b]&&p.attrs[b].stroke&&p.attrs[b].strokeWidth>0&&(p.colorPermutations[o][b].s=u.indexOf(d(p.attrs[b].stroke).toString()),p.colorPermutations[o][b].s===-1&&(p.colorPermutations[o][b].s=0))})}catch(p){}}t.selectColorTheme=function(e){var r,s,o,u,p,b,P=t.set;P.colorThemeIdx!==e&&(r=P.colorThemes[P.colorThemeIdx].slice(0),o=ye(r),T(P,P.colorThemeIdx),P.colorThemeIdx=e,b=P.colorThemes[e].slice(0),u=ye(b),r.forEach(function(O,B){r[B]=d(O)}),b.forEach(function(O,B){b[B]=d(O)}),b.forEach(function(O,B){b[B]=O.toString()}),P.icons.forEach(function(O){if(O.colorPermutations&&O.colorPermutations[o])for((!O.colorPermutations[u]||!O.colorPermutations[u][0]||O.colorPermutations[u].indexOf(null)!==-1)&&(O.colorPermutations[u]=D({icon:O,theme1:r,theme2:b})),p=O.colorPermutations[u],s=0;s<O.attrs.length;s+=1)O.attrs[s].fill&&O.attrs[s].fill!=="none"&&(O.attrs[s].fill=b[p[s]&&p[s].f||0]),O.attrs[s].stroke&&O.attrs[s].stroke!=="none"&&(O.attrs[s].stroke=b[p[s]&&p[s].s||0])}),ue())},t.extractColorTheme=function(e){var r,s=[],o,u,p,b,P,O=e.icons.length,B,I;function X(R){delete R.colorPermutations}for(T(e,e.colorThemeIdx),p=0;p<O;p+=1)if(P=e.icons[p],P.attrs)for(b=0;b<P.attrs.length;b+=1){if(o=P.attrs&&P.attrs[b]&&P.attrs[b].fill,o&&o!=="none"&&(r=d(o).toString(),r&&s.indexOf(r)===-1&&(s.push(r),s.length>15)))return e.icons.forEach(X),e.colorThemes=[],[];if(u=P.attrs&&P.attrs[b]&&P.attrs[b].stroke,u&&P.attrs[b].strokeWidth>0&&(r=d(u).toString(),r&&s.indexOf(r)===-1&&(s.push(r),s.length>15)))return e.icons.forEach(X),e.colorThemes=[],[]}if(s.length<=1)if(e.colorThemes&&e.colorThemes[e.colorThemeIdx])s=e.colorThemes[e.colorThemeIdx];else return e.colorThemes=[],[];for(e.colorThemeIdx=t.addColorTheme(s,e),t.colorThemeIdx={value:e.colorThemeIdx},t.newColorTheme=[],B=Math.round(192/s.length),p=0;p<s.length;p+=1)I=32+B*p,t.newColorTheme[p]={hex:I+I*256+I*65536};return ue(e),t.newColorTheme.idx=0,e.colorThemes[e.colorThemeIdx]},t.duplicateColor=function(){var e=t.newColorTheme;e.length<15&&(e.splice(e.idx,0,{hex:e[e.idx].hex}),e.idx+=1,e.idx>e.length-1&&(e.idx=e.length-1))},t.removeColor=function(){var e=t.newColorTheme;e.length>2&&(e.splice(e.idx,1),e.idx-=1,e.idx<0&&(e.idx=0))},t.editMetadata=function(e){e&&(t.metadata=e.metadata),t.visiblePanels.info=!1,t.visiblePanels.metadata=!0},t.showGridReset=function(){t.visiblePanels.info=!1,t.visiblePanels.gridReset=!0},t.showPaddings=function(){var e=t.getGridSize();!e||!e[0]||e.length>1?t.showGridReset():(t.tmp.gridSize=e,t.tmp.minPadding=-e+1,t.tmp.maxPadding=e,t.tmp.padding=Math.round(e/2),t.visiblePanels.info=!1,t.visiblePanels.paddings=!0)},t.resetGrids=function(e,r){r=r||t.set,e=e||0,r.icons.forEach(function(s){s.grid=e}),t.visiblePanels.gridReset=!1},t.addPadding=function(e,r){var s,o,u,p=t.tmp.gridSize,b,P,O;r=r||t.set,b=r.height||N,e=Math.round(e),e&&(O=p/(e+p),P=p+e,s=o=b*O*(Math.floor(e/2)/p),u=e%2,u===1?o+=b*O/p:u===-1&&(s+=b*O/p),r.icons.forEach(function(B){var I=k(B.paths);I.scale(O),I.translate(s,o),B.paths=I.getPathData(!0),B.grid=P}),r.prevSize=Math.round(r.prevSize/p*P),t.visiblePanels.paddings=!1)},t.showRearrange=function(e){var r=M[e];t.setIdx=e,t.visiblePanels.rearrange=!0,t.set=r},t.rearrange=function(){var e=[],r,s,o=t.tmp.arrangeSelection,u=t.tmp.orderBy,p=t.set;if(e=p.icons.map(function(b,P){return{icon:b,s:p.selection[P]}}),o&&(e=e.filter(function(b){return!!b.s.order})),!u||u==="reverse")if(o)for(e.reverse(),s=0,r=0;r<p.icons.length;r+=1)p.selection[r].order&&(p.selection[r]=e[s].s,p.icons[r]=e[s].icon,s+=1);else p.icons.reverse(),p.selection.reverse();else if(u==="name"?e.sort(function(b,P){return b=b.s.name||b.icon.tags&&b.icon.tags[0],P=P.s.name||P.icon.tags&&P.icon.tags[0],b>P?1:b<P?-1:0}):u==="code"&&e.sort(function(b,P){return b=b.s.code||b.icon.defaultCode,P=P.s.code||P.icon.defaultCode,b-P}),o)for(s=0,r=0;r<p.icons.length;r+=1)p.selection[r].order&&(p.selection[r]=e[s].s,p.icons[r]=e[s].icon,s+=1);else for(p.icons=[],p.selection=[],r=0;r<e.length;r+=1)p.icons[r]=e[r].icon,p.selection[r]=e[r].s;t.visiblePanels.rearrange=!1},t.getMultiples=function(e,r){var s=[],o,u,p,b,P;for(typeof e=="number"&&(e=[e]),p=e.length,r=Math.floor((r||4)/p)||1,u=0;u<p;u+=1){if(b=e[u],!b||isNaN(b)){if(p===1)return[16,20,24,32];b=16}for(o=0;o<r&&(P=b*(o+1),!(P>100));o+=1)s.indexOf(P)===-1&&s.push(P)}return s.length<r&&(P=s[0]/2,s[0]%2===0&&P>=12&&s.unshift(P)),s},t.moveSet=function(e,r){var s,o=M.indexOf(e);s=o+r,o!==-1&&s>-1&&s<M.length&&(M.splice(o,1),M.splice(s,0,e))},t.hasAttrs=function(e){var r;if(e.attrs&&e.attrs.length){for(r=0;r<e.attrs.length&&!(Object.keys(e.attrs[r]).length>0);r+=1);if(r<e.attrs.length)return!0}return!1},t.downloadSet=function(e){var r,s,o;e=e||t.set,r=JSON.parse(JSON.stringify(e)),delete r.id,delete r.invisible,r.icons.forEach(function(u,p){try{o=r.selection[p].code,o&&(u.defaultCode=o)}catch(b){}u.defaultCode||delete u.defaultCode,u.isMulticolor||delete u.isMulticolor,u.isMulticolor2||delete u.isMulticolor2,t.hasAttrs(u)||(delete u.attrs,delete u.colorPermutations),delete u.id}),r.selection.forEach(function(u){delete u.tempChar,delete u.id,delete u.code}),r.preferences=A.preferences,r.IcoMoonType="icon-set",r.metadata.iconsHash=t.getSetHash(e),f().save(r.metadata.name+".json",JSON.stringify(r,null,"  "))};function _(e){var r=e.map(function(o){return o.icon}),s=e.map(function(o){return o.properties});M.forEach(function(o){o.icons=o.icons.filter(function(u){return r.indexOf(u)===-1}),o.selection=o.selection.filter(function(u){return s.indexOf(u)===-1})})}t.copySelectionToSet=function(e,r,s){var o,u=[],p,b,P=[],O,B,I=M[e];if(I){O=de(),t.search&&(O=O.filter(function(H){return t.searchResults[H.setId][H.iconIdx]})),p=G(I.icons),I.selection=I.selection||[],b=G(I.selection);var X=I.icons.map(function(H,K){var j=I.selection[K].code;return j||H.defaultCode}),R;for(o=0;o<O.length;o+=1){if(B=JSON.parse(JSON.stringify(O[o].icon)),B.id=p+o,B.defaultCode=O[o].properties.code||B.defaultCode,R=X.indexOf(B.defaultCode),!B.defaultCode)delete B.defaultCode;else if(s===void 0&&R!==-1){c.show({message:"There is a conflict between the codes of the glyphs in your selection and the ones in the set.<br />Which character codes do you want to keep?",firstButton:{caption:"Target Set",focused:!0},secondButton:{caption:"Selection"}}).then(function(H){t.copySelectionToSet(e,r,H!=="Selection")});return}u.push(B),B=JSON.parse(JSON.stringify(O[o].properties)),B.id=b+o,B.order=0;try{s?delete B.code:(delete I.selection[R].code,delete I.icons[R].defaultCode)}catch(H){}P.push(B)}r&&_(O),t.search&&(B=[],u.forEach(function(){B.push(!0)}),t.searchResults[I.id]=B.concat(t.searchResults[I.id])),I.icons=u.concat(I.icons),I.selection=P.concat(I.selection)}},function(){var e,r,s=navigator.userAgent.indexOf("Mac OS X")!==-1;v.clear(),v.add({arr:[{keys:"opt",down:function(){e=t.mode,t.mode="edit"},up:function(){t.mode=e||r||"select",e=!1}},{keys:["ctrl + alt","cmd + opt"],down:function(){r=e||t.mode||"select",t.mode="delete"},up:function(){t.mode=r}},{keys:["ctrl + z","cmd + z"],down:function(){t.history(-1)}},{keys:["ctrl + y","ctrl + shift + z","cmd + shift + z","cmd + y"],down:function(){t.history(1)}},{keys:"esc",up:function(){Object.keys(t.visiblePanels).forEach(function(o){t.visiblePanels[o]=!1})}}],scope:t}),s?t.tooltips={delMode:"Remove (Cmd + Opt)",editMode:"Edit (Opt)",undo:"Undo (Cmd + Z)",redo:"Redo (Cmd + Shift + Z)"}:t.tooltips={delMode:"Remove (Ctrl + Alt)",editMode:"Edit (Alt)",undo:"Undo (Ctrl + Z)",redo:"Redo (Ctrl + Shift + Z)"},t.tooltips.selectMode="Select"}(),t.vendorPrefix=function(){var e=window.getComputedStyle(document.documentElement,"");return(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||e.OLink===""&&["","o"])[1]}(),t.$watch("search",function(e){var r=[],s,o,u,p,b,P;if(t.importExternalIcons(!0),e&&(t.history.ignore=!0),t.externalSets=[],Object.keys(t.searchResults).length===0&&(t.scrollPositions[y.current.name]=window.scrollY),!e){t.history.ignore=!1,P=t.scrollPositions[y.current.name]||0,setTimeout(function(){window.scrollTo(0,P)},100),t.searchResults={};return}for(s=0,p=M.length;s<p;s+=1){for(u=0,b=M[s].icons.length;u<b;u+=1)o=M[s].icons[u],t.searchResults[M[s].id]=t.searchResults[M[s].id]||[],t.searchResults[M[s].id][u]=h.match(o.tags,e);r.push(t.searchResults[M[s].id])}if(y.current.name!=="select"){t.history.ignore=!1;return}t.externalSets.status=!0,t.externalSets.status="Connecting...",n.cancel(F),window.scrollTo(0,0),F=n(function(){C.ping().then(function(){if(t.search!==e){t.history.ignore=!1;return}t.externalSets.status="Searching other packs...",t.externalSets.icon=!0;var O=0,B=[];M.forEach(function(I){B.push(I.metadata.name)}),C.getPurchases().then(function(I){var X,R,H=[];for(X=0,R=I.length;X<R;X+=1)H[X]=I[X].product;h.getExternalResults(e,B).then(function(K){if(t.search!==e){t.history.ignore=!1;return}K.forEach(function(j){var Y=H.indexOf(j.productId);j.premium&&Y!==-1?(j.premium=!1,j.purchased=!0,j.dir=I[Y].svgslink):j.dir="/app/icomoon-lib/"+K.dir+"/"+j.dir+"/",j.selection=[];var V;for(V=0;V<j.icons.length;V+=1)j.selection.push({order:0,id:V});O+=j.icons.length}),t.externalSets=K,t.externalSets.icon=!1,t.externalSets.status=O+" results from other packs"})})},function(){t.externalSets.status="Connection Failed",t.externalSets.icon=!1,t.history.ignore=!1})},300)}),t.importExternalIcons=function(e,r){var s,o,u,p,b,P,O,B,I,X,R=t.search;function H(K,j,Y){return function(V){K.files=K.files||[],K.files.push({type:"image/svg",file:V.data,name:R,grid:Y}),j.resolve(K)}}if(s=t.externalSets,s)for(p=0,P=s.length;p<P;p+=1){for(B=s[p].selection,I=!1,u=[],b=0,O=B.length;b<O;b+=1)B[b].order&&(I||(X=JSON.parse(JSON.stringify(s[p].metadata)),X.name+=" (subset)",I=oe(X.name),I.metadata=X,I.prevSize=s[p].prevSize),o=a.defer(),u.push(o.promise),l({method:"GET",url:s[p].dir+s[p].icons[b]+".svg",withCredentials:s[p].purchased}).then(H(I,o,s[p].grid)),B[b].order=0);u.length&&a.all(u).then(function(K){var j=K[0],Y=j.files;delete j.files,t.history.ignore=!1,t.import(Y,j,!0).then(function(){var V,Z=Y.length;for(V=0;V<Z;V+=1)e&&(j.selection[V].order=V+1),t.searchResults[j.id]=t.searchResults[j.id]||[],t.searchResults[j.id][V]=h.match(j.icons[V].tags,t.search);z(j),r&&(t.search="")})})}},t.hasExternalSelection=function(){var e,r,s=t.externalSets.length,o;for(e=0;e<s;e+=1)for(o=t.externalSets[e],r=0;r<o.selection.length;r+=1)if(o.selection[r].order)return!0;return!1};function Q(e){return/^stroke=/.test(e)||/^fill=/.test(e)||/^opacity/.test(e)?0:1}t.stringifyAttrs=function(e,r){var s=[],o,u,p,b=r&&r.props,P=void 0,O;for(p in e)if(e.hasOwnProperty(p))if(o=p.replace(/([A-Z])/g,"-$1").toLowerCase(),u=e[p],r&&r.scale&&o==="stroke-width"&&(u*=r.scale,u=t.fixed(u,4)),(o==="stroke"||o==="fill")&&u!=="none"&&(u=d(u),r&&r.xaml?u=u.toString({hex:!0,argb:!0,forCSS:!0}):u=u.toString({hex:!0,forCSS:!0}),o==="fill"&&r.fillIdx>0&&(s.push({key:o,val:u}),o="style",u="fill: var(--color"+r.fillIdx+", "+u+")"),o==="stroke"&&r.strokeIdx>0&&(s.push({key:o,val:u}),o="style",u="stroke: var(--color"+r.strokeIdx+", "+u+")")),o=="style"){P=P||s.length;try{O=s[P].val+"; "+u}catch(B){O=u}s[P]={key:o,val:O}}else s.push({key:o,val:u});return e&&e.strokeWidth>0&&!e.stroke&&s.push({key:"stroke",val:r&&r.defaultColor||"#000"}),(!e||!e.fill)&&s.push({key:"fill",val:r&&r.defaultColor||"#000"}),s=s.filter(function(B){var I=!1;return I=B.key.toLowerCase()==="opacity"&&String(B.val)==="1"||B.key.toLowerCase()==="visibility"&&/false/i.test(String(B.val)),!(I||b&&!b[B.key])}),r&&r.css?s=s.map(function(B){return(B.key==="fill"?"color":B.key)+":"+B.val+"; "}).join("; ")+";":r&&r.xaml?s=s.map(function(B){var I=String(B.key).toLowerCase(),X=String(B.val).toLowerCase();if(X==="none")return"";if(I==="stroke-width")I="StrokeThickness";else{if(I==="stroke-linecap")return X==="butt"&&(X="Flat"),X=X[0].toUpperCase()+X.slice(1),'StrokeStartLineCap="'+X+'" StrokeEndLineCap="'+X+'"';I==="stroke-linejoin"?I="StrokeLineJoin":I==="stroke-miterlimit"&&(I="StrokeMiterLimit")}return I=I[0].toUpperCase()+I.slice(1),X=X[0].toUpperCase()+X.slice(1),I+'="'+X+'"'}).join(" "):s=s.map(function(B){return B.key+'="'+B.val+'"'}).sort(Q).join(" "),(" "+s).replace(/\s+$/,"")},t.premiumAlert=function(e){c.show({message:"<strong>"+e.metadata.name+"</strong> is a premium set. Would you like to purchase it?",firstButton:{caption:"Purchase"},secondButton:{caption:"Cancel",focused:!0}}).then(function(r){r==="Purchase"&&(window.location=e.metadata.url)})},t.sortByGrid=function(e){var r=[],s,o=0,u,p,b={};if(e){for(u=e.length,s=0;s<u;s+=1)p=e[s].icon.grid||0,b.hasOwnProperty(p)||(b[p]={idx:o,arr:[]},o+=1),b[p].arr.push(e[s]);for(p in b)b.hasOwnProperty(p)&&r.push(b[p]);for(r.sort(function(P,O){return P.idx-O.idx}),e=[],s=0,u=r.length;s<u;s+=1)e=e.concat(r[s].arr);return e}},t.fixed=function(e,r){return(isNaN(r)||r<0)&&(r=3),(e||0).toFixed(r).replace(/\.0+$/,"").replace(/(\.[^0]+)0+$/,"$1")},t.round=function(e){return Math.round(e)},t.showWarning=function(e){e?c.show(e):c.show({message:"Your premium plan "+t.expMessage2,firstButton:{caption:"Extend",focused:!0},secondButton:{caption:"Cancel"}}).then(function(r){r==="Extend"&&(window.location="https://icomoon.io/pricing")})},t.showPromo=function(e){t.cloudAccess||(c.show({message:['<p class="talign-left mvn">Become a premium member of IcoMoon to: </p>','<ul class="noListStyle talign-left">','<li><i class="icon-check fgc9 mrs"></i>Save changes in your account</li>','<li><i class="icon-check fgc9 mrs"></i>Manage an unlimited number of projects</li>','<li><i class="icon-check fgc9 mrs"></i>Encode and embed fonts in CSS</li>','<li><i class="icon-check fgc9 mrs"></i>Generate WOFF 2.0 fonts</li>','<li><i class="icon-check fgc9 mrs"></i>Generate PDFs</li>','<li><i class="icon-check fgc9 mrs"></i>Access extra icon packs in the <a href="#/select/library">library tab</a></li>','<li><i class="icon-check fgc9 mrs"></i>Upload icons for sharing, development or production</li>',"</ul>"].join(""),firstButton:{caption:"Subscribe",focused:!0},secondButton:{caption:"Cancel"}}).then(function(r){r==="Subscribe"&&(window.location="https://icomoon.io/pricing")}),e&&e.hide&&(t.visiblePanels[e.hide]=!1))},x().get("image.svg")}]);angular.module("icomoonApp").controller("EditCtrl",["$scope","glyphs","template","fileSaver","svgPath","hotkeys","message","color",function(t,n,y,a,l,h,C,x){var d,m=t.edit,f=!0,c,v=t.normSize,g;function k(w){var F=v,U=w.width||v;w.translate(-U/2,-F/2)}function E(w){var F=v,U=w.width||v;w.translate(U/2,F/2)}t.pref.gridSize=t.pref.prevSize||16,function(){var w;t.$watch(function(){return JSON.stringify([t.edit.idx,t.edit.icons[t.edit.idx],t.visiblePanels.edit,t.name])},function(){var F=t.edit,U,L=F.idx;if(t.visiblePanels.edit&&F.icons&&F.icons.length){U=F.icons[L],t.icon=U,t.tempIds=U.paths.map(function(J,z){return z});try{t.currentTheme=F.set.colorThemes[F.set.colorThemeIdx].slice(0),c=t.colorThemeKey(t.currentTheme),t.currentTheme.forEach(function(J,z){t.currentTheme[z]={str:x(J).toString()}})}catch(J){t.currentTheme=!1,c=!1}try{t.properties=F.properties?F.properties:F.selection?F.selection[L]:F.set.selection[L],t.name&&L===t.name.idx&&(t.name.name&&!t.properties.hasOwnProperty("name")||t.properties.hasOwnProperty("name")&&t.name.name!==t.properties.name)&&(t.properties.name=t.name.name),t.name={name:t.properties.name||"",idx:L}}catch(J){t.name={name:"",idx:L}}t.noNext=L>F.icons.length-2,t.noPrev=L<1,U.paths&&(g=l(U.paths),g.width=U.width||v),U.tags?t.tags=U.tags.join(", "):t.tags="",t.showColorTools=!!t.currentTheme&&t.currentTheme.length>1||t.hasAttrs(U)}w!==L&&(w=L,t.pathIdx=NaN)})}();function A(w){m.icons&&m.icons.forEach(function(F){F.grid=F.grid||w})}t.$watch(function(){return JSON.stringify([t.icon&&t.icon.grid,t.icon&&t.icon.width])},function(){var w=t.icon&&t.icon.grid,F=m.icons[m.idx].width||v,U=v,L=U/w,J=[],z,G=[];for(d=w,z=0;z*L<=U;)J[z]={y:z*L},z+=1;for(z=0;z*L<=F;)G[z]={x:z*L},z+=1;t.grid={hLines:J,vLines:G}}),t.$on("$destroy",function(){d&&A(d)}),t.$watch("tags",function(w){typeof w=="string"&&(t.icon.tags=w.split(", "))});function M(w){k(g),w(),E(g),m.icons[m.idx].paths=g.getPathData(!0)}t.ccw=function(){M(function(){g.rotate(-90,t.pathIdx)})},t.cw=function(){M(function(){g.rotate(90,t.pathIdx)})},t.flipHorizontal=function(){M(function(){g.transform({a:-1,d:1},t.pathIdx)})},t.flipVertical=function(){M(function(){g.transform({a:1,d:-1},t.pathIdx)})};function S(){return v/(t.icon.grid*2||64)}function N(){var w=angular.element(document.body),F=angular.element(document.getElementById("edit-svg")).clone(),U=t.pathIdx>=0?F.find("path").eq(t.pathIdx):F.find("g"),L={};return F.attr("style","transform: scale(2);"),w.append(F),L.c=F[0].getBoundingClientRect(),L.p=U[0].getBoundingClientRect(),F.remove(),L}t.scale=function(w){var F=N(),U=F.c.height/(t.icon.grid||64),L=(F.p.height+U*(w.dir||1))/F.p.height,J,z;Math.round(L)>0&&(J=L,z=L,w&&w.width===!1&&(J=1),w&&w.height===!1&&(z=1),M(function(){g.scale(J,z,t.pathIdx)}))},t.fitToCanvas=function(){var w,F,U,L;try{w=N(),U=w.c,L=w.p,L.width/L.height>U.width/U.height?F=U.width/L.width:F=U.height/L.height,F!==1&&M(function(){g.scale(F,F,t.pathIdx)})}catch(J){}},t.align=function(w){var F,U,L,J=0,z=0,G=m.icons[m.idx].width||v,ie=v;try{F=N(),U=F.c,L=F.p,w==="left"?J=(U.left-L.left)/U.width*G:w==="right"?J=(U.right-L.right)/U.width*G:w==="top"?z=(U.top-L.top)/U.height*ie:w==="bottom"?z=(U.bottom-L.bottom)/U.height*ie:(L.centerX=(L.left+L.right)/2,L.centerY=(L.top+L.bottom)/2,U.centerX=(U.left+U.right)/2,U.centerY=(U.top+U.bottom)/2,J=(U.centerX-L.centerX)/U.width*G,z=(U.centerY-L.centerY)/U.height*ie),M(function(){g.translate(J,z,t.pathIdx)})}catch(fe){}},t.moveLayer=function(w){var F=m.icons[m.idx],U;g.moveLayer(t.pathIdx,w),F.paths=g.getPathData(!0),U=F.attrs.map(function(L,J){var z={order:J,attr:L};return F.colorPermutations&&(z.p=F.colorPermutations[J]),z}),U.length&&(U[t.pathIdx].order+=w+(w>0?1:-1),U.sort(function(L,J){return L.order-J.order}),F.colorPermutations&&(F.colorPermutations=U.map(function(L){return L.p})),F.attrs=U.map(function(L){return L.attr})),U=t.pathIdx+w,U>=0&&U<F.paths.length&&(t.pathIdx=U)},t.makeSquare=function(){m.icons[m.idx].width=m.icons[m.idx].height},t.increaseWidth=function(){var w=S();isNaN(m.icons[m.idx].width)&&(m.icons[m.idx].width=v),m.icons[m.idx].width+=w},t.decreaseWidth=function(){var w=S();isNaN(m.icons[m.idx].width)&&(m.icons[m.idx].width=v),m.icons[m.idx].width-=w,m.icons[m.idx].width<0&&(m.icons[m.idx].width=0)},t.translate=function(w,F){var U=S();w=Number(w),w?w=w>0?1:-1:w=0,F=Number(F),F?F=F>0?1:-1:F=0,M(function(){g.translate(w*U,F*U,t.pathIdx)})},t.selectPath=function(w){isNaN(w)?t.pathIdx=NaN:t.pathIdx=w},t.next=function(){m.icons&&m.idx<m.icons.length-1&&(m.idx+=1),f&&(A(d),f=!1)},t.prev=function(){m.icons&&m.idx>0&&(m.idx-=1),f&&(A(d),f=!1)},t.replace=function(w){var F,U,L,J,z=1;if(!w||!w[0]){t.visiblePanels.edit=!1,C.show("Please select an SVG image.").then(function(){t.visiblePanels.edit=!0});return}F=w[0],L=n(F.file),L.length===1&&(U=L[0],t.normSize!==U.viewBox.height&&(z=t.normSize/U.viewBox.height,U.scale(z)),J=m.icons[m.idx],J.paths=L[0].getPathData(!0),J.attrs=U.getAttrs(!0),z!==1&&(J.attrs=J.attrs.map(function(G){return G.strokeWidth>0&&(G.strokeWidth*=z),G})),m.set&&(delete J.colorPermutations,delete J.isMulticolor,delete J.isMulticolor2,t.simplifyIcon(J),t.addColorPermutations([J],m.set))),m.set&&m.set.colorThemes&&t.extractColorTheme(m.set)},t.makeCopy=function(w){for(var F=JSON.parse(JSON.stringify(w)),U=0;U<m.set.icons.length&&w!==m.set.icons[U];)U+=1;U>=m.set.icons.length||(F.id=t.getNextId(m.set.icons),m.set.selection.splice(U+1,0,{order:0}),m.set.icons.splice(U+1,0,F),t.searchResults[m.set.id].splice(U+1,0,t.searchResults[m.set.id][U]),t.visiblePanels.edit=!1)},t.downloadIcon=function(w){var F,U,L,J,z=!1,G,ie,fe,de,le,he=y().get("image.svg"),Pe;for(ie=l(w.paths),ie.viewBox={width:w.width||v,height:w.height||v},de=(w.grid||32)*32/ie.viewBox.height,ie.scale(de),fe=ie.getPathData(!0),U=0,J=fe.length;U<J;U+=1)fe[U]={d:fe[U],strAttrs:w.attrs&&w.attrs[U]?t.stringifyAttrs(w.attrs[U],{scale:de}):""};if(G=w.tags,G&&(G=G[0]),G||(G="icomoon"),t.pref.showGrid&&w.grid){for(z=[],L=!0,Pe=ie.viewBox.width,F=ie.viewBox.height,le=Math.round(F/w.grid/2),U=le;U<Pe;U+=le)z.push({y1:0,y2:F,x1:U,x2:U,opacity:L?.3:1}),L=!L;for(L=!0,U=le;U<F;U+=le)z.push({y1:U,y2:U,x1:0,x2:Pe,opacity:L?.3:1}),L=!L}he.then(function($){a().save(G+".svg",$.fillup({paths:fe,width:ie.viewBox.width,height:ie.viewBox.height,lines:{lines:z}}))})},t.getWidth=function(w){var F=t.icon,U;return F?(U=F.width,isNaN(U)&&(U=v),Math.round(U/(F.height||v)*w)+"%"):0},t.removeColors=function(){var w=t.icon;w.attrs=t.clearAttrs(w.attrs),w.colorPermutations={}},t.updateColor=function(w,F){var U,L=t.icon,J=t.pathIdx,z,G=w==="fill"?"f":"s";L.colorPermutations||(L.colorPermutations={}),U=t.currentTheme[F].str,!L.colorPermutations[c]||!L.colorPermutations[c][J]?(L.colorPermutations[c]=[],L.attrs=t.clearAttrs(L.attrs),L.paths.forEach(function(ie,fe){z={},L.attrs[fe]=L.attrs[fe]||{},fe===J&&(L.attrs[fe][w]=U,z[G]=F),L.colorPermutations[c][fe]=z})):(L.colorPermutations[c][J][G]=F,(!L.attrs||!L.attrs.length)&&(L.attrs=t.clearAttrs(L.attrs),L.paths.forEach(function(ie,fe){L.attrs[fe]=L.attrs[fe]||{},L.attrs[fe][w]=U,L.colorPermutations[c][fe][G]=F})),L.attrs[J]=L.attrs[J]||{},L.attrs[J][w]=U),L.isMulticolor=t.isMulticolor(L.attrs),m.set&&m.set.colorThemes&&t.extractColorTheme(m.set)},t.deletePath=function(w){g.deleteSubPath(w);var F=m.icons[m.idx];F.paths=g.getPathData(!0),F.attrs.splice(w,1),m.set&&m.set.colorThemes&&t.extractColorTheme(m.set)},h.add({arr:[{keys:"left",down:t.prev},{keys:"right",down:t.next}],scope:t,id:"edit"})}]);angular.module("icomoonApp").controller("FontCtrl",["$scope","$state","$q","$sce","$timeout","svgPath","font","template","fileSaver","cloud","message","color",function(t,n,y,a,l,h,C,x,d,m,f,c){var v,g=!1,k=[],E=[[33,126],[59648,65535],[983040,1048575]],A,M,S,N,w=t.fontPref.woffOutlines||"truetype";E.idx={bLatin:0,pua:1,spua:2},m.hasCloudAccess().then(function(){g=!0},function(){t.fontPref.embed=!1});function F($){var oe,ee,ce,ye;if(typeof $=="string")$?ee=E.idx[$]:ee=1;else{if(typeof $=="number")return k.indexOf($)===-1?(k.push($),$):F($+1);ee=1}for(ye=E[ee],ce=ye[1],oe=ye[0];oe<ce;oe+=1)if(k.indexOf(oe)===-1)return k.push(oe),oe;return ee+1<E.length&&F(ee+1),0}function U($){$.split?$=$.split(/\s*,\s*/):$.slice&&($=$.slice(0));var oe=t.pref.fontPref.prefix;return $.forEach(function(ee,ce){var ye=1;if((!oe||oe==="")&&(ee=ee.replace(/^[^a-z_]+/i,"")),ee=ee.replace(/\s+/g,"-").replace(/[^a-z0-9_-]/ig,""),!!$){if(M.indexOf(ee)!==-1){for(;M.indexOf(ee+ye)!==-1;)ye+=1;ee=ee+ye}$[ce]=ee,M.push(ee)}}),$.join(", ")}function L($){var oe=t.fontPref.metrics.baseline/100,ee,ce=t.fontPref.metrics,ye=[],xe,ue,D,W,T,_,Q=t.normSize,e,r,s,o,u={};ce?(ce=ce.emSize,ee=-oe*ce):(ce=1024,ee=-.0625*1024),N=t.sortByGrid(N),T=N.length;function p(P){s=h(P),s.viewBox={width:isNaN(D.width)?Q:D.width,height:isNaN(D.height)?Q:D.height},$&&o&&s.translate(0,o),ye.push({svgPath:s,s:r})}function b(P,O){var B=!0;try{D.attrs[O].fill==="none"&&(B=!1)}catch(I){}return B}for(ue=0;ue<T;ue+=1)r=N[ue],D=r.icon,$&&(xe=D.grid||r.properties.prevSize||W||16,W=xe,u[xe]?o=u[xe]:(_=Math.round(oe*xe),o=_*ce/xe-oe*ce,o=o/(ce/Q),u[xe]=o)),D.isMulticolor&&D.attrs.length!==D.paths.length&&(D.isMulticolor=!1),D.isMulticolor?D.paths.slice(0).forEach(p):(e=h(D.paths.filter(b)),e.viewBox={width:isNaN(D.width)?Q:D.width,height:isNaN(D.height)?Q:D.height},$&&o&&e.translate(0,o),ye.push({svgPath:e,s:r}));return{glyphs:ye,emSize:ce,ascent:ce+ee,descent:ee,unitsPerEm:ce,defaultAdvX:ce}}function J(){var $,oe;$=L(!0),$.glyphs.length?(oe=C($).generate({ttf:!0}).ttf,l(function(){URL&&URL.createObjectURL&&Blob?(URL.revokeObjectURL(t.localFont),t.localFont=URL.createObjectURL(new Blob([oe],{type:"application/x-font-ttf"}))):t.localFont="data:application/x-font-ttf;charset=utf-8;base64,"+oe.toString(!0)},0)):t.localFont=""}t.quickUsage={statusMessage:"Working\u2026"},function(){var $;t.pref.fontUrlS3&&(t.quickUsage.url2=t.pref.fontUrlS3),t.pref.fontCF?($=new Date().getTime()-t.pref.fontCF.time||0,$>2?t.quickUsage.url3=t.pref.fontCF.url:(t.quickUsage.url3="...",l.cancel(v),v=l(function(){t.quickUsage.url3=t.pref.fontCF.url},2-$))):t.pref.fontUrlCF&&(t.quickUsage.url3=t.pref.fontUrlCF)}(),t.hostFont=function($){var oe=t.fontPref,ee=$&&$.enable,ce=$&&$.onlyDev&&t.pref.fontUploadTime,ye=Pe(!0),xe;!oe.autoHost&&!ee||(oe.autoHost=!0,x().get("demo2.html.tmpl"),x().get("demo2.css.tmpl"),xe=t.project.metadata.name.replace(/[^a-zA-Z\-\_0-9]/g,""),ce=ce&&t.pref.fontHostingName===xe,(!t.pref.quickUsageToken||!t.pref.quickUsageToken[xe])&&(t.pref.quickUsageToken={}),t.onlineEditor={disabled:!0},t.quickUsage.icon="sync fgc-warning",t.quickUsage.statusMessage="Uploading\u2026",ce?t.quickUsage.updateCaption="Update":(t.quickUsage.updateCaption="Uploading\u2026",t.quickUsage.hostingDisabled=!0),ye.promise.then(function(){var ue={hash:ye.hash,zip:ye.zip.getArrayBuffer().toString(!0),name:xe,token:t.pref.quickUsageToken[xe],ssl:!0,onlyDev:ce},D,W="";t.ttfSize=ye.ttfSize+" bytes",t.history.ignore=!0,m.host(ue).then(function(T){m.hasCloudAccess().then(null,function(){!T.path2&&!T.path3&&(W="\nIt will expire in 24 hours. ")}).finally(function(){var _=ce?t.pref.fontUrlHash||0:ye.hash.toString(36);W=W||"\nFor development purposes only. Do not use in Production.",t.quickUsage.url=T.path+"/style.css",t.quickUsage.url2=T.path2?T.path2+"/style.css?"+_:!1,t.onlineEditor.data=JSON.stringify({html:"<!-- Add the following link to the <head> of your HTML."+W+' -->\n<link rel="stylesheet" href="'+t.quickUsage.url+'">\n'+ye.onlineEditor.html,css:ye.onlineEditor.css}),t.onlineEditor.disabled=!1,t.pref.quickUsageToken[xe]=T.token,t.history.ignore=!0,t.quickUsage.icon="check fgc-success",t.quickUsage.statusMessage="Ready",!ce&&T.path2&&(D=new Date,t.pref.fontUploadTime=D.toLocaleDateString()+", "+D.toLocaleTimeString(),t.pref.fontUrlS3=t.quickUsage.url2,t.pref.fontCF={url:T.path3?T.path3+"/style.css?"+_:"Error",time:D.getTime()},t.quickUsage.url3="...",l.cancel(v),v=l(function(){t.quickUsage.url3=t.pref.fontCF.url},2),t.pref.fontUrlHash=_,t.pref.fontHostingName=xe),T.path2||(t.pref.fontHostingName=void 0,t.fontUploadTime=void 0,t.quickUsage.url2=void 0,t.quickUsage.url3=void 0,t.pref.fontUploadTime=void 0,t.pref.fontUrlS3=void 0,t.pref.fontCF=void 0),ce||(t.quickUsage.hostingDisabled=!1,t.quickUsage.updateCaption="Update")})},function(){t.quickUsage.icon="warning fgc-error",t.quickUsage.statusMessage="Upload Failed",ce||(t.quickUsage.hostingDisabled=!1,t.quickUsage.updateCaption="Update")})}))};function z($){for(var oe=0,ee=$,ce,ye;ee>1;)ee/=2,oe+=1;return ce=Math.pow(2,oe),ye=Math.pow(2,oe-1),Math.abs($-ye)<Math.abs($-ce)?ye:ce}function G(){N.length<500?he({ttf:!0}).ttfReady.then(function($){t.ttfSize=$.byteLength+" bytes"}):t.ttfSize="unknown"}function ie(){return N.some(function($){try{return $.icon.attrs.some(function(oe){return!!oe.strokeWidth})}catch(oe){return!1}})}function fe(){N.forEach(function($){$.icon.attrs.some(function(oe){return oe&&oe.strokeWidth})&&($.properties.order=0)})}function de(){return N.map(function($){return $.icon.isMulticolor?$.icon.attrs.length:1}).reduce(function($,oe){return $+oe},0)}(function(){var $=0,oe,ee=[],ce=!0,ye;t.$watch(function(){return N=t.getSelectedIcons(),JSON.stringify(N)+t.history.idx},function(){var ue,D=NaN,W,T,_,Q,e=t.fontPref,r,s=0,o,u=59648,p=t.normSize,b,P=N.length,O=t.getSelectionHash(),B,I=!1;if(ce&&ie()&&f.show({message:'<p class="mtn">Strokes get ignored when generating fonts. <br />You can <a target="_blank" href="https://icomoon.io/docs/#stroke-to-fill">convert them to fills</a> to prevent this.</p><p>Would you like to deselect icons containing&nbsp;strokes?</p>',firstButton:{caption:"Deselect"},secondButton:{caption:"Continue",focused:!0}}).then(function(X){X==="Deselect"&&fe()}),k=[],M=[],t.glyphNames={empty:""},t.ligatures={},(P>$||P===$&&O!==oe)&&(I=!0),!I){for(W=0;W<P;W+=1)if(b=N[W],!b.properties.tempChar||!A[W]){I=!0;break}}for(I&&($=P,A=[],t.glyphSets=[]),oe=t.getSelectionHash(),t.ligaWarning=!1,B=N.slice(0),B.sort(function(X,R){return X.properties.order-R.properties.order}),_=0,W=0;W<P;W+=1)if(b=B[W],r=b.icon,ue=b.properties.code,isNaN(ue)||(b.properties.code=F(ue)),o=b.properties.name,o&&(b.properties.name=U(o)),r.isMulticolor&&r.paths.length<2&&(r.isMulticolor=!1,delete b.properties.codes),r.isMulticolor&&b.properties.codes)if(s+=1,b.properties.code!==b.properties.codes[0])b.properties.codes=!1;else for(T=1;T<r.attrs.length;T+=1)b.properties.codes[T]=F(b.properties.codes[T]);for(t.fewMulticolors=s/P<.5||s<10&&s!==P,t.hasMulticolor=s>0,N=t.sortByGrid(N),W=0;W<P;W+=1){if(b=N[W],r=b.icon,ue=b.properties.code,isNaN(ue)&&(ue=r.defaultCode,isNaN(ue)&&(ue="pua"),ue=F(ue),b.properties.code=ue),r.isMulticolor&&!b.properties.codes)for(b.properties.codes=[ue],T=1;T<r.attrs.length;T+=1)b.properties.codes.push(F(ue));if(o=b.properties.name,o||(!o&&r.tags&&(o=r.tags[0].replace(/[^\w\d\-\_]/g,""),e.prefix.trim()||(o=o.replace(/^\d+/,""))),o||(o="uni"+ue.toString(16).toUpperCase()),o=U(o)),b.properties.name=o,I)if(b.properties.tempChar=String.fromCodePoint(u),u+=1,r.isMulticolor)for(b.properties.tempChar=[b.properties.tempChar],B=[],T=0;T<r.attrs.length;T+=1)T&&(b.properties.tempChar.push(String.fromCodePoint(u)),u+=1),A.push({grid:r.grid,properties:T===0?b.properties:{code:b.properties.codes[T]},icon:r,selectionIdx:W,hide:T>0,marginLeft:B,setId:b.setId,iconIdx:b.iconIdx,idx:A.length}),B.push(T>0?-((isNaN(r.width)?p:r.width)/(isNaN(r.height)?p:r.height))+"em":0),_+=1;else A.push({grid:r.grid,properties:b.properties,icon:r,selectionIdx:W,setId:b.setId,iconIdx:b.iconIdx,idx:A.length}),_+=1;else if(r.isMulticolor)for(T=0;T<r.attrs.length;T+=1)T===0?(A[_].properties=b.properties,B=[],A[_].marginLeft=B):A[_].properties={code:b.properties.codes[T]},A[_].icon=r,A[_].grid=r.grid,A[_].hide=T>0,B.push(T>0?-((isNaN(r.width)?p:r.width)/(isNaN(r.height)?p:r.height))+"em":0),A[_].selectionIdx=W,_+=1;else A[_].properties=b.properties,A[_].grid=r.grid,A[_].selectionIdx=W,A[_].icon=r,A[_].hide=!1,_+=1;Q=b.properties.ligatures,r.isMulticolor&&typeof Q=="string"&&(b.properties.ligatures="")}for(t.numOfGlyphs=de(),t.tmp.resetTo=t.numOfGlyphs,I&&!ce&&J(),A.splice(_),T=-1,_=0,W=0;W<A.length;W+=1)A[W].grid!==D&&(D=A[W].grid,T+=1,ee[T]=ee[T]||[],ee[T].grid=D,T!==-1&&ee[T].splice(_),_=0),ee[T][_]=A[W],ee[T][_].properties.prevSize=ee[T][0].properties.prevSize||D||32,_+=1;_&&T!==-1&&ee[T].splice(_),ee.splice(T+1),t.glyphSets=ee,ce=!1,l.cancel(ye),ye=l(function(){t.fontPref.autoHost?t.hostFont({onlyDev:!0}):G()},2e3)});var xe;t.$watch(function(){return{fontPref:t.fontPref,showLiga:t.pref.showLiga}},function(ue){var D=ue.fontPref,W=D.metrics,T=JSON.stringify(W);l.cancel(ye),ye=l(function(){t.fontPref.autoHost?t.hostFont({onlyDev:!0}):G()},2e3),!D.prefix.trim()&&!D.prefix.trim()&&(D.selector||(D.prefix="icon-")),D.selector==="class"&&(D.classSelector=D.classSelector||"",D.classSelector="."+(D.classSelector.replace(/[^a-zA-Z\-\_0-9]/g,"").replace(/^[^a-zA-Z_\-]/,"").replace(/^-([^a-zA-Z_])/,"")||"icon")),D.prefix&&(D.prefix=D.prefix.replace(/\s+/,"-")),D.postfix&&(D.postfix=D.postfix.replace(/\s+/,"-")),D.noie8&&(D.ie7=!1),D.ie7&&(D.noie8=!1);try{D.metadata.fontFamily=D.metadata.fontFamily.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z\-\_0-9]/g,""),D.metadata.fontFamily=D.metadata.fontFamily.slice(0,31)}catch(_){D.metadata.fontFamily="icomoon"}D.metadata.fontFamily==="svgdefs"&&(D.metadata.fontFamily="icomoon"),W.emSize=z(W.emSize),xe!==T&&(xe=T,W&&!isNaN(W.baseline)&&J()),D.cssVars&&((!D.cssVarsFormat||D.cssVarsFormat==="sass")&&(D.cssVarsFormat="scss"),D.cssVarsFormat==="stylus"&&(D.cssVarsFormat="styl"),D.cssVarsFormat==="scss"?x().get("variables.scss.tmpl"):x().get("variables.tmpl"),!D.cssVarsFormat||D.cssVarsFormat==="scss"?x().get("style.scss.tmpl"):D.cssVarsFormat==="less"?x().get("style.less.tmpl"):D.cssVarsFormat==="styl"&&x().get("style.styl.tmpl")),D.ie7&&(x().get("ie7.js.tmpl"),x().get("ie7.css.tmpl"))},!0)})();function le($,oe){var ee=t.fontPref.metrics.emSize,ce,ye=[],xe=[];if($.kerning)try{ce=JSON.parse($.kerning),Object.keys(ce).forEach(function(ue){isNaN(ce[ue])||ue.replace(/\s+/g,"").split("").forEach(function(D){D=D.charCodeAt(0),ye.indexOf(D)===-1&&(ye.push(D),xe.push({left:oe,right:D,value:$.grid?Math.round(ce[ue]*ee/$.grid):Math.round(ce[ue])}))})})}catch(ue){}return xe}function he($){var oe=y.defer(),ee,ce,ye,xe,ue,D,W=t.fontPref,T,_=!1,Q=[],e,r,s,o=W.metadata,u,p=!1,b=t.pref.showLiga,P;for(o||(o={},W.metadata=o),ue=L(!0),ce=0,r=ue.glyphs.length;ce<r;ce+=1)if(T=ue.glyphs[ce],ye=T.s.icon,ye.isMulticolor){for(xe=0;xe<ye.attrs.length;xe+=1)T=ue.glyphs[ce+xe],T.code=T.s.properties.codes[xe];ce+=xe-1}else T.code=T.s.properties.code,T.code===32&&(u=!0),T.code===48&&(p=!0),W.includeMetadata&&(T.tags=ye.tags),T.name=T.s.properties.name,b&&(s=T.s.properties.ligatures,s&&s.length>1&&(T.ligatures=s.split(/,\s*/),_=!0),(!e||T.code>e.code)&&(e=T)),ye.kerning&&(Q=Q.concat(le(ye,T.code)));return _&&(e.ligatures||(e.ligatures=[]),P=e.code+1,P<=65533&&(P=String.fromCharCode(P),P+=P,e.ligatures.push(P))),u||ue.glyphs.push({code:32,advX:W.metrics.whitespace/100*(W.metrics.emSize||1024)}),W.addZero&&!p&&ue.glyphs.push({code:48,advX:W.metrics.emSize||1024}),ue.glyphs.push({code:0,advX:0}),ue.glyphs.push({code:1,advX:0}),Q.length&&(ue.kerningPairs=Q),W.includeMetadata||(o={fontFamily:o.fontFamily||"icomoon",majorVersion:o.majorVersion,minorVersion:o.minorVersion}),ue.metadata=o,$=$||{woff:w,ttf:!0,svg:!0,eot:!W.noie8},D=C(ue).generate($),P={ready:oe.promise},P.ready=oe.promise,D.ttf&&(ee=y.defer(),P.ttfReady=ee.promise,ee.resolve(D.ttf)),D.woff&&(ee=y.defer(),P.woffReady=ee.promise,ee.resolve(D.woff)),!W.noie8&&D.eot&&(ee=y.defer(),P.eotReady=ee.promise,ee.resolve(D.eot)),D.svg&&(ee=y.defer(),P.svgReady=ee.promise,ee.resolve(D.svg)),!$.woff||!$.ttf?oe.resolve():m.hasCloudAccess().then(function(){m.getWoff2({ttf:D.ttf.toString(!0)}).then(function(O){ee=y.defer(),P.woff2Ready=ee.promise,ee.resolve(O),oe.resolve()},function(){oe.resolve()})},function(){oe.resolve()}),P}function Pe($){var oe=he(),ee=t.fontPref,ce=ee.metadata&&ee.metadata.fontFamily||"icomoon",ye=$?"":"fonts/",xe=d(),ue,D={},W,T=ee.prefix||ee.postfix,_=y.defer(),Q=y.defer(),e=y.defer(),r=y.defer(),s=y.defer(),o=y.defer(),u=y.defer(),p=y.defer(),b=y.defer(),P=y.defer(),O=y.defer();return ee.selector&&(T=ee.classSelector||".icon",T=T.slice(1)),ee.cssVars||r.resolve(),(!ee.flutter||$)&&s.resolve(),oe.ttfReady&&oe.ttfReady.then(function(B){xe.add(ye+ce+".ttf",B),D.ttfSize=B.byteLength}),oe.woffReady&&oe.woffReady.then(function(B){xe.add(ye+ce+".woff",B)}),!ee.noie8&&oe.eotReady&&oe.eotReady.then(function(B){xe.add(ye+ce+".eot",B)}),oe.svgReady&&oe.svgReady.then(function(B){ee.includeMetadata||(B=B.replace(/(<metadata>)[\s\S]*(<\/metadata>)/,"$1Generated by IcoMoon$2")),xe.add(ye+ce+".svg",B)}),oe.ready.then(function(){oe.woff2Ready?oe.woff2Ready.then(function(B){xe.add(ye+ce+".woff2",B,{base64:!0}),O.resolve()},function(){O.resolve()}):O.resolve()}),W=JSON.parse(JSON.stringify(N)),W.forEach(function(B){delete B.properties.tempChar,delete B.icon.id,delete B.icon.matchesSearch}),W={IcoMoonType:"selection",icons:W,height:t.normSize,metadata:{name:ee.metadata.fontFamily,url:ee.metadata.fontURL,designer:ee.metadata.designer,designerURL:ee.metadata.designerURL,license:ee.metadata.license,licenseURL:ee.metadata.licenseURL},preferences:t.pref},ue=JSON.stringify(W),xe.addUnicodeString("selection.json",ue),ue=(ue+t.project.metadata.name).hashCode(),x().get("demo.html").then(function(B){var I,X,R,H,K,j=-1,Y,V,Z,q=t.pref.showLiga?[]:!1,re=[],te,be=[],we,ve=[],ge=[],se,pe,Se=[],ne,me;for(q&&(X=function(Ce){Ce&&(re.push({tag:Ce,code:ne.code}),Se.push(Ce))}),H=0,V=t.glyphSets.length;H<V;H+=1)ne=t.glyphSets[H],be[H]={},be[H].tmpGlyphs=ne,ve[H]={idx:H+1,size:ne[0].properties.prevSize},be[H].grid=ne.grid||"Unknown";for(R={prefix:ee.prefix,postfix:ee.postfix,hiddenLiga:!q,hiddenCodes:!1,selector:ee.selector==="class"?T+" ":"",element:ee.selector==="i"?"i":"span"},!R.prefix&&!R.postfix&&(R.prefix=""),H=0;H<V;H+=1)for(be[H].glyphs=[],be[H].fontSizeIdx=H+1,j=0,Z=be[H].tmpGlyphs.length;j<Z;j+=1){if(se=be[H].tmpGlyphs[j],te=se.properties,K=se.icon,ne=Object.create(R),ne.glyphName=te.name.replace(/\s+/g," ").split(/\s*,\s*/),ne.code=te.code.toString(16),ne.char=te.code,ne.liga=te.ligatures,ne.paths=!1,K.isMulticolor){for(ne.paths=[],ne.glyphName.splice(1),ne.single=!1,Y=0;Y<K.attrs.length;Y+=1)ne.paths[Y]={},ne.paths[Y].name="path"+(Y+1),ne.paths[Y].marginLeft=se.marginLeft[Y]!==0?{value:se.marginLeft[Y]}:!1,ne.paths[Y].color={value:K.attrs[Y].fill},K.attrs[Y].opacity&&K.attrs[Y].opacity!==1?ne.paths[Y].opacity={value:t.fixed(K.attrs[Y].opacity,4)}:ne.paths[Y].opacity=!1,ne.paths[Y].glyphName=ne.glyphName[0],ne.paths[Y].code=be[H].tmpGlyphs[j+Y].properties.code.toString(16),ne.paths[Y].pathIdx=Y+1,ne.paths[Y].pathClass=" .path"+(Y+1),ne.paths[Y].prefix=R.prefix,ne.paths[Y].postfix=R.postfix;j+=Y-1}else if(ne.single={code:ne.code,prefix:R.prefix,postfix:R.postfix,glyphName:ne.glyphName},!K.isMulticolor)try{K.attrs[0].fill&&K.attrs[0].fill!=="none"?ne.single.color={value:c(K.attrs[0].fill).toString({hex:!0,forCSS:!0})}:ne.single.color=!1}catch(Ce){ne.single.color=!1}if(q&&ne.liga&&ne.liga.split(/,\s*/).forEach(X),ne.fontSizeIdx=H+1,ne.glyphName.length>1)for(I=ne.glyphName,Y=0;Y<I.length;Y+=1)me=Object.create(ne),ne.single?(me.single=Object.create(me.single),me.glyphName=me.single.glyphName=I[Y]):me.glyphName=I[Y],ge.push(me),be[H].glyphs.push(me);else ne.glyphName=ne.glyphName[0],ge.push(ne),be[H].glyphs.push(ne)}if(q=!!re.length,pe=ee.selector==="i"?"icomoon-liga":T,$?(D.onlineEditor={},x().get("demo2.html").then(function(Ce){D.onlineEditor.html=Ce.fillup({sets:be}),P.resolve()}),x().get("demo2.css").then(function(Ce){D.onlineEditor.css=Ce.fillup({fontSizes:ve}),b.resolve()}),_.resolve(),Q.resolve()):(xe.addUnicodeString("demo.html",B.fillup({fontName:ce,glyphsCount:N.length,sets:be,ie7:ee.ie7?[]:!1,liga:q,ligaClass:pe,testDrive:Se.join(" ")})),P.resolve(),x().get("demo.js").then(function(Ce){xe.add("demo-files/demo.js",Ce.fillup({})),_.resolve()}),x().get("demo.css").then(function(Ce){xe.add("demo-files/demo.css",Ce.fillup({fontSizes:ve})),b.resolve()}),x().get("readme.txt").then(function(Ce){xe.add("Read Me.txt",Ce.fillup({})),Q.resolve()})),we={fontsDir:ye,fontFamily:ce},x().get("style.css").then(function(Ce){var Ee=!1;oe.ready.then(function(){oe.woff2Ready&&(Ee=!0)}).finally(function(){var ae={fontFamily:ce,glyphs:ge,fontFace:"",fontFaceB64:""};ee.selector==="i"?(ae.selector="i",q&&(ae.selector+=", .icomoon-liga")):ee.selector==="class"?ae.selector=ee.classSelector:(ee.postfix&&(ae.selector='[class$="'+ee.postfix+'"], [class*="'+ee.postfix+' "]'),(!ae.selector||ee.prefix)&&(ae.selector='[class^="'+T+'"], [class*=" '+T+'"]')),ae.fontFace=we,g&&ee.embed?ae.fontFaceB64=we:(ae.fontFace=we,ae.fontFace.hash=ue.toString(36),ae.fontFace.cacheBuster="?"+ae.fontFace.hash),ae.liga=q,ae.fontFace=we,ee.noie8?(ae.fontFace.eot=!1,ae.fontFace.eot2=!1):(ae.fontFace.eot=we,ae.fontFace.eot2=we),g&&ee.embed?oe.ttfReady.then(function(Fe){we.ttf=Fe.toString(!0),ae.fontFaceB64.eot=ee.noie8?!1:we,ae.fontFace="",xe.add("style.css",Ce.fillup(ae).replace(/\n\n$/,"\n")),e.resolve(ae)}):(Ee?ae.fontFace.woff2=ae.fontFace:ae.fontFace.woff2=!1,xe.add("style.css",Ce.fillup(ae).replace(/\n\n$/,"\n")),e.resolve(ae))})}),ee.flutter&&!$&&x().get("flutter.dart.tmpl").then(function(Ce){var Ee=ge.map(function(Fe){return{code:Fe.code,glyphName:Fe.glyphName.replace(/[\s\-]/g,"_")}}),ae=ce.replace(/[\s\-]/g,"_");xe.add(ce+"_icons.dart",Ce.fillup({fontName:ce,class:ae[0].toUpperCase()+ae.slice(1),glyphs:Ee})),s.resolve()}),ee.cssVars){var Ae="variables.tmpl";(!ee.cssVarsFormat||ee.cssVarsFormat==="scss")&&(Ae="variables.scss.tmpl"),x().get(Ae).then(function(Ce){var Ee,ae,Fe=ee.cssVarsFormat||"scss",ke,Be,De,Me,Ne,Ue;ge.length===0?Ue=!1:Ue=ge,Fe==="scss"?(Be=": ",ke="$",ae="scss",Ee=";",De="#{$icomoon-font-path}",Me="#{$icomoon-font-family}"):Fe==="styl"?(Be=" = ",ke="",ae="styl",Ee="",De=""):Fe==="less"&&(Be=": ",ke="@",ae="less",Ee=";",De="@{icomoon-font-path}",Me="@{icomoon-font-family}"),Ne={separator:Be,ending:Ee,indicator:ke},Ce.fillup({glyphs:Ue&&[{single:Ne,paths:[Ne]}]}),xe.add("variables."+ae,Ce.fillup({glyphs:Ue,filepath:function(){var Te=$?".":"fonts";if(Fe==="scss")return'$icomoon-font-family: "'+ce+'" !default;\n$icomoon-font-path: "'+Te+'" !default;';if(Fe==="less")return'@icomoon-font-family: "'+ce+'";\n@icomoon-font-path: "'+Te+'";';if(Fe==="styl")return'icomoon-font-path ?= "'+Te+'"'}()})),e.promise.then(function(Te){var Ie="style.";Fe==="styl"?Ie+="styl":Fe==="less"?Ie+="less":Ie+="scss",Ie+=".tmpl",x().get(Ie).then(function(Oe){Oe.fillup({glyphs:Ue&&[{single:Ne,paths:[Ne]}]}),Te.fontFamilyVar=Me,Te.fontFace&&(Te.fontFace.fontPathVar=De,Te.fontFace.fontFamilyVar=Me),Te.fontFaceB64&&(Te.fontFaceB64.fontFamilyVar=Me),Oe.fillup(Te),xe.add("style."+ae,Oe.fillup({glyphs:Ue})),r.resolve()})})})}ee.ie7?(x().get("ie7.css").then(function(Ce){xe.add($?"ie7.css":"ie7/ie7.css",Ce.fillup({glyphs:ge})),u.resolve()}),x().get("ie7.js").then(function(Ce){xe.add($?"ie7.js":"ie7/ie7.js",Ce.fillup({glyphs:ge,fontFamily:ce,prefix:ee.prefix})),o.resolve()})):(o.resolve(),u.resolve()),q?x().get("liga.js").then(function(Ce){xe.addUnicodeString("liga.js",Ce.fillup({ligaTags:re,ligaClass:pe})),p.resolve()}):p.resolve()}),D.hash=ue,D.name=ce,ee.metadata.majorVersion!==void 0&&ee.metadata.minorVersion!==void 0&&(D.name+="-v"+ee.metadata.majorVersion+"."+ee.metadata.minorVersion),D.zip=xe,D.promise=y.all([_.promise,Q.promise,e.promise,o.promise,u.promise,p.promise,b.promise,P.promise,O.promise,s.promise]),D}t.download=function(){t.downloading=!0;var $=Pe();$.promise.then(function(){$.zip.save($.name+".zip").then(function(){t.downloading=!1})})},t.validateCode=function($,oe){var ee;return $>=55296&&$<=57343||(ee=k.indexOf($),$<0)?!1:ee===-1||k[ee]===oe},t.showUniCharts=function($){x().get("uniCharts.html").then(function(oe){t.uniCharts=a.trustAsHtml(oe.fillup())}),S=$,t.visiblePanels.uniCharts=!0},t.assignCode=function($){S.properties.code=parseInt($.target.value,16),t.visiblePanels.uniCharts=!1},t.resetCodes=function($,oe){var ee,ce,ye=t.fontPref.resetPoint||0;for($=Number($)||0,$<0&&($=0),oe=Number(oe),oe>=A.length&&(oe=A.length-1),ye>126&&ye<161&&(ye=161),k=[],ee=0;ee<$;ee+=1)A[ee].properties.code=F(A[ee].properties.code);for(ee=oe+1;ee<A.length;ee+=1)A[ee].properties.code=F(A[ee].properties.code);for(ee=$;ee<=oe;ee+=1)ye=F(ye),A[ee].properties.code=ye,ye+=1;t.visiblePanels.reset=!1},t.resetLigatures=function($,oe){var ee,ce,ye=t.fontPref.ligaReset==="tags",xe=A.length;for($=Number($)||0,$<0&&($=0),oe=Number(oe),oe>=A.length&&(oe=A.length-1),M=[],ee=0;ee<$;ee+=1)A[ee].isMulticolor||(A[ee].properties.ligatures=U(A[ee].properties.ligatures||""));for(ee=oe+1;ee<xe;ee+=1)A[ee].isMulticolor||(A[ee].properties.ligatures=U(A[ee].properties.ligatures||""));for(ee=$;ee<=oe;ee+=1)A[ee].isMulticolor||(ce=A[ee].icon,A[ee].properties.ligatures=U((ye?ce.tags.slice(0,2):A[ee].properties.name)||""));t.visiblePanels.reset=!1},t.removeGlyph=function($){$.properties.order=0},t.editGlyph=function($){N=t.sortByGrid(N);var oe=N[$.selectionIdx],ee=[oe.iconIdx];ee.properties=$.properties,ee.noNavigation=!0,t.changeIcons(ee,oe.setIdx,"edit")},t.max=Math.max,t.$on("$stateChangeStart",function(){URL&&URL.createObjectURL&&Blob&&URL.revokeObjectURL(t.localFont)}),t.getEmbedCode=function($){var oe=$.properties.code.toString(16),ee="",ce,ye=t.fontPref,xe,ue,D=$.icon,W=$.properties.ligatures,T,_=$.properties.name.trim().split(/\s*,+\s*/)[0],Q="",e;if(ce=ye.selector==="i"?"i":"span",xe=(ye.prefix||"")+_+(ye.postfix||""),ye.selector==="class"&&(ee=ye.classSelector.slice(1)+" "),!D.isMulticolor)try{D.attrs[0].fill&&D.attrs[0].fill!=="none"&&(Q="  color: "+c(D.attrs[0].fill).toString({hex:!0,forCSS:!0})+";\n")}catch(r){}if(t.embedCodes={html:"<"+ce+' class="'+ee+xe+'">',css:"."+xe+':before {\n  content: "\\'+oe+'";\n'+Q+"}",htmlEntity:"&#x"+oe+";",character:String.fromCodePoint($.properties.code)},D.isMulticolor)for(t.embedCodes.css="",ue=0;ue<D.attrs.length;ue+=1)oe=$.properties.codes[ue].toString(16),e="\n  color: "+c(D.attrs[ue].fill).toString({hex:!0,forCSS:!0})+";",D.attrs[ue].opacity&&D.attrs[ue].opacity!==1&&(e+="\n  opacity: "+t.fixed(D.attrs[ue].opacity,4)+";"),ue>0&&(t.embedCodes.htmlEntity+="&#x"+oe+";",t.embedCodes.character+=String.fromCodePoint($.properties.codes[ue]),e+="\n  margin-left: "+$.marginLeft[ue]+";",t.embedCodes.css+="\n"),t.embedCodes.css+="."+xe+" .path"+(ue+1)+':before {\n  content: "\\'+oe+'";'+e+"\n}",t.embedCodes.html+='<span class="path'+(ue+1)+'"></span>';t.embedCodes.cssLines=t.embedCodes.css.match(/\n/g).length+1,t.embedCodes.html+="</"+ce+">",t.pref.showLiga&&W&&(ce==="i"?T="":T=' class="'+(ee.trim()||ye.prefix||ye.postfix)+'"',t.embedCodes.htmlLiga="<"+ce+T+">"+W.split(/\s*,\s*/)[0]+"</"+ce+">"),t.visiblePanels.getcode=!0},t.showMulticolorWarning=function(){f.show({message:'<p class="mtn talign-left">Font glyphs cannot have more than one color by default. Using CSS, IcoMoon stacks multiple glyphs on top of each other to implement multicolor glyphs. As a result, these glyphs take more than one character code and cannot have ligatures.</p><p class="talign-left">To avoid multicolor glyphs, re-import your SVG after changing all its colors to a single color.</p>'})},x().get("demo.html.tmpl"),x().get("demo.css.tmpl"),x().get("demo.js.tmpl"),x().get("style.css.tmpl"),x().get("readme.txt"),x().get("uniCharts.html.tmpl")}]);angular.module("icomoonApp").controller("ImageCtrl",["$scope","$q","$timeout","fileSaver","template","svgPath","cloud","scriptLoader","color","csh",function(t,n,y,a,l,h,C,x,d,m){"use strict";var f,c,v,g,k,E,A;C.hasCloudAccess().then(function(){c=!0},function(){t.fontPref.embed=!1});function M(w){w.split?w=w.split(/\s*,\s*/):w.slice&&(w=w.slice(0));var F=t.imagePref.prefix;return w.forEach(function(U,L){var J=1;if((!F||F==="")&&(U=U.replace(/^[^a-z_]+/i,"")),U=U.replace(/\s+/g,"-").replace(/[^a-z0-9_-]/ig,""),!!w){if(g.indexOf(U)!==-1){for(;g.indexOf(U+J)!==-1;)J+=1;U=U+J}w[L]=U,g.push(U)}}),w.join(", ")}function S(w){var F=w.attrs,U,L,J,z,G,ie,fe=w.path,de,le,he;for(L=new jsPDF({unit:"pt"}),L.deletePage(0),L.addPage([w.width,w.height]),w.bgColor&&(U=d(w.bgColor).toArray(),L.setFillColor(U[0],U[1],U[2]),L.rect(0,0,w.width,w.height,"F")),he=fe.getPDFSegments(),z=0;z<he.length;z+=1)for(J=d(F&&F[z]&&F[z].fill||w.defaultColor||0).toArray(),de=d(F&&F[z]&&F[z].stroke||w.defaultColor||0).toArray(),G=0;G<he[z].length;G+=1)try{ie=he[z][G],G+1===he[z].length&&(le=null,(!F||!F[z]||F[z].fill!=="none")&&(L.setFillColor(J[0],J[1],J[2]),le="F"),F&&F[z]&&F[z].strokeWidth>0&&(L.setDrawColor(de[0],de[1],de[2]),L.setLineWidth(F[z].strokeWidth*w.scale),L.setLineCap(F[z].strokeLinecap),L.setLineJoin(F[z].strokeLinejoin),le===null?le="S":le="FD")),L.lines(ie.slice(1),ie[0][0],ie[0][1],[1,1],G+1===he[z].length?le:null,ie.isClosed)}catch(Pe){}return L.output("arraybuffer")}function N(w){var F=[],U,L,J,z,G,ie,fe,de,le,he,Pe=w.glyphSets||t.glyphSets,$=[],oe,ee,ce,ye,xe,ue=t.imagePref,D,W,T=ue.margin,_=ue.overrideSize?ue.height:0,Q=!1,e=t.normSize,r,s,o,u,p,b,P,O,B={},I=1,X,R,H=[],K,j={width:0,height:0},Y,V,Z=[],q,re,te=0,be,we=0;for(t.glyphSets.forEach(function(ve){ve.forEach(function(ge){try{ge.icon.attrs.forEach(function(se,pe){re=ge.icon.attrs[pe].fill,re&&re!=="none"&&F.indexOf(re)===-1&&F.push(re),re=ge.icon.attrs[pe].stroke,!isNaN(ge.icon.attrs[pe].strokeWidth)&&re&&F.indexOf(re)===-1&&F.push(re)})}catch(se){}})}),J=ue.color||0,J=d(J).toString({hex:!0,forCSS:!0}),z='fill="'+J+'"',z==='fill="#000"'&&(z=""),ue.addBgColor&&(U=d(ue.bgColor).toString({hex:!0,forCSS:!0})),L=ue.prefix||"icon-",G=ue.columns,ue.useClassSelector?X=ue.classSelector||".icon":(ue.postfix&&(X='[class$="'+ue.postfix+'"], [class*="'+ue.postfix+' "]'),(!X||ue.prefix)&&(X='[class^="'+L+'"], [class*=" '+L+'"]')),xe=0;xe<Pe.length;xe+=1)if(R=Pe[xe],!!R){for(R.glyphs=[],oe=_||R[0].properties.prevSize||32,$.push({idx:xe+1,size:oe}),te=0,D=0;D<R.length;D+=1){for(V=JSON.parse(JSON.stringify(R[D])),V.lines=!1,V.height=oe,V.width=Math.round(V.viewBox.width/V.viewBox.height*oe),U?V.bg={width:V.width,height:V.height,color:U}:V.bg=!1,V.addTitleTags=ue.addTitleTags?{glyphName:V.glyphName}:!1,V.fontSizeIdx=xe+1,V.viewBox="0 0 "+(V.viewBox.width||e)+" "+(V.viewBox.height||e),V.prefix=ue.prefix,V.postfix=ue.postfix,V.selector=ue.useClassSelector?(ue.classSelector.slice(1)||"icon")+" ":"",V.svgPath=h(V.icon.paths),V.svgPath.viewBox={width:V.icon.width||e,height:V.icon.height||e},I=V.height/V.svgPath.viewBox.height,V.scaledPath=V.svgPath.scale(I),V.viewBox2="0 0 "+V.width+" "+V.height,V.scaledPathData=V.scaledPath.getPathData(!0),V.scale=I,O={props:{fill:!0,opacity:!0,stroke:!0,style:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-miterlimit":!0},scale:I,defaultColor:J},W=0;W<V.paths.length;W+=1){V.paths[W].idx=W+1,V.paths[W].fillColor="",V.icon.attrs&&V.icon.attrs[W]&&Object.keys(V.icon.attrs[W]).length>0&&(V.paths[W].strAttrs=t.stringifyAttrs(V.icon.attrs[W],O)),q=Object.create(O),q.xaml=!0;try{V.paths[W].strAttrs3=t.stringifyAttrs(V.icon.attrs[W],q)}catch(ve){V.paths[W].strAttrs3=""}V.paths[W].strAttrs=V.paths[W].strAttrs||z&&" "+z,q=Object.create(O),q.fillIdx=0,q.strokeIdx=0,!V.icon.attrs||!V.icon.attrs[W]||!V.icon.attrs[W].fill||V.icon.attrs[W].fill==="none"&&isNaN(V.icon.attrs[W].strokeWidth)||!isNaN(V.icon.attrs[W].strokeWidth)&&!V.icon.attrs[W].stroke&&(!V.icon.attrs[W].fill||V.icon.attrs[W].fill==="none")?(q.props=Object.create(O.props),q.props.fill=!1,q.props.stroke=!1,q.props.opacity=!1):(re=V.icon.attrs[W].fill,q.fillIdx=F.indexOf(re)+1,re=V.icon.attrs[W].stroke,q.strokeIdx=F.indexOf(re)+1),V.attrs=!1;try{V.paths[W].strAttrs2=t.stringifyAttrs(V.icon.attrs[W],q)}catch(ve){V.paths[W].strAttrs2=""}V.paths[W].d2=V.scaledPathData[W]}if(w.sprite){for(Q&&(te=0,we+=V.height+T,Q=!1),D===0&&(j.width=(V.height+T)*G-T),q=te+V.width,te===0&&q>j.width&&(j.width=q),q>j.width&&(te=0,we+=V.height+T),V.x=te,V.y=we,V.position=(te?"-"+te+"px":"0")+" "+(we?"-"+we+"px":"0"),q=V.x+V.width;te<q||te-q<T/2;)te+=V.height+T;te+V.width>j.width&&(Q=!0,q>j.width&&(V.x=0,V.y=we+(V.height+T)))}Z.push(V),R.glyphs.push(V)}w.sprite&&(j.height=we+V.height,we=j.height+T),H[xe]={glyphs:R.glyphs,grid:R.grid}}return Z=Z.length>0?Z:!1,H=H.length>0?H:!1,$=$.length>0?$:!1,(w.defs||w.html||w.html2)&&(le=n.defer(),B.defs=le.promise,l().get("defs.svg").then(function(ve){de=ve.fillup({symbols:Z}),le.resolve(de)})),w.polymer&&(u=n.defer(),n.all([l().get("icomoon-iconset-svg.html"),l().get("polymer-readme.txt")]).then(function(ve){u.resolve({html:ve[0].fillup({symbols:Z,height:t.normSize}),txt:ve[1].fillup({glyphName:Z&&Z[0]?Z[0].glyphName:"pen"})})}),B.polymer=u.promise),w.selection&&(b=n.defer(),B.selection=b.promise,p=JSON.parse(JSON.stringify(E)),p.forEach(function(ve){delete ve.properties.tempChar,delete ve.icon.id,delete ve.icon.matchesSearch}),p={IcoMoonType:"selection",icons:p,height:t.normSize,preferences:t.pref},w.selection==="compact"?b.resolve(JSON.stringify(p)):b.resolve(JSON.stringify(p,null,"  "))),w.html&&(ee=n.defer(),B.html=ee.promise,le.promise.then(function(){l().get("demo-svg.html").then(function(ve){H&&(H[0].glyphs[0].url=""),ee.resolve(ve.fillup({defs:"\n"+de,sets:H,info:""}))})})),w.html2&&(ce=n.defer(),B.html2=ce.promise,le.promise.then(function(){l().get("demo-svg2.html").then(function(ve){H&&(H[0].glyphs[0].url=""),ce.resolve(ve.fillup({sets:H,info:""}))})})),w.html3&&(ye=n.defer(),B.html3=ye.promise,l().get("demo-svg.html").then(function(ve){H&&(H[0].glyphs[0].url="symbol-defs.svg"),ye.resolve(ve.fillup({defs:"",sets:H,info:'<p><strong>Notice</strong>: This demo (along with "symbol-defs.svg" and "svgxuse.js" files) should be <b>hosted on a web server</b> to work properly.</p>',script:'<script defer src="'+(ue.minifyJs?"svgxuse.min.js":"svgxuse.js")+'"><\/script>'}))})),w.polyfill&&(o=n.defer(),B.polyfill=o.promise,l().get(ue.minifyJs?"svgxuse.min.js":"svgxuse.js").then(function(ve){o.resolve(ve.fillup().replace(/CLOUDLINK/,""))})),w.demoCss&&(he=n.defer(),B.demoCss=he.promise,l().get("demo-svg.css").then(function(ve){var ge=ue.prefix.length+g.map(function(pe){return pe.length}).reduce(function(pe,Se){return Math.max(pe,Se)},0),se=ge<=16&&$&&$.filter(function(pe){return pe.size<64}).length>0;he.resolve(ve.fillup({fontSizes:$,color:J,smallSize:!se,normalSize:se,glyphWidth:se?17:Math.round(ge/3)}))})),w.css&&(fe=n.defer(),B.css=fe.promise,l().get("style-svg.css").then(function(ve){var ge=[];H&&H.forEach(function(se){var pe,Se=[],ne;for(ne=0;ne<se.glyphs.length;ne+=1)pe=se.glyphs[ne],pe.classSelector=!1,(pe.attrs||pe.w2hratio!==1)&&(pe.w2hratio!==1&&(pe.classSelector=[{w2h:pe.w2hratio,prefix:pe.prefix,postfix:pe.postfix,glyphName:pe.glyphName}]),Se.push(pe));Se.length&&ge.push({glyphs:Se,grid:se.grid})}),fe.resolve(ve.fillup({color:J,selector:X,sets:ge.length?ge:!1,bgColor:U?{value:U}:!1,prefix:ue.prefix,postfix:ue.postfix,colorTheme:!1}).replace(/\n+$/,"\n"))})),(w.svgs||w.sprite||w.png)&&(P=[],w.html&&P.push(ee.promise),w.defs&&P.push(le.promise),w.polymer&&P.push(u.promise),w.svgs&&(Y=n.defer(),B.svgs=Y.promise),w.png&&(s=n.defer(),B.pngs=s.promise),w.pdf&&c&&(r=n.defer(),P.push(k),B.pdfs=r.promise),w.csh&&(ie=n.defer(),B.csh=ie.promise),w.xaml&&(be=n.defer(),P.unshift(l().get("image.xaml.tmpl")),B.xamls=be.promise),w.sprite&&(K=n.defer(),B.sprite=K.promise),n.all(P).then(function(ve){var ge=ve[0];l().get("image.svg").then(function(se){var pe,Se,ne,me,Ae,Ce,Ee=[],ae,Fe,ke,Be,De={},Me=[],Ne,Ue=[];for(w.png&&(ke=[],pe=document.createElement("canvas")),w.pdf&&c&&(Fe=[]),ne=0;ne<Z.length;ne+=1)Ce=Z[ne].svgPath,Ce.name=Z[ne].glyphName,Ee.push(Ce);for(w.csh&&ie.resolve(m(Ee).generateCSH()),ne=0;ne<Z.length;ne+=1){for(Ce=Ee[ne],oe=Z[ne].height,ae=Z[ne].scaledPathData,me=0;me<ae.length;me+=1)Z[ne].paths[me].d=ae[me];if(ue.numPrefix){for(Be=ne+1+"";Be.length<String(Z.length+1).length;)Be="0"+Be;Se=Be+"-"+Z[ne].glyphName}else Se=Z[ne].glyphName;ue.addTitleTags?Z[ne].title=[{glyphName:Z[ne].glyphName}]:Z[ne].title=!1,q=se.fillup(Z[ne]),w.xaml&&(Z[ne].xamlName=((Z[ne].prefix||"")+(Z[ne].glyphName||"")+(Z[ne].postfix||"")).replace(/-/ig,"_").replace(/[^a-z_0-9]/ig,""),Ne=ge.fillup(Z[ne])),w.png&&(pe.width=Z[ne].width,pe.height=Z[ne].height,canvg(pe,q),ke.push({name:Se+".png",data:pe.toDataURL().replace(/.*,/m,"")})),w.pdf&&c&&Fe.push({name:Se+".pdf",data:S({attrs:Z[ne].icon.attrs,scale:Z[ne].scale,bgColor:U,defaultColor:J,path:Ce,width:Z[ne].width,height:Z[ne].height})}),Me.push({name:Se+".svg",data:q}),w.xaml&&Ue.push({name:Se+".xaml",data:Ne})}w.svgs&&Y.resolve(Me),w.png&&s.resolve(ke),w.xaml&&be.resolve(Ue),w.pdf&&c&&r.resolve(Fe),w.sprite&&l().get("sprite.svg").then(function(Te){return q=Te.fillup({g:Z,width:j.width,height:j.height}),w.png&&(pe=document.createElement("canvas"),pe.width=j.width,pe.height=j.height,canvg(pe,q),De.png=pe.toDataURL().replace(/.*,/m,"")),De.svg=q,l().get("sprite.html")}).then(function(Te){return q=Te.fillup({sets:H,fontSizes:$}),De.html=q,l().get("sprite.css")}).then(function(Te){q=Te.fillup({selector:X,bgColor:U?{value:U}:!1,sets:H}),De.css=q,K.resolve(De)})})})),B}t.$watch(function(){return t.imagePref},function(w){(!w.prefix||!w.prefix.trim())&&(w.useClassSelector?w.useClassSelector=!0:w.prefix="icon-");try{w.name=w.name.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z\-\_0-9]/g,""),w.name=w.name.slice(0,31)}catch(F){w.name="icomoon"}w.pdf&&!k&&(k=x.load("components/jspdf/jspdf.min.js")),w.useClassSelector&&(w.classSelector=w.classSelector||"",w.classSelector="."+(w.classSelector.replace(/[^a-zA-Z\-\_0-9]/g,"").replace(/^[^a-zA-Z_\-]/,"").replace(/^-([^a-zA-Z_])/,"")||"icon")),A=y(function(){t.imagePref.autoHost&&t.host({onlyDev:!0})},2e3)},!0),function(){var w=[];t.$watch(function(){return E=t.getSelectedIcons(),JSON.stringify(E)+t.history.idx},function(){var F=t.imagePref.color||0,U=NaN,L,J,z,G,ie,fe=t.normSize,de,le,he,Pe=E.length;for(g=[],t.glyphNames={empty:""},E=t.sortByGrid(E),v=[],t.glyphSets=[],L=0;L<Pe;L+=1){for(he=E[L],J=he.icon,ie=he.properties.name,ie||(!ie&&J.tags&&(ie=J.tags[0].replace(/[^\w\d\-\_]/g,"").replace(/^\d+/,"")),ie||(ie="untitled")),ie=M(ie),he.properties.name=ie,de=h(J.paths),de.viewBox={width:J.width||fe,height:J.height||fe},le=de.getPathData(!0),z=0;z<le.length;z+=1)le[z]={d:le[z]},J.attrs&&J.attrs[z]&&(le[z].attrs=J.attrs[z]),/fill/.test(le[z].attrs)||(le[z].fill=' fill="#'+F+'"');v[L]={grid:J.grid,properties:he.properties,icon:J,selectionIdx:L,paths:le,viewBox:de.viewBox,w2hratio:de.viewBox.width/de.viewBox.height,glyphName:ie.replace(/\s+/g,"").split(/,/)[0],setId:he.setId,setIdx:he.setIdx,iconIdx:he.iconIdx}}for(t.glyphs=v,z=-1,L=0;L<Pe;L+=1)v[L].grid!==U&&(U=v[L].grid,z+=1,w[z]=w[z]||[],w[z].grid=U,z!==-1&&w[z].splice(G),G=0),w[z][G]=v[L],w[z][G].properties.prevSize=w[z][0].properties.prevSize||U||32,G+=1;G&&z!==-1&&w[z].splice(G),w.splice(z+1),t.glyphSets=w,N({defs:!0}).defs.then(function($){var oe=$.length;oe<1e3?t.size="less than 1 KB":(oe=Math.round(oe/1e3),t.size=oe+" KB")}),y.cancel(A),A=y(function(){t.imagePref.autoHost&&t.host({onlyDev:!0})},2e3)})}(),t.removeGlyph=function(w){w.properties.order=0},t.editGlyph=function(w){E=t.sortByGrid(E);var F=E[w.selectionIdx],U=[F.iconIdx];U.properties=w.properties,U.noNavigation=!0,t.changeIcons(U,F.setIdx,"edit")},t.download=function(){var w=t.imagePref,F={},U,L,J=a();t.downloading=!0,U=N({html:!0,html3:!0,polyfill:!0,defs:!0,css:!0,demoCss:!0,svgs:!0,selection:!0,png:w.png,pdf:w.pdf,xaml:w.xaml,polymer:w.polymer,csh:w.csh,sprite:w.sprite}),F.htmlAdded=n.defer(),F.html3Added=n.defer(),F.polyfillAdded=n.defer(),F.readMeAdded=n.defer(),F.defsAdded=n.defer(),F.cssAdded=n.defer(),F.demoCssAdded=n.defer(),F.svgsAdded=n.defer(),F.spriteAdded=n.defer(),L=[F.htmlAdded.promise,F.html3Added.promise,F.polyfillAdded.promise,F.readMeAdded.promise,F.defsAdded.promise,F.cssAdded.promise,F.demoCssAdded.promise,F.svgsAdded.promise],l().get("readme-svg.txt").then(function(z){J.add("Read Me.txt",z.fillup({selector:w.useClassSelector?(w.classSelector||".icon").slice(1)+" ":"",prefix:w.prefix,postfix:w.postfix,glyphName:E[0]?E[0].properties.name:"home"})),F.readMeAdded.resolve()}),U.selection.then(function(z){J.add("selection.json",z)}),U.html.then(function(z){J.add("demo.html",z),F.htmlAdded.resolve()}),U.html3.then(function(z){J.add("demo-external-svg.html",z),F.html3Added.resolve()}),U.polyfill.then(function(z){J.add("svgxuse."+(w.minifyJs?"min.":"")+"js",z),F.polyfillAdded.resolve()}),U.defs.then(function(z){J.add("symbol-defs.svg",z),F.defsAdded.resolve()}),U.css.then(function(z){J.add("style.css",z),F.cssAdded.resolve()}),U.demoCss.then(function(z){J.add("demo-files/demo.css",z),F.demoCssAdded.resolve()}),U.svgs.then(function(z){z.forEach(function(G){J.add("SVG/"+G.name,G.data)}),F.svgsAdded.resolve()}),w.png&&(F.pngsAdded=n.defer(),L.push(F.pngsAdded.promise),U.pngs.then(function(z){z.forEach(function(G){J.add("PNG/"+G.name,G.data,{base64:!0})}),F.pngsAdded.resolve()})),w.xaml&&(F.xamlsAdded=n.defer(),L.push(F.xamlsAdded.promise),U.xamls.then(function(z){z.forEach(function(G){J.add("XAML/"+G.name,G.data)}),F.xamlsAdded.resolve()})),w.polymer&&U.polymer.then(function(z){F.polymerAdded=n.defer(),L.push(F.polymerAdded.promise),J.add("icomoon-polymer/icomoon-iconset-svg.html",z.html),J.add("icomoon-polymer/Read Me.txt",z.txt),F.polymerAdded.resolve()}),w.csh&&(F.cshAdded=n.defer(),L.push(F.cshAdded.promise),U.csh.then(function(z){F.cshAdded.resolve(),J.add("Custom Shapes.csh",z,{base64:!0})})),w.pdf&&c&&(F.pdfsAdded=n.defer(),L.push(F.pdfsAdded.promise),U.pdfs.then(function(z){z.forEach(function(G){J.add("PDF/"+G.name,G.data)}),F.pdfsAdded.resolve()})),w.sprite&&(F.spriteAdded=n.defer(),L.push(F.spriteAdded.promise),U.sprite.then(function(z){J.add("sprite/sprite.html",z.html),J.add("sprite/sprite.css",z.css),J.add("sprite/sprite.svg",z.svg),w.png&&J.add("sprite/sprite.png",z.png,{base64:!0}),F.spriteAdded.resolve()})),n.all(L).then(function(){J.save((w.name||"icomoon")+".zip").then(function(){t.downloading=!1})})},t.quickUsage={statusMessage:"Working\u2026",placeholder:'<link rel="stylesheet" href="...">\n<script src="..."><\/script>'},function(){var w=l('<link rel="stylesheet" href="{{href}}">'),F=t.pref.imageUrlHash||0,U=l('<script src="{{src}}"><\/script>'),L;t.pref.imageUrlS3&&(t.quickUsage.ref2=w.fillup({href:t.pref.imageUrlS3+"/style-svg.css?"+F})+"\n"+U.fillup({src:t.pref.imageUrlS3+"/svgxuse-s3.js?"+F}),t.quickUsage.url2=t.pref.imageUrlS3+"/svgxuse-s3.js?"+F),t.pref.imageCF?(L=new Date().getTime()-t.pref.imageCF.time,L<2&&(t.quickUsage.ref3=t.quickUsage.placeholder,t.quickUsage.url3="..."),y.cancel(f),f=y(function(){t.quickUsage.ref3=w.fillup({href:t.pref.imageCF.url+"/style-svg.css?"+F})+"\n"+U.fillup({src:t.pref.imageCF.url+"/svgxuse.js?"+F}),t.quickUsage.url3=t.pref.imageCF.url+"/svgxuse.js?"+F},2-L)):t.pref.imageUrlCF&&(t.quickUsage.ref3=w.fillup({href:t.pref.imageUrlCF+"/style-svg.css?"+F})+"\n"+U.fillup({src:t.pref.imageUrlCF+"/svgxuse.js?"+F}))}(),t.host=function(w){var F=w&&w.enable,U=t.imagePref,L,J=w&&w.onlyDev&&t.pref.imageUploadTime,z,G={},ie,fe=[],de;!U.autoHost&&!F||(z=N({html:!0,html2:!0,css:!0,defs:!0,demoCss:!0,selection:!0}),L=l().get(U.minifyJs?"svgxuse.min.js":"svgxuse.js"),fe=[z.html,z.html2,z.css,z.defs,z.selection,L],z.html.then(function(le){G.html=le}),z.html2.then(function(le){G.html2=le}),z.css.then(function(le){G.css=le}),z.defs.then(function(le){G.defs=le}),z.demoCss.then(function(le){G.demoCss=le}),z.selection.then(function(le){G.selection=le}),L.then(function(le){G.js=le.fillup()}),de=a(),U.autoHost=!0,ie=t.project.metadata.name.replace(/[^a-zA-Z\-\_0-9]/g,""),J=J&&t.pref.imageHostingName===ie,(!t.pref.quickUsageToken||!t.pref.quickUsageToken[ie])&&(t.pref.quickUsageToken={}),t.onlineEditor={disabled:!0},J?t.quickUsage.uploading="Update":t.quickUsage.uploading="Uploading\u2026",n.all(fe).then(function(){var le,he,Pe;de.add("style-svg.css",G.css),de.add("svgxuse.js",G.js),de.add("symbol-defs.svg",G.defs),de.add("demo.css",G.demoCss),de.add("selection-svg.json",G.selection),Pe=G.selection+t.project.metadata.name,le=Pe.hashCode(),he={hash:le,zip:de.getArrayBuffer().toString(!0),name:ie,token:t.pref.quickUsageToken[ie],ssl:!0,type:"svg",onlyDev:J},le=le.toString(36),J&&(le=t.pref.imageUrlHash||0),t.history.ignore=!0,t.quickUsage.icon="sync fgc-warning",t.quickUsage.statusMessage="Uploading\u2026",C.host(he).then(function($){var oe=l('<link rel="stylesheet" href="{{href}}">'),ee=l('<script defer src="{{src}}"><\/script>'),ce={},ye,xe="";C.hasCloudAccess().then(null,function(){!$.path2&&!$.path3&&(xe=" It will expire in 24 hours. ")}).finally(function(){t.quickUsage.url=$.path+"/style-svg.css",ce={html:"<!-- Add the following references to the <head> of your HTML.\nFor development purposes only. Do not use in Production."+xe+" -->\n"},$.path&&(ye=ee.fillup({src:$.path+"/svgxuse.js"}),t.quickUsage.ref=oe.fillup({href:$.path+"/style-svg.css"})+"\n"+ye,ce.html+=ye,ce.css_external=$.path+"/demo.css"),$.path2&&(t.quickUsage.ref2=oe.fillup({href:$.path2+"/style-svg.css?"+le})+"\n"+ee.fillup({src:$.path2+"/svgxuse-s3.js?"+le}),t.quickUsage.url2=$.path2+"/svgxuse-s3.js?"+le),ce.html+="\n"+G.html2,ce.css=G.css,t.onlineEditor.data=JSON.stringify(ce),t.onlineEditor.disabled=!1,t.pref.quickUsageToken[ie]=$.token,t.history.ignore=!0,t.quickUsage.icon="check fgc-success",t.quickUsage.statusMessage="Ready",t.quickUsage.uploading=!1,!J&&$.path2&&(ce=new Date,t.pref.imageUploadTime=ce.toLocaleDateString()+", "+ce.toLocaleTimeString(),t.pref.imageUrlS3=$.path2,t.pref.imageCF={url:$.path3,time:new Date().getTime()},t.quickUsage.ref3=t.quickUsage.placeholder,t.quickUsage.url3="...",y.cancel(f),f=y(function(){t.quickUsage.ref3=oe.fillup({href:$.path3+"/style-svg.css?"+le})+"\n"+ee.fillup({src:$.path3+"/svgxuse.js?"+le}),t.quickUsage.url3=t.pref.imageCF.url+"/svgxuse.js?"+le},2),t.pref.imageUrlHash=le,t.pref.imageHostingName=ie),$.path2||(t.pref.imageHostingName=void 0,t.imageUploadTime=void 0,t.pref.imageUrlS3=void 0,t.pref.imageCF=void 0,t.pref.imageUploadTime=void 0,t.quickUsage.ref2=void 0,t.quickUsage.url2=void 0,t.quickUsage.ref3=void 0,t.quickUsage.url3=void 0)})},function(){t.quickUsage.icon="warning fgc-error",t.quickUsage.statusMessage="Upload Failed",t.quickUsage.uploading=!1})}))},t.getEmbedCode=function(w){var F,U="",L=t.imagePref,J=!1,z,G,ie;w?(G=w.properties.name,z=(L.prefix||"")+G+(L.postfix||""),L.useClassSelector&&(U=L.classSelector.slice(1)+" "),F=[[w]],v.every(function(fe){return J===!1?(J=fe.setId,!0):J===fe.setId})||F.push(!1)):F=!1,ie=N({defs:!0,css:!0,glyphSets:F}),ie=[ie.defs,ie.css],n.all(ie).then(function(fe){var de=fe[1],le=fe[0],he;w&&(le=le.slice(le.indexOf("<symbol"),le.indexOf("</symbol>")+9),he=de.indexOf(z),he===-1&&(he=de.indexOf("fill-color")),de=(de.slice(0,de.indexOf("/*")-1)+(he===-1?"":de.slice(he-1))).replace(/\n+$/,"")),t.embedCodes={html:'<svg class="'+U+z+'"><use xlink:href="#'+z+'"></use></svg>',def:le,defLines:le.match(/\n/g).length+1,css:de,cssLines:de?de.match(/\n/g).length+1:0},w||delete t.embedCodes.html,t.visiblePanels.getcode2=!0})},t.getHexColor=function(w){for(w=w.toString(16);w.length<6;)w="0"+w;return w},l().get("demo-svg.html"),l().get("readme-svg.txt"),l().get("demo-svg.css"),l().get("style-svg.css"),l().get("defs.svg"),l().get("image.svg"),l().get(t.imagePref.minifyJs?"svgxuse.min.js":"svgxuse.js")}]);angular.module("icomoonApp").controller("ProjectsCtrl",["$scope","$state","$q","session","cloud","message","fileSaver","storage",function(t,n,y,a,l,h,C,x){var d,m,f=y.defer(),c,v,g;function k(E){return JSON.parse(JSON.stringify(E))}t.newProjectDisabled=!1,function(){var E=a("icomoon");x.load("currentProject",function(A){m=A,E.load("icomoon-lib/presets.json").then(function(M){var S=[],N=[],w,F,U=M.projects,L=!1,J;for(w=0,F=U.length;w<F;w+=1)U[w].iconSets&&(L=!0,J=new Date().getTime()+w,U[w].metadata.created=J,a(J).quickSave(U[w])),S.push(k(U[w].metadata?U[w].metadata:U[w])),N.push(S[w].created);L?(M.projects=S,M.time+=1,E.quickSave(M).then(function(){f.resolve(M)})):f.resolve(M),N.indexOf(m)===-1&&(m=N[0]||0,x.save("currentProject",m))})})}(),t.authed=!1,f.promise.then(function(E){t.projectsReady=!0,function(){var N,w,F,U=[];for(v=E,F=v.projects.slice(0),t.order=v.order||"Date Created",v.order=t.order,t.projects=[],N=0,w=F.length;N<w;N+=1)U.indexOf(F[N].created)===-1&&(U.push(F[N].created),t.projects.push({idx:N,metadata:k(F[N])}),F[N].created===m&&(d=t.projects[N]));!d&&w>0&&(d=t.projects[0])}();var A=a("icomoon");t.isSyncing=A.isSyncing,l.auth().then(function(){t.signedIn=!0,t.authed=!0},function(){t.signedIn=!1,t.authed=!0}),l.hasCloudAccess().then(function(){t.cloudAccess=!0},function(){t.cloudAccess=!1}),t.$watch("order",function(N){var w;N==="Date Modified"?w=function(F,U){return U.metadata.lastOpened-F.metadata.lastOpened}:N==="Date Created"?w=function(F,U){return F.metadata.created-U.metadata.created}:w=function(F,U){return F.metadata.name.localeCompare(U.metadata.name)},t.projects.sort(w)}),t.loadProject=function(N,w){var F,U;d=!1,c=!0,w.loading=!0,t.projects.disabled=!0;var L,J;try{L=w.metadata.name,J=v.projects[N].name}catch(z){}if(w.disabled||L!==J){setTimeout(function(){t.loadProject(N,w)},200);return}v.projects[N]&&(v.projects[N].lastOpened=new Date().getTime(),F=v.projects[N].created||v.projects[N].metadata.created,U=a(F),U.downloadProgressHandler=function(z){var G=z.total||z.totalSize;z.loaded!==G&&t.$apply(function(){var ie=z.loaded/G;ie>1&&(ie=1),w.progress=ie})},U.load().then(function(z){z.metadata.name!==v.projects[N].name&&(z.metadata.name=v.projects[N].name,U.quickSave()),x.save("currentProject",F,function(){n.transitionTo("select").then(function(){A.save(v)})})},function(z){z==="no such project"&&(h.show("Project <strong>"+w.metadata.name+"</strong> could not be found."),v.projects.splice(N,1),A.quickSave(v),t.projects=t.projects.filter(function(G){return G.idx!==N}))}))};function M(N){var w=0,F=1;if(N&&N[0])w=N[0].idx||w;else return w;for(;F<N.length;)N[F]&&N[F].idx&&(w=Math.max(w,N[F].idx)),F+=1;return w+1}function S(N){var w=[],F;if(N=N||"Untitled Project",N=N.replace(/\d+$/,"").trim(),w=t.projects.map(function(U){return U.metadata.name}),w.indexOf(N)===-1)F="";else for(N+=" ",F=1;w.indexOf(N+F)!==-1;)F+=1;return N+F}t.newProject=function(N){var w,F,U;N=N||{},!t.cloudAccess&&t.projects.length>3?t.showPromo({r3f:"06"}):(w={name:S(),lastOpened:0,created:new Date().getTime()},F={metadata:w,iconSets:N.iconSets||[]},N.preferences&&(F.preferences=N.preferences),U={idx:M(t.projects),metadata:w,disabled:!0},t.projects.push(U),window.scrollTo(0,99999),c=!0,t.newProjectDisabled=!0,a(w.created).quickSave(F).then(function(L){return function(){v.projects.push(k(L.metadata)),c=!1,L.disabled=!1,A.quickSave(v).then(function(){t.newProjectDisabled=!1})}}(U)))},t.restore=function(){h.show({message:'<p class="mvn">Restore deleted projects?</p><p class="mtm">All <strong>non-empty</strong> projects that were deleted will&nbsp;be&nbsp;resotred.<br>Feel free to <a href="https://icomoon.io/contact">contact us</a> for further assitance.</p>',firstButton:{caption:"Restore"},secondButton:{caption:"Cancel",focused:!0}}).then(function(N){N==="Restore"&&l.restoreProjects().then(function(){location.reload()},function(){h.show('<p class="mvn">Failed to restore projects.</p><p class="mtm">You may try again later or <a href="https://icomoon.io/contact">contact us</a> for further assitance.</p>')})})},t.removeProject=function(N,w){var F=function(){var U=v.projects[N],L=U&&U.name;L&&(L=L.replace(/[^a-zA-Z\-\_0-9]/g,""),l.unpublish({name:L})),U=U.created?U.created:U.metadata.created,x.remove(U),v.projects.splice(N,1),t.projects.splice(w,1),t.projects.forEach(function(J){J.idx>N&&(J.idx-=1)}),A.quickSave(v)};h.show({message:"Are you sure you want to delete this project?<br><strong>"+v.projects[N].name+"</strong>",firstButton:{caption:"Delete"},secondButton:{caption:"Cancel",focused:!0}}).then(function(U){U==="Delete"&&F()})},t.downloadProject=function(N){a(v.projects[N].created).load().then(function(w){C().save(w.metadata.name+".json",JSON.stringify(w,null,"  "))})},t.import=function(N){var w,F,U,L,J,z,G,ie,fe;if(N){if(!t.cloudAccess&&t.projects.length>3){t.showPromo({r3f:"06"});return}for(J=N.length,J||h.show("Please select IcoMoon project files (JSON)."),w=0;w<J;w+=1){try{G=JSON.parse(N[w].file)}catch(le){var de="<strong>Invalid JSON file</strong>";try{de+="<br>"+le.message}catch(he){}h.show(de)}if(F=G.IcoMoonType==="icon-set",U=G.IcoMoonType==="selection",delete G.uid,delete G.premium,U&&G.icons){for(ie=[],L=0,z=G.icons.length;L<z;L+=1)ie[L]=G.icons[L].properties,G.icons[L]=G.icons[L].icon;G.selection=ie}if((F||U)&&G.icons){if(delete G.IcoMoonType,G.metadata||(G.metadata={name:"Untitled Set"}),!G.prevSize)try{G.prevSize=G.selection[0].prevSize}catch(le){}t.newProject({iconSets:[G],preferences:G.preferences||!1});return}G.iconSets&&G.metadata?(G.metadata.name=S(G.metadata.name),G.metadata.created=new Date().getTime(),G.metadata.lastOpened=0,fe={metadata:G.metadata,idx:M(t.projects),disabled:!0},t.projects.push(fe),window.scrollTo(0,99999),a(G.metadata.created).quickSave(G).then(function(le,he){return function(){v.projects.push(k(le.metadata)),he.disabled=!1,A.quickSave(v)}}(G,fe))):h.show("The project file you selected is not valid.")}}},t.reset=function(){a.reset().then(function(){location.reload()})},t.$on("$stateChangeStart",function(){d&&(d.loading=!0,t.projects.disabled=!0,c=!0)}),t.showPromo=function(N){t.cloudAccess||(h.show({message:['<p class="talign-left mvn">You can manage <span class="fgc0">up to 4 projects</span>.<br />Become a premium member of IcoMoon to: </p>','<ul class="noListStyle talign-left">','<li><i class="icon-check fgc9 mrs"></i>Manage an unlimited number of projects</li>','<li><i class="icon-check fgc9 mrs"></i>Save changes in your account</li>','<li><i class="icon-check fgc9 mrs"></i>Encode and embed fonts in CSS</li>','<li><i class="icon-check fgc9 mrs"></i>Generate WOFF 2.0 fonts</li>','<li><i class="icon-check fgc9 mrs"></i>Access extra icon packs in the <a href="#/select/library">library tab</a></li>','<li><i class="icon-check fgc9 mrs"></i>Upload icons for sharing, development or production</li>',"</ul>"].join(""),firstButton:{caption:"Subscribe",focused:!0},secondButton:{caption:"Cancel"}}).then(function(w){w==="Subscribe"&&(window.location="https://icomoon.io/pricing")}),N&&N.hide&&(t.visiblePanels[N.hide]=!1))},t.$watch(function(){return t.order+JSON.stringify(t.projects)},function(){if(clearTimeout(g),c){A.quickSave(v);return}t.projects.forEach(function(N,w){var F;N.metadata.name=N.metadata.name.trim(),N.metadata.name||(N.metadata.name=S("Untitled Project")),v.projects[N.idx]&&v.projects[N.idx].name!==N.metadata.name&&(N.disabled=!0,v.projects[N.idx].name=N.metadata.name,F=a(N.metadata.created),F.load().then(function(U){U.metadata.name=N.metadata.name,F.quickSave().then(function(){N.disabled=!1})},function(U){U==="no such project"&&(v.projects.splice(N.idx,1),t.projects.splice(w,1))}))}),g=setTimeout(function(){v.order=t.order,c||A.quickSave(v)},1e3)})})}]);angular.module("icomoonApp").controller("LibCtrl",["$scope","$http","$state","iconSets","cloud",function(t,n,y,a,l){var h=!1,C=l.getPurchases().then(function(x){var d=[];return x.forEach(function(m){isNaN(m.product)||(d[m.product]=m.jsonlink)}),d});(function(){var x=[];a.forEach(function(d,m){d.ignore||(x.push(d),h===!1&&d.premium&&(h=x.length-1))}),a=x,t.collections=[],t.collections[0]=a.slice(0,h),t.collections[1]=a.slice(h),t.collections[1].premium=!0})(),t.$watch(function(){return t.project.iconSets.slice(0)},function(x){var d,m,f,c=[],v,g;for(d=function(k,E){var A=k[E.productId];A?(E.hasAccess=!0,E.json=A):E.hasAccess=!1},v=x.length,m=0;m<v;m+=1)g=x[m],x[m]=g.metadata.name,c[m]=t.getSetHash(g);for(m=0,v=a.length;m<v;m+=1)g=a[m],f=x.indexOf(g.name),g.button={},f===-1?(g.added=g.latest=!1,g.button.caption="Add",g.button.caption2="Adding",g.button.icon="plus"):(g.added={idx:f},g.latest=c.indexOf(g.iconsHash)!==-1,g.latest?(g.button.caption="Remove",g.button.caption2="Removing",g.button.icon="minus"):(g.button.caption="Restore / Update",g.button.caption2="Loading",g.button.icon="sync")),g.purchaseLink?(g.hasAccess="loading",function(k){C.then(function(E){d(E,k)})}(g)):g.hasAccess=!0},!0),t.addremove=function(x){var d={transformResponse:!1};x.added&&x.latest&&t.removeSet(x.added.idx),x.latest||(x.button.disabled=!0,x.productId&&(d.withCredentials=!0),n.get(x.json,d).then(function(m){x.added&&t.removeSet(x.added.idx,!0),t.import([{file:m.data}]).finally(function(){t.scrollPositions.select=0,y.transitionTo("select"),x.button.disabled=!1})}))},t.packSubmission={},t.submitPack=function(){t.packSubmission.url&&(t.packSubmission.sending=!0,l.contact({email:t.packSubmission.email,msg:"<b>Icon Pack Submission</b><br /><br />URL: "+t.packSubmission.url}).then(function(){t.packSubmission={submitted:!0}}).finally(function(){t.packSubmission={}}))}}]);})();
/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * @link   http://www.phpied.com/rgb-color-parser-in-javascript/
 * @license Use it if you like it
 */
